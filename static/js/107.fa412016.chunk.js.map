{"version":3,"file":"static/js/107.fa412016.chunk.js","mappings":"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","sources":["components/MediaCard.jsx","../node_modules/lucide-react/src/icons/external-link.ts","../node_modules/lucide-react/src/icons/book-copy.ts","../node_modules/lucide-react/src/icons/book-marked.ts","../node_modules/lucide-react/src/icons/shopping-cart.ts","../node_modules/lucide-react/src/icons/lightbulb.ts","../node_modules/lucide-react/src/icons/dollar-sign.ts","../node_modules/lucide-react/src/icons/globe.ts","pages/Details.jsx","../node_modules/lucide-react/src/icons/award.ts","../node_modules/lucide-react/src/icons/book-open.ts","../node_modules/lucide-react/src/icons/check.ts","../node_modules/lucide-react/src/icons/chevron-left.ts","../node_modules/lucide-react/src/icons/clock.ts","../node_modules/lucide-react/src/icons/eye.ts","../node_modules/lucide-react/src/icons/film.ts","../node_modules/lucide-react/src/icons/play.ts","../node_modules/lucide-react/src/icons/plus.ts","../node_modules/lucide-react/src/icons/sparkles.ts","../node_modules/lucide-react/src/icons/trash-2.ts","../node_modules/lucide-react/src/icons/users.ts"],"sourcesContent":["import React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { Plus, Star } from 'lucide-react';\nimport { addToLibrary, getSyllabusScore } from '../services/api';\nimport { useAuth } from '../context/AuthContext';\nimport { useToast } from '../context/ToastContext';\n\nconst TMDB_IMG = 'https://image.tmdb.org/t/p/w342';\n\nfunction MediaCard({ item, mediaType = 'movie' }) {\n  const navigate = useNavigate();\n  const { user } = useAuth();\n  const toast = useToast();\n\n  const title = item.title || item.name;\n  const poster = item.poster_path\n    ? (item.poster_path.startsWith('http') ? item.poster_path : `${TMDB_IMG}${item.poster_path}`)\n    : null;\n  const year = (item.release_date || item.first_air_date || item.first_publish_year || '').toString().slice(0, 4);\n  const type = item.media_type || mediaType;\n\n  // Prefer: unified_rating (from enrichment) → stored Syllabus Score → TMDB vote_average → book rating\n  const storedScore = type !== 'book' ? getSyllabusScore(type, item.id) : null;\n  const rating = item.unified_rating ?? storedScore ?? item.vote_average ?? item.rating;\n\n  const handleClick = () => {\n    if (type === 'book') {\n      const workKey = item.key?.replace('/works/', '') || '';\n      if (workKey) navigate(`/details/book/${workKey}`);\n      return;\n    }\n    const id = item.id || item.tmdb_id;\n    navigate(`/details/${type}/${id}`);\n  };\n\n  const handleAdd = async (e) => {\n    e.stopPropagation();\n    if (!user) return toast('Please log in first', 'error');\n    try {\n      await addToLibrary({\n        tmdb_id: type !== 'book' ? item.id : null,\n        openlibrary_key: type === 'book' ? item.key : null,\n        media_type: type,\n        title,\n        poster_path: poster,\n        overview: item.overview || '',\n        external_rating: rating || null,\n        genres: item.genre_ids ? item.genre_ids.join(',') : '',\n        release_date: item.release_date || item.first_air_date || '',\n      });\n      toast(`Added \"${title}\" to your library!`, 'success');\n    } catch (err) {\n      toast(err?.message === 'Already in your library' ? `\"${title}\" is already in your library` : 'Could not add to library', 'error');\n    }\n  };\n\n  const [imgBroken, setImgBroken] = useState(false);\n\n  return (\n    <div\n      className=\"group relative rounded-2xl overflow-hidden bg-dark-700/50 border border-white/5 cursor-pointer transition-all duration-300 hover:-translate-y-1.5 hover:shadow-[0_8px_30px_rgba(233,69,96,0.12)] hover:border-white/10\"\n      onClick={handleClick}\n    >\n      {poster && !imgBroken ? (\n        <img src={poster} alt={title} loading=\"lazy\" className=\"w-full aspect-[2/3] object-cover\"\n          onError={() => setImgBroken(true)}\n          onLoad={e => { if (e.target.naturalWidth <= 1) setImgBroken(true); }}\n        />\n      ) : (\n        <div className=\"w-full aspect-[2/3] bg-dark-600 flex items-center justify-center text-white/30 text-xs p-4 text-center\">\n          {title}\n        </div>\n      )}\n\n      {rating > 0 && (\n        <div className=\"absolute top-3 right-3 bg-black/70 backdrop-blur-md rounded-lg px-2 py-1 flex items-center gap-1 text-xs font-semibold\">\n          <Star size={13} className=\"text-gold fill-gold\" />\n          {Number(rating).toFixed(1)}\n        </div>\n      )}\n\n      <button\n        onClick={handleAdd}\n        title=\"Add to library\"\n        className=\"absolute bottom-16 right-3 w-9 h-9 rounded-full bg-accent text-white flex items-center justify-center opacity-0 scale-75 group-hover:opacity-100 group-hover:scale-100 transition-all duration-200 hover:bg-accent-hover\"\n      >\n        <Plus size={18} />\n      </button>\n\n      <div className=\"p-3\">\n        <p className=\"text-sm font-semibold truncate\">{title}</p>\n        <p className=\"text-xs text-white/40 mt-1\">\n          {year}{type === 'book' && item.author ? ` · ${item.author}` : ''}\n        </p>\n      </div>\n    </div>\n  );\n}\n\nexport default React.memo(MediaCard);\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M15 3h6v6', key: '1q9fwt' }],\n  ['path', { d: 'M10 14 21 3', key: 'gplh6r' }],\n  ['path', { d: 'M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6', key: 'a6xqqp' }],\n];\n\n/**\n * @component @name ExternalLink\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTUgM2g2djYiIC8+CiAgPHBhdGggZD0iTTEwIDE0IDIxIDMiIC8+CiAgPHBhdGggZD0iTTE4IDEzdjZhMiAyIDAgMCAxLTIgMkg1YTIgMiAwIDAgMS0yLTJWOGEyIDIgMCAwIDEgMi0yaDYiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/external-link\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ExternalLink = createLucideIcon('external-link', __iconNode);\n\nexport default ExternalLink;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M5 7a2 2 0 0 0-2 2v11', key: '1yhqjt' }],\n  ['path', { d: 'M5.803 18H5a2 2 0 0 0 0 4h9.5a.5.5 0 0 0 .5-.5V21', key: 'edzzo5' }],\n  [\n    'path',\n    {\n      d: 'M9 15V4a2 2 0 0 1 2-2h9.5a.5.5 0 0 1 .5.5v14a.5.5 0 0 1-.5.5H11a2 2 0 0 1 0-4h10',\n      key: '1nwzrg',\n    },\n  ],\n];\n\n/**\n * @component @name BookCopy\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNNSA3YTIgMiAwIDAgMC0yIDJ2MTEiIC8+CiAgPHBhdGggZD0iTTUuODAzIDE4SDVhMiAyIDAgMCAwIDAgNGg5LjVhLjUuNSAwIDAgMCAuNS0uNVYyMSIgLz4KICA8cGF0aCBkPSJNOSAxNVY0YTIgMiAwIDAgMSAyLTJoOS41YS41LjUgMCAwIDEgLjUuNXYxNGEuNS41IDAgMCAxLS41LjVIMTFhMiAyIDAgMCAxIDAtNGgxMCIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/book-copy\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst BookCopy = createLucideIcon('book-copy', __iconNode);\n\nexport default BookCopy;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M10 2v8l3-3 3 3V2', key: 'sqw3rj' }],\n  [\n    'path',\n    {\n      d: 'M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20',\n      key: 'k3hazp',\n    },\n  ],\n];\n\n/**\n * @component @name BookMarked\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTAgMnY4bDMtMyAzIDNWMiIgLz4KICA8cGF0aCBkPSJNNCAxOS41di0xNUEyLjUgMi41IDAgMCAxIDYuNSAySDE5YTEgMSAwIDAgMSAxIDF2MThhMSAxIDAgMCAxLTEgMUg2LjVhMSAxIDAgMCAxIDAtNUgyMCIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/book-marked\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst BookMarked = createLucideIcon('book-marked', __iconNode);\n\nexport default BookMarked;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['circle', { cx: '8', cy: '21', r: '1', key: 'jimo8o' }],\n  ['circle', { cx: '19', cy: '21', r: '1', key: '13723u' }],\n  [\n    'path',\n    {\n      d: 'M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12',\n      key: '9zh506',\n    },\n  ],\n];\n\n/**\n * @component @name ShoppingCart\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8Y2lyY2xlIGN4PSI4IiBjeT0iMjEiIHI9IjEiIC8+CiAgPGNpcmNsZSBjeD0iMTkiIGN5PSIyMSIgcj0iMSIgLz4KICA8cGF0aCBkPSJNMi4wNSAyLjA1aDJsMi42NiAxMi40MmEyIDIgMCAwIDAgMiAxLjU4aDkuNzhhMiAyIDAgMCAwIDEuOTUtMS41N2wxLjY1LTcuNDNINS4xMiIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/shopping-cart\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ShoppingCart = createLucideIcon('shopping-cart', __iconNode);\n\nexport default ShoppingCart;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  [\n    'path',\n    {\n      d: 'M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5',\n      key: '1gvzjb',\n    },\n  ],\n  ['path', { d: 'M9 18h6', key: 'x1upvd' }],\n  ['path', { d: 'M10 22h4', key: 'ceow96' }],\n];\n\n/**\n * @component @name Lightbulb\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTUgMTRjLjItMSAuNy0xLjcgMS41LTIuNSAxLS45IDEuNS0yLjIgMS41LTMuNUE2IDYgMCAwIDAgNiA4YzAgMSAuMiAyLjIgMS41IDMuNS43LjcgMS4zIDEuNSAxLjUgMi41IiAvPgogIDxwYXRoIGQ9Ik05IDE4aDYiIC8+CiAgPHBhdGggZD0iTTEwIDIyaDQiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/lightbulb\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Lightbulb = createLucideIcon('lightbulb', __iconNode);\n\nexport default Lightbulb;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['line', { x1: '12', x2: '12', y1: '2', y2: '22', key: '7eqyqh' }],\n  ['path', { d: 'M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6', key: '1b0p4s' }],\n];\n\n/**\n * @component @name DollarSign\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8bGluZSB4MT0iMTIiIHgyPSIxMiIgeTE9IjIiIHkyPSIyMiIgLz4KICA8cGF0aCBkPSJNMTcgNUg5LjVhMy41IDMuNSAwIDAgMCAwIDdoNWEzLjUgMy41IDAgMCAxIDAgN0g2IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/dollar-sign\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst DollarSign = createLucideIcon('dollar-sign', __iconNode);\n\nexport default DollarSign;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['circle', { cx: '12', cy: '12', r: '10', key: '1mglay' }],\n  ['path', { d: 'M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20', key: '13o1zl' }],\n  ['path', { d: 'M2 12h20', key: '9i4pu4' }],\n];\n\n/**\n * @component @name Globe\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMCIgLz4KICA8cGF0aCBkPSJNMTIgMmExNC41IDE0LjUgMCAwIDAgMCAyMCAxNC41IDE0LjUgMCAwIDAgMC0yMCIgLz4KICA8cGF0aCBkPSJNMiAxMmgyMCIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/globe\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Globe = createLucideIcon('globe', __iconNode);\n\nexport default Globe;\n","import React, { useEffect, useState } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { Star, ChevronLeft, Plus, Check, ExternalLink, BookOpen, Users, BookCopy, ShoppingCart, BookMarked, Eye, CheckCircle2, Play, Award, Clapperboard, PenLine, DollarSign, Globe, Film, Info, Clock, Trash2, MessageSquare, X, Sparkles, Lightbulb } from 'lucide-react';\nimport MediaCard from '../components/MediaCard';\nimport { getMovieDetails, getTVDetails, getOMDbRatings, getMALRating, computeUnifiedRating, setSyllabusScore, getSyllabusScore, getBookDetails, addToLibrary, getLibraryItemByMediaId, updateLibraryItem, removeFromLibrary, logActivity } from '../services/api';\nimport { useToast } from '../context/ToastContext';\nimport { useAuth } from '../context/AuthContext';\n\nconst TMDB_IMG = 'https://image.tmdb.org/t/p/w780';\nconst TMDB_BACKDROP = 'https://image.tmdb.org/t/p/w1280';\nconst TMDB_LOGO = 'https://image.tmdb.org/t/p/w92';\nconst TMDB_PROFILE = 'https://image.tmdb.org/t/p/w185';\n\n// Map provider names → their direct search/browse URLs\nconst PROVIDER_URLS = {\n  'Netflix': (title) => `https://www.netflix.com/search?q=${encodeURIComponent(title)}`,\n  'Amazon Prime Video': (title) => `https://www.amazon.com/s?i=instant-video&k=${encodeURIComponent(title)}`,\n  'Amazon Video': (title) => `https://www.amazon.com/s?i=instant-video&k=${encodeURIComponent(title)}`,\n  'Disney Plus': (title) => `https://www.disneyplus.com/search/${encodeURIComponent(title)}`,\n  'Apple TV': (title) => `https://tv.apple.com/search?term=${encodeURIComponent(title)}`,\n  'Apple TV Plus': (title) => `https://tv.apple.com/search?term=${encodeURIComponent(title)}`,\n  'Stan': (title) => `https://www.stan.com.au/search?q=${encodeURIComponent(title)}`,\n  'Binge': (title) => `https://binge.com.au/search?q=${encodeURIComponent(title)}`,\n  'Paramount Plus': (title) => `https://www.paramountplus.com/search/?q=${encodeURIComponent(title)}`,\n  'Paramount+ Amazon Channel': (title) => `https://www.amazon.com/s?i=instant-video&k=${encodeURIComponent(title)}`,\n  'Foxtel Now': (title) => `https://www.foxtel.com.au/now/search.html?q=${encodeURIComponent(title)}`,\n  'Hulu': (title) => `https://www.hulu.com/search?q=${encodeURIComponent(title)}`,\n  'HBO Max': (title) => `https://play.max.com/search?q=${encodeURIComponent(title)}`,\n  'Max': (title) => `https://play.max.com/search?q=${encodeURIComponent(title)}`,\n  'Peacock': (title) => `https://www.peacocktv.com/search?q=${encodeURIComponent(title)}`,\n  'Crunchyroll': (title) => `https://www.crunchyroll.com/search?q=${encodeURIComponent(title)}`,\n  'Google Play Movies': (title) => `https://play.google.com/store/search?q=${encodeURIComponent(title)}&c=movies`,\n  'YouTube': (title) => `https://www.youtube.com/results?search_query=${encodeURIComponent(title)}`,\n  'Microsoft Store': (title) => `https://www.microsoft.com/en-au/search/shop/movies-tv?q=${encodeURIComponent(title)}`,\n};\n\nfunction getProviderUrl(providerName, title, fallbackLink) {\n  for (const [key, urlFn] of Object.entries(PROVIDER_URLS)) {\n    if (providerName.toLowerCase().includes(key.toLowerCase()) || key.toLowerCase().includes(providerName.toLowerCase())) {\n      return urlFn(title);\n    }\n  }\n  return fallbackLink || '#';\n}\n\n/* ─────────────────────────────────────────────────── */\n/*  Library Panel — inline status / rate / review       */\n/* ─────────────────────────────────────────────────── */\nfunction LibraryPanel({ mediaId, addPayload }) {\n  const [libItem, setLibItem] = useState(null);          // null = not in lib, object = in lib\n  const [loading, setLoading] = useState(true);\n  const [saving, setSaving] = useState(false);\n  const [status, setStatus] = useState('watching');\n  const [rating, setRating] = useState(0);\n  const [review, setReview] = useState('');\n  const [expanded, setExpanded] = useState(false);\n  const toast = useToast();\n  const { user } = useAuth();\n\n  // Stable primitive key so the effect doesn't re-fire every render\n  const stableKey = mediaId.tmdb_id || mediaId.openlibrary_key;\n\n  useEffect(() => {\n    let cancelled = false;\n    async function lookup() {\n      if (!user) { setLoading(false); return; }\n      try {\n        const item = await getLibraryItemByMediaId(mediaId);\n        if (cancelled) return;\n        if (item) {\n          setLibItem(item);\n          setStatus(item.status || 'watching');\n          setRating(item.user_rating || 0);\n          setReview(item.review || '');\n          setExpanded(true);\n        }\n      } catch (err) {\n        console.error('Library lookup failed:', err);\n      }\n      if (!cancelled) setLoading(false);\n    }\n    lookup();\n    return () => { cancelled = true; };\n  }, [stableKey, user]);\n\n  const handleAdd = async (chosenStatus) => {\n    if (!user) return toast('Please log in first', 'error');\n    try {\n      const newItem = await addToLibrary({ ...addPayload, status: chosenStatus });\n      setLibItem(newItem);\n      setStatus(chosenStatus);\n      setExpanded(true);\n      toast(`Added to library!`, 'success');\n      logActivity({ action: 'added', title: addPayload.title, media_type: addPayload.media_type, media_id: addPayload.tmdb_id || addPayload.openlibrary_key, poster_url: addPayload.poster_url }).catch(() => {});\n    } catch (err) {\n      toast(err?.message === 'Already in your library' ? 'Already in your library' : 'Could not add', 'error');\n    }\n  };\n\n  const handleStatusChange = async (newStatus) => {\n    setStatus(newStatus);\n    if (libItem) {\n      try {\n        await updateLibraryItem(libItem.id, { status: newStatus });\n        setLibItem(prev => ({ ...prev, status: newStatus }));\n        const labels = { want: 'Wishlist', watching: 'In Progress', finished: 'Finished' };\n        toast(`Moved to ${labels[newStatus]}`, 'info');\n        if (newStatus === 'finished') {\n          logActivity({ action: 'finished', title: addPayload.title, media_type: addPayload.media_type, media_id: addPayload.tmdb_id || addPayload.openlibrary_key, poster_url: addPayload.poster_url }).catch(() => {});\n        }\n      } catch { toast('Failed to update status', 'error'); }\n    }\n  };\n\n  const handleSave = async () => {\n    if (!libItem) return;\n    setSaving(true);\n    try {\n      const updated = await updateLibraryItem(libItem.id, {\n        user_rating: rating || null,\n        review: review || null,\n        status,\n      });\n      setLibItem(updated);\n      toast('Saved!', 'success');\n      if (rating) {\n        logActivity({ action: 'rated', title: addPayload.title, media_type: addPayload.media_type, media_id: addPayload.tmdb_id || addPayload.openlibrary_key, poster_url: addPayload.poster_url, rating }).catch(() => {});\n      }\n      if (review) {\n        logActivity({ action: 'reviewed', title: addPayload.title, media_type: addPayload.media_type, media_id: addPayload.tmdb_id || addPayload.openlibrary_key, poster_url: addPayload.poster_url, review }).catch(() => {});\n      }\n    } catch (err) {\n      console.error('Save failed:', err);\n      toast(err?.message || 'Failed to save — try again', 'error');\n    }\n    setSaving(false);\n  };\n\n  const handleRemove = async () => {\n    if (!libItem) return;\n    try {\n      await removeFromLibrary(libItem.id);\n      setLibItem(null);\n      setStatus('watching');\n      setRating(0);\n      setReview('');\n      setExpanded(false);\n      toast('Removed from library', 'success');\n    } catch { toast('Failed to remove', 'error'); }\n  };\n\n  const getRatingColor = (val) => {\n    if (val <= 3) return 'from-red-500 to-red-600';\n    if (val <= 5) return 'from-orange-500 to-amber-500';\n    if (val <= 7) return 'from-yellow-500 to-lime-500';\n    if (val <= 9) return 'from-green-400 to-emerald-500';\n    return 'from-emerald-400 to-cyan-400';\n  };\n\n  const getRatingLabel = (val) => {\n    if (!val || val === 0) return '';\n    if (val <= 2) return 'Terrible';\n    if (val <= 4) return 'Not great';\n    if (val <= 5) return 'Okay';\n    if (val <= 6.5) return 'Decent';\n    if (val <= 7.5) return 'Good';\n    if (val <= 8.5) return 'Great';\n    if (val <= 9.5) return 'Amazing';\n    return 'Masterpiece';\n  };\n\n  if (loading) return <div className=\"h-12 w-48 bg-dark-700 rounded-xl animate-pulse mt-2\" />;\n  if (!user) return (\n    <p className=\"text-xs text-white/30 mt-4\">Log in to add to your library</p>\n  );\n\n  // ─── Not in library: show add buttons ───\n  if (!libItem) {\n    return (\n      <div className=\"mt-6\">\n        <p className=\"text-[10px] text-white/30 uppercase tracking-wider mb-2\">Add to Library</p>\n        <div className=\"flex flex-wrap gap-2\">\n          {[\n            { key: 'watching', icon: Eye, label: 'Watching', cls: 'bg-blue-500 hover:bg-blue-600' },\n            { key: 'want', icon: Clock, label: 'Wishlist', cls: 'bg-purple-500 hover:bg-purple-600' },\n            { key: 'finished', icon: CheckCircle2, label: 'Finished', cls: 'bg-green-500 hover:bg-green-600' },\n          ].map(s => (\n            <button key={s.key} onClick={() => handleAdd(s.key)}\n              className={`${s.cls} text-white px-4 py-2.5 rounded-xl text-sm font-medium flex items-center gap-2 transition-all duration-200 hover:scale-[1.02] active:scale-95`}>\n              <s.icon size={16} />\n              {s.label}\n            </button>\n          ))}\n        </div>\n      </div>\n    );\n  }\n\n  // ─── In library: full control panel ───\n  return (\n    <div className=\"mt-6 bg-white/[0.03] border border-white/[0.08] rounded-2xl overflow-hidden\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between px-4 py-3 border-b border-white/[0.06]\">\n        <div className=\"flex items-center gap-2\">\n          <Check size={16} className=\"text-green-400\" />\n          <span className=\"text-sm font-medium text-white/70\">In Your Library</span>\n        </div>\n        <div className=\"flex items-center gap-1.5\">\n          <button onClick={() => setExpanded(e => !e)}\n            className=\"text-xs text-white/30 hover:text-white/60 px-2 py-1 rounded-lg hover:bg-white/5 transition-all\">\n            {expanded ? 'Collapse' : 'Edit'}\n          </button>\n          <button onClick={handleRemove}\n            className=\"text-white/20 hover:text-red-400 p-1 rounded-lg hover:bg-white/5 transition-all\" title=\"Remove\">\n            <Trash2 size={14} />\n          </button>\n        </div>\n      </div>\n\n      {/* Status buttons (always visible) */}\n      <div className=\"px-4 py-3 flex gap-2\">\n        {[\n          { key: 'want', icon: Clock, label: 'Wishlist', active: 'bg-purple-500 text-white border-purple-400' },\n          { key: 'watching', icon: Eye, label: 'In Progress', active: 'bg-blue-500 text-white border-blue-400' },\n          { key: 'finished', icon: CheckCircle2, label: 'Finished', active: 'bg-green-500 text-white border-green-400' },\n        ].map(s => (\n          <button key={s.key} onClick={() => handleStatusChange(s.key)}\n            className={`flex-1 py-2 rounded-xl text-xs font-semibold border flex items-center justify-center gap-1.5 transition-all duration-200 ${\n              status === s.key ? s.active : 'border-white/10 text-white/40 hover:border-white/20 hover:text-white/70'\n            }`}>\n            <s.icon size={13} />\n            {s.label}\n          </button>\n        ))}\n      </div>\n\n      {/* Expanded: rating + review */}\n      {expanded && (\n        <div className=\"px-4 pb-4 space-y-4\">\n          {/* Rating */}\n          <div>\n            <label className=\"text-[10px] text-white/30 uppercase tracking-wider block mb-2\">Your Rating</label>\n            <div className=\"flex items-center gap-4\">\n              <div className=\"flex-1\">\n                <input type=\"range\" min=\"0\" max=\"10\" step=\"0.1\" value={rating}\n                  onChange={e => setRating(parseFloat(e.target.value))}\n                  className=\"w-full h-1.5 rounded-full appearance-none cursor-pointer bg-dark-600\n                    [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-4 [&::-webkit-slider-thumb]:h-4\n                    [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-accent [&::-webkit-slider-thumb]:shadow-lg\n                    [&::-webkit-slider-thumb]:shadow-accent/30 [&::-webkit-slider-thumb]:cursor-pointer\n                    [&::-webkit-slider-thumb]:border-2 [&::-webkit-slider-thumb]:border-white/20\" />\n                <div className=\"flex justify-between mt-1\">\n                  <span className=\"text-[9px] text-white/15\">0</span>\n                  <span className=\"text-[9px] text-white/15\">5</span>\n                  <span className=\"text-[9px] text-white/15\">10</span>\n                </div>\n              </div>\n              <div className=\"text-right min-w-[60px]\">\n                <span className={`text-2xl font-black bg-gradient-to-r ${rating > 0 ? getRatingColor(rating) : 'from-white/20 to-white/20'} bg-clip-text text-transparent`}>\n                  {rating > 0 ? Number(rating).toFixed(1) : '—'}\n                </span>\n                {rating > 0 && <p className=\"text-[9px] text-white/30\">{getRatingLabel(rating)}</p>}\n              </div>\n            </div>\n            {/* Quick picks */}\n            <div className=\"flex gap-1 mt-2\">\n              {[5, 6, 7, 7.5, 8, 8.5, 9, 9.5, 10].map(n => (\n                <button key={n} onClick={() => setRating(n)}\n                  className={`flex-1 py-1 rounded text-[9px] font-bold transition-all ${\n                    rating === n ? 'bg-accent text-white' : 'bg-dark-700 text-white/25 hover:bg-dark-600 hover:text-white/50'\n                  }`}>{n}</button>\n              ))}\n            </div>\n          </div>\n\n          {/* Review */}\n          <div>\n            <label className=\"text-[10px] text-white/30 uppercase tracking-wider block mb-2\">Your Thoughts</label>\n            <textarea value={review} onChange={e => setReview(e.target.value)}\n              placeholder=\"What did you think? (optional)\" rows={2}\n              className=\"w-full bg-dark-700/50 border border-white/[0.06] rounded-xl px-3 py-2.5 text-sm text-white/80 placeholder-white/20 focus:outline-none focus:border-accent/40 resize-none transition-colors\" />\n          </div>\n\n          {/* Save */}\n          <button onClick={handleSave} disabled={saving}\n            className=\"w-full btn-primary py-2.5 text-sm font-semibold disabled:opacity-50 transition-all\">\n            {saving ? 'Saving...' : 'Save'}\n          </button>\n        </div>\n      )}\n    </div>\n  );\n}\n\n/* ─────────────────────────────────────────────────── */\n/*  Book Detail View                                    */\n/* ─────────────────────────────────────────────────── */\nfunction BookDetails({ workKey, navigate }) {\n  const [data, setData] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const toast = useToast();\n\n  useEffect(() => {\n    async function load() {\n      setLoading(true);\n      const key = workKey.startsWith('/works/') ? workKey : `/works/${workKey}`;\n      const result = await getBookDetails(key);\n      setData(result);\n      setLoading(false);\n    }\n    load();\n  }, [workKey]);\n\n  if (loading) return <div className=\"flex justify-center py-20\"><div className=\"w-8 h-8 border-2 border-dark-500 border-t-accent rounded-full animate-spin\" /></div>;\n  if (!data) return <div className=\"text-center py-20 text-white/40\"><h3 className=\"text-lg\">Book not found</h3></div>;\n\n  const totalReaders = (data.want_to_read || 0) + (data.currently_reading || 0) + (data.already_read || 0);\n  const searchQ = encodeURIComponent(`${data.title} book`);\n  const [coverBroken, setCoverBroken] = useState(false);\n\n  return (\n    <div>\n      {/* Gradient backdrop for books */}\n      <div className=\"absolute top-0 left-0 w-full h-80 -z-10 overflow-hidden\">\n        <div className=\"w-full h-full bg-gradient-to-br from-accent/15 via-dark-800 to-dark-900\" />\n        <div className=\"absolute inset-0 bg-gradient-to-b from-transparent to-dark-900\" />\n      </div>\n\n      <button onClick={() => navigate(-1)} className=\"inline-flex items-center gap-1 text-white/50 hover:text-white mb-8 transition-colors\">\n        <ChevronLeft size={22} strokeWidth={2.5} /> Back\n      </button>\n\n      <div className=\"flex flex-col md:flex-row gap-8\">\n        {/* Cover */}\n        {data.poster_path && !coverBroken ? (\n          <img src={data.poster_path} alt={data.title} className=\"w-48 sm:w-56 md:w-64 max-h-[400px] rounded-2xl shadow-2xl shadow-black/50 flex-shrink-0 bg-dark-700 object-contain\"\n            onError={() => setCoverBroken(true)}\n            onLoad={e => { if (e.target.naturalWidth <= 1) setCoverBroken(true); }}\n          />\n        ) : (\n          <div className=\"w-48 sm:w-56 md:w-64 aspect-[2/3] rounded-2xl bg-dark-700 flex items-center justify-center text-white/30 text-sm flex-shrink-0\">\n            <BookOpen size={48} className=\"text-white/10\" />\n          </div>\n        )}\n\n        {/* Info */}\n        <div className=\"flex-1 min-w-0\">\n          <h1 className=\"text-3xl md:text-4xl font-bold mb-2\">{data.title}</h1>\n\n          {/* Author(s) */}\n          {data.authors?.length > 0 && (\n            <div className=\"flex flex-wrap items-center gap-3 mb-3\">\n              {data.authors.map((author, i) => (\n                <a\n                  key={author.key || i}\n                  href={`https://www.google.com/search?q=${encodeURIComponent(author.name + ' author')}`}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  className=\"flex items-center gap-2 hover:text-accent transition-colors\"\n                >\n                  {author.photo ? (\n                    <img src={author.photo} alt={author.name} className=\"w-7 h-7 rounded-full object-cover border border-white/10\" />\n                  ) : (\n                    <div className=\"w-7 h-7 rounded-full bg-dark-600 flex items-center justify-center text-white/30 text-xs font-bold border border-white/10\">\n                      {author.name?.charAt(0)}\n                    </div>\n                  )}\n                  <span className=\"text-sm text-white/60 hover:text-accent transition-colors\">\n                    {author.name}\n                  </span>\n                  <ExternalLink size={12} className=\"text-white/20\" />\n                </a>\n              ))}\n            </div>\n          )}\n\n          <p className=\"text-white/40 text-sm mb-5\">\n            {data.first_publish_date && `First published ${data.first_publish_date}`}\n            {data.edition_count > 0 && ` · ${data.edition_count} editions`}\n          </p>\n\n          {/* Rating + Stats */}\n          <div className=\"flex flex-wrap items-start gap-3 mb-6\">\n            {data.rating && (\n              <a href={`https://openlibrary.org${data.key}`} target=\"_blank\" rel=\"noopener noreferrer\"\n                className=\"bg-accent/10 border border-accent/20 rounded-xl px-4 py-3 text-center min-w-[80px] hover:bg-accent/20 transition-colors\">\n                <div className=\"flex items-center justify-center gap-1.5 mb-1\">\n                  <Star size={16} className=\"text-gold fill-gold\" />\n                  <span className=\"text-xl font-black\">{data.rating}</span>\n                  <span className=\"text-white/30 text-xs\">/ 10</span>\n                </div>\n                <p className=\"text-[10px] text-white/40 uppercase tracking-wider\">Open Library</p>\n                {data.ratings_count > 0 && <p className=\"text-[9px] text-white/20\">{data.ratings_count.toLocaleString()} ratings</p>}\n              </a>\n            )}\n\n            {totalReaders > 0 && (\n              <div className=\"bg-white/[0.04] border border-white/[0.06] rounded-xl px-4 py-3 text-center min-w-[80px]\">\n                <div className=\"flex items-center justify-center gap-1.5 mb-1\">\n                  <Users size={14} className=\"text-accent\" />\n                  <span className=\"text-lg font-bold\">{totalReaders.toLocaleString()}</span>\n                </div>\n                <p className=\"text-[10px] text-white/30\">Readers</p>\n              </div>\n            )}\n\n            {data.edition_count > 0 && (\n              <div className=\"bg-white/[0.04] border border-white/[0.06] rounded-xl px-4 py-3 text-center min-w-[80px]\">\n                <div className=\"flex items-center justify-center gap-1.5 mb-1\">\n                  <BookCopy size={14} className=\"text-white/50\" />\n                  <span className=\"text-lg font-bold\">{data.edition_count}</span>\n                </div>\n                <p className=\"text-[10px] text-white/30\">Editions</p>\n              </div>\n            )}\n          </div>\n\n          {/* Reader breakdown */}\n          {totalReaders > 0 && (\n            <div className=\"flex flex-wrap gap-4 text-xs text-white/40 mb-4\">\n              {data.want_to_read > 0 && <span className=\"flex items-center gap-1.5\"><BookMarked size={14} className=\"text-accent/70\" /> {data.want_to_read.toLocaleString()} want to read</span>}\n              {data.currently_reading > 0 && <span className=\"flex items-center gap-1.5\"><Eye size={14} className=\"text-blue-400/70\" /> {data.currently_reading.toLocaleString()} reading now</span>}\n              {data.already_read > 0 && <span className=\"flex items-center gap-1.5\"><CheckCircle2 size={14} className=\"text-green-400/70\" /> {data.already_read.toLocaleString()} have read</span>}\n            </div>\n          )}\n          {totalReaders > 0 && (\n            <p className=\"text-[10px] text-white/20 mb-6\">Reader data via Open Library</p>\n          )}\n\n          {/* Description */}\n          {data.description && (\n            <p className=\"text-white/60 leading-relaxed mb-6 max-w-2xl whitespace-pre-line\">{data.description}</p>\n          )}\n\n          {/* Subjects */}\n          {data.subjects.length > 0 && (\n            <div className=\"flex flex-wrap gap-2 mb-6\">\n              {data.subjects.map(s => (\n                <span key={s} className=\"text-xs bg-white/[0.04] border border-white/[0.06] rounded-full px-3 py-1 text-white/50\">{s}</span>\n              ))}\n            </div>\n          )}\n\n          {/* Buy / Read Links */}\n          <div className=\"mb-8\">\n            <h3 className=\"text-sm font-semibold text-white/60 mb-3 uppercase tracking-wider\">Where to Get</h3>\n            <div className=\"flex flex-wrap gap-2\">\n              <a href={`https://openlibrary.org${data.key}`} target=\"_blank\" rel=\"noopener noreferrer\"\n                className=\"flex items-center gap-2 bg-white/[0.04] border border-white/[0.06] rounded-lg px-4 py-2.5 hover:bg-white/[0.08] transition-colors\">\n                <BookOpen size={16} className=\"text-white/60\" />\n                <span className=\"text-xs font-medium\">Read Free</span>\n                <ExternalLink size={12} className=\"text-white/30\" />\n              </a>\n              <a href={`https://www.amazon.com/s?k=${searchQ}`} target=\"_blank\" rel=\"noopener noreferrer\"\n                className=\"flex items-center gap-2 bg-[#ff9900]/10 border border-[#ff9900]/20 rounded-lg px-4 py-2.5 hover:bg-[#ff9900]/20 transition-colors\">\n                <ShoppingCart size={16} className=\"text-[#ff9900]\" />\n                <span className=\"text-xs font-medium text-[#ff9900]\">Amazon</span>\n                <ExternalLink size={12} className=\"text-[#ff9900]/40\" />\n              </a>\n              <a href={`https://www.booktopia.com.au/search?keywords=${searchQ}`} target=\"_blank\" rel=\"noopener noreferrer\"\n                className=\"flex items-center gap-2 bg-white/[0.04] border border-white/[0.06] rounded-lg px-4 py-2.5 hover:bg-white/[0.08] transition-colors\">\n                <ShoppingCart size={16} className=\"text-white/60\" />\n                <span className=\"text-xs font-medium\">Booktopia</span>\n                <ExternalLink size={12} className=\"text-white/30\" />\n              </a>\n              <a href={`https://www.goodreads.com/search?q=${searchQ}`} target=\"_blank\" rel=\"noopener noreferrer\"\n                className=\"flex items-center gap-2 bg-white/[0.04] border border-white/[0.06] rounded-lg px-4 py-2.5 hover:bg-white/[0.08] transition-colors\">\n                <Star size={16} className=\"text-white/60\" />\n                <span className=\"text-xs font-medium\">Goodreads</span>\n                <ExternalLink size={12} className=\"text-white/30\" />\n              </a>\n            </div>\n          </div>\n\n          {/* Fun Facts */}\n          {(() => {\n            const facts = [];\n            if (data.edition_count >= 50) facts.push(`📚 Published in ${data.edition_count} editions worldwide — a true global phenomenon.`);\n            else if (data.edition_count >= 10) facts.push(`📖 Available in ${data.edition_count} different editions.`);\n            if (data.already_read > 10000) facts.push(`🏆 Over ${Math.floor(data.already_read / 1000) * 1000} readers have finished this book on Open Library alone.`);\n            if (data.currently_reading > 1000) facts.push(`👀 ${data.currently_reading.toLocaleString()} people are reading this right now!`);\n            if (data.want_to_read > 50000) facts.push(`🔥 More than ${Math.floor(data.want_to_read / 1000)}k people have this on their reading list.`);\n            if (data.ratings_count > 1000) facts.push(`⭐ Rated by ${data.ratings_count.toLocaleString()} readers with an average of ${data.rating}/10.`);\n            if (data.first_publish_date) {\n              const yearMatch = data.first_publish_date.match(/\\d{4}/);\n              if (yearMatch) {\n                const age = new Date().getFullYear() - parseInt(yearMatch[0]);\n                if (age > 100) facts.push(`🕰️ First published ${age} years ago — a true classic that has stood the test of time.`);\n                else if (age > 50) facts.push(`📅 Published over ${age} years ago and still widely read today.`);\n                else if (age <= 2) facts.push(`✨ A brand new release — one of the latest books to hit shelves.`);\n              }\n            }\n            if (data.subjects?.some(s => s.toLowerCase().includes('new york times'))) facts.push(`📰 A New York Times bestseller.`);\n            if (data.subjects?.some(s => s.toLowerCase().includes('pulitzer'))) facts.push(`🏅 Pulitzer Prize-related work.`);\n            if (data.authors?.length > 2) facts.push(`✍️ A collaborative work by ${data.authors.length} authors.`);\n            return facts.length > 0 ? (\n              <div className=\"mb-8\">\n                <h3 className=\"text-sm font-semibold text-white/60 mb-3 uppercase tracking-wider flex items-center gap-2\">\n                  <Lightbulb size={14} className=\"text-gold\" /> Fun Facts\n                </h3>\n                <div className=\"space-y-2\">\n                  {facts.slice(0, 4).map((fact, i) => (\n                    <div key={i} className=\"flex items-start gap-3 bg-white/[0.03] border border-white/[0.06] rounded-xl px-4 py-3\">\n                      <Sparkles size={14} className=\"text-accent mt-0.5 flex-shrink-0\" />\n                      <p className=\"text-sm text-white/60 leading-relaxed\">{fact}</p>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            ) : null;\n          })()}\n\n          <LibraryPanel\n            mediaId={{ openlibrary_key: data.key }}\n            addPayload={{\n              openlibrary_key: data.key,\n              media_type: 'book',\n              title: data.title,\n              poster_path: data.poster_path,\n              overview: data.description?.slice(0, 500) || '',\n              external_rating: data.rating,\n            }}\n          />\n        </div>\n      </div>\n    </div>\n  );\n}\n\n/* ─────────────────────────────────────────────────── */\n/*  Movie / TV Detail View                              */\n/* ─────────────────────────────────────────────────── */\nfunction Details() {\n  const { mediaType, id } = useParams();\n  const navigate = useNavigate();\n\n  // Book detail route\n  if (mediaType === 'book') {\n    return <BookDetails workKey={id} navigate={navigate} />;\n  }\n\n  return <MovieTVDetails mediaType={mediaType} id={id} navigate={navigate} />;\n}\n\nfunction MovieTVDetails({ mediaType, id, navigate }) {\n  const [data, setData] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [extRatings, setExtRatings] = useState(null);\n  const [ratingsLoaded, setRatingsLoaded] = useState(false);\n  const [malData, setMalData] = useState(null);\n  const toast = useToast();\n\n  useEffect(() => {\n    async function load() {\n      setLoading(true);\n      setExtRatings(null);\n      setRatingsLoaded(false);\n      setMalData(null);\n      const fetcher = mediaType === 'movie' ? getMovieDetails : getTVDetails;\n      const result = await fetcher(id);\n      setData(result);\n      setLoading(false);\n\n      const imdbId = result.external_ids?.imdb_id || result.imdb_id;\n      const resultTitle = result.name || result.title;\n      if (imdbId) {\n        // Try to get OMDb ratings, retry once after 2s if rate-limited\n        const fetchRatings = async () => {\n          let r = await getOMDbRatings(imdbId, resultTitle, mediaType).catch(() => null);\n          if (!r) {\n            await new Promise(resolve => setTimeout(resolve, 2000));\n            r = await getOMDbRatings(imdbId, resultTitle, mediaType).catch(() => null);\n          }\n          return r;\n        };\n        fetchRatings().then(r => { setExtRatings(r); setRatingsLoaded(true); });\n      } else {\n        setRatingsLoaded(true);\n      }\n\n      // Fetch MAL rating for anime\n      const anime = result.original_language === 'ja' &&\n        result.genres?.some(g => g.id === 16);\n      if (anime) {\n        getMALRating(resultTitle).then(r => setMalData(r));\n      }\n    }\n    load();\n  }, [mediaType, id]);\n\n  // Compute unified score (must be before early returns to keep hooks order stable)\n  const isAnime = data ? (data.original_language === 'ja' && data.genres?.some(g => g.id === 16)) : false;\n  const avgScore = computeUnifiedRating(extRatings, malData, isAnime);\n\n  // Persist Syllabus Score so it's available on MediaCards everywhere\n  useEffect(() => {\n    if (avgScore != null && data?.id) {\n      setSyllabusScore(mediaType, data.id, avgScore);\n    }\n  }, [avgScore, data?.id, mediaType]);\n\n  if (loading) return <div className=\"flex justify-center py-20\"><div className=\"w-8 h-8 border-2 border-dark-500 border-t-accent rounded-full animate-spin\" /></div>;\n  if (!data) return <div className=\"text-center py-20 text-white/40\"><h3 className=\"text-lg\">Not found</h3></div>;\n\n  const title = data.title || data.name;\n  const year = (data.release_date || data.first_air_date || '').slice(0, 4);\n  const genres = data.genres?.map(g => g.name).join(', ');\n  const recommendations = data.recommendations?.results?.slice(0, 10) || [];\n  const imdbId = extRatings?.imdb_id || data.external_ids?.imdb_id;\n\n  // Extract directors & writers from TMDB crew (with profile photos)\n  const crew = data.credits?.crew || [];\n  const directors = crew.filter(c => c.job === 'Director').slice(0, 3);\n  const writers = crew.filter(c => c.department === 'Writing').slice(0, 4);\n\n  // Find best trailer (prefer Official Trailer, then any Trailer, then Teaser)\n  const trailer = (() => {\n    const vids = (data.videos?.results || []).filter(v => v.site === 'YouTube');\n    return vids.find(v => v.type === 'Trailer' && v.name.toLowerCase().includes('official'))\n      || vids.find(v => v.type === 'Trailer')\n      || vids.find(v => v.type === 'Teaser')\n      || vids[0]\n      || null;\n  })();\n\n  // Streaming providers (AU first, fallback to US)\n  const wpData = data['watch/providers']?.results;\n  const providers = wpData?.AU || wpData?.US || null;\n  const streamingProviders = providers?.flatrate || [];\n  const rentProviders = providers?.rent || [];\n  const buyProviders = providers?.buy || [];\n\n  // Quick Facts card — rendered in poster column (desktop) and info column (mobile)\n  const quickFactsCard = (\n    <div className=\"bg-white/[0.03] border border-white/[0.06] rounded-xl p-4 space-y-3\">\n      {data.tagline && (\n        <p className=\"text-xs italic text-white/40 leading-relaxed\">\"{data.tagline}\"</p>\n      )}\n      {directors.length > 0 && (\n        <div>\n          <p className=\"text-[10px] text-white/30 uppercase tracking-wider mb-2\">Director</p>\n          <div className=\"space-y-2\">\n            {directors.map(d => (\n              <a key={d.id} href={`https://www.google.com/search?q=${encodeURIComponent(d.name + ' filmmaker')}`}\n                target=\"_blank\" rel=\"noopener noreferrer\" className=\"flex items-center gap-2.5 group/crew hover:bg-white/[0.04] rounded-lg p-1 -m-1 transition-colors\">\n                {d.profile_path ? (\n                  <img src={`${TMDB_PROFILE}${d.profile_path}`} alt={d.name}\n                    className=\"w-8 h-8 rounded-full object-cover border border-white/[0.08] group-hover/crew:border-accent/40 transition-colors\" />\n                ) : (\n                  <div className=\"w-8 h-8 rounded-full bg-dark-600 flex items-center justify-center text-white/20 text-xs font-bold border border-white/[0.08] group-hover/crew:border-accent/40 transition-colors\">\n                    {d.name?.charAt(0)}\n                  </div>\n                )}\n                <span className=\"text-xs text-white/70 group-hover/crew:text-accent transition-colors\">{d.name}</span>\n              </a>\n            ))}\n          </div>\n        </div>\n      )}\n      {writers.length > 0 && (\n        <div>\n          <p className=\"text-[10px] text-white/30 uppercase tracking-wider mb-2\">Writer</p>\n          <div className=\"space-y-2\">\n            {writers.map(w => (\n              <a key={w.id + w.job} href={`https://www.google.com/search?q=${encodeURIComponent(w.name + ' writer')}`}\n                target=\"_blank\" rel=\"noopener noreferrer\" className=\"flex items-center gap-2.5 group/crew hover:bg-white/[0.04] rounded-lg p-1 -m-1 transition-colors\">\n                {w.profile_path ? (\n                  <img src={`${TMDB_PROFILE}${w.profile_path}`} alt={w.name}\n                    className=\"w-8 h-8 rounded-full object-cover border border-white/[0.08] group-hover/crew:border-accent/40 transition-colors\" />\n                ) : (\n                  <div className=\"w-8 h-8 rounded-full bg-dark-600 flex items-center justify-center text-white/20 text-xs font-bold border border-white/[0.08] group-hover/crew:border-accent/40 transition-colors\">\n                    {w.name?.charAt(0)}\n                  </div>\n                )}\n                <div>\n                  <span className=\"text-xs text-white/70 group-hover/crew:text-accent transition-colors block\">{w.name}</span>\n                  <span className=\"text-[10px] text-white/25\">{w.job}</span>\n                </div>\n              </a>\n            ))}\n          </div>\n        </div>\n      )}\n      {extRatings?.rated && (\n        <div className=\"flex items-start gap-2.5\">\n          <Film size={14} className=\"text-white/30 mt-0.5 flex-shrink-0\" />\n          <div>\n            <p className=\"text-[10px] text-white/30 uppercase tracking-wider\">Rated</p>\n            <p className=\"text-xs text-white/70\">{extRatings.rated}</p>\n          </div>\n        </div>\n      )}\n      {extRatings?.awards && (\n        <div className=\"flex items-start gap-2.5\">\n          <Award size={14} className=\"text-accent/60 mt-0.5 flex-shrink-0\" />\n          <div>\n            <p className=\"text-[10px] text-white/30 uppercase tracking-wider\">Awards</p>\n            <p className=\"text-xs text-white/70 leading-relaxed\">{extRatings.awards}</p>\n          </div>\n        </div>\n      )}\n      {(extRatings?.boxOffice || data.budget > 0 || data.revenue > 0) && (\n        <div className=\"flex items-start gap-2.5\">\n          <DollarSign size={14} className=\"text-green-400/60 mt-0.5 flex-shrink-0\" />\n          <div>\n            <p className=\"text-[10px] text-white/30 uppercase tracking-wider\">Box Office</p>\n            {data.budget > 0 && <p className=\"text-xs text-white/50\">Budget: ${(data.budget / 1e6).toFixed(0)}M</p>}\n            {extRatings?.boxOffice && <p className=\"text-xs text-white/70\">Gross: {extRatings.boxOffice}</p>}\n            {data.revenue > 0 && <p className=\"text-xs text-white/70\">Revenue: ${(data.revenue / 1e6).toFixed(0)}M</p>}\n          </div>\n        </div>\n      )}\n      {extRatings?.country && (\n        <div className=\"flex items-start gap-2.5\">\n          <Globe size={14} className=\"text-white/30 mt-0.5 flex-shrink-0\" />\n          <div>\n            <p className=\"text-[10px] text-white/30 uppercase tracking-wider\">Country</p>\n            <p className=\"text-xs text-white/70\">{extRatings.country}</p>\n          </div>\n        </div>\n      )}\n      {data.production_companies?.length > 0 && (\n        <div className=\"flex items-start gap-2.5\">\n          <Info size={14} className=\"text-white/30 mt-0.5 flex-shrink-0\" />\n          <div>\n            <p className=\"text-[10px] text-white/30 uppercase tracking-wider\">Studio</p>\n            <p className=\"text-xs text-white/70\">{data.production_companies.slice(0, 2).map(c => c.name).join(', ')}</p>\n          </div>\n        </div>\n      )}\n      {!ratingsLoaded && data.external_ids?.imdb_id && (\n        <div className=\"space-y-3 animate-pulse\">\n          {[1,2,3].map(i => (<div key={i} className=\"flex gap-2.5\"><div className=\"w-3 h-3 bg-dark-600 rounded\" /><div className=\"flex-1\"><div className=\"h-2 w-10 bg-dark-600 rounded mb-1\" /><div className=\"h-3 w-20 bg-dark-600 rounded\" /></div></div>))}\n        </div>\n      )}\n    </div>\n  );\n\n  return (\n    <div>\n      {/* Backdrop */}\n      {data.backdrop_path && (\n        <div className=\"absolute top-0 left-0 w-full h-80 -z-10 overflow-hidden\">\n          <img src={`${TMDB_BACKDROP}${data.backdrop_path}`} alt=\"\" className=\"w-full h-full object-cover opacity-20\" />\n          <div className=\"absolute inset-0 bg-gradient-to-b from-transparent to-dark-900\" />\n        </div>\n      )}\n\n      <button onClick={() => navigate(-1)}\n        className=\"inline-flex items-center gap-1 text-white/50 hover:text-white mb-8 transition-colors\">\n        <ChevronLeft size={22} strokeWidth={2.5} /> Back\n      </button>\n\n      <div className=\"flex flex-col md:flex-row gap-8\">\n        {/* Poster column — sticky on desktop */}\n        <div className=\"flex-shrink-0 md:sticky md:top-8 md:self-start w-48 sm:w-56 md:w-64 lg:w-72 xl:w-80\">\n          {data.poster_path ? (\n            <img src={`${TMDB_IMG}${data.poster_path}`} alt={title}\n              className=\"w-full rounded-2xl shadow-2xl shadow-black/50 aspect-[2/3] object-cover\" />\n          ) : (\n            <div className=\"w-full aspect-[2/3] rounded-2xl bg-dark-700 flex items-center justify-center text-white/30 text-sm\">\n              No Poster\n            </div>\n          )}\n\n          {/* ── Quick Facts card (desktop only) ── */}\n          <div className=\"hidden md:block mt-4\">\n            {quickFactsCard}\n          </div>\n        </div>\n\n        {/* Info */}\n        <div className=\"flex-1 min-w-0\">\n          <h1 className=\"text-3xl md:text-4xl font-bold mb-3\">{title}</h1>\n\n          <p className=\"text-white/40 text-sm mb-4\">\n            {year} {genres && `· ${genres}`}\n            {data.runtime && ` · ${data.runtime} min`}\n            {data.number_of_seasons && ` · ${data.number_of_seasons} season${data.number_of_seasons > 1 ? 's' : ''}`}\n          </p>\n\n          {/* ── Ratings ── */}\n          <div className=\"flex flex-wrap items-stretch gap-3 mb-6\">\n            {/* Syllabus Score — unified, cached, or TMDB fallback */}\n            {(() => {\n              const syllabusScore = avgScore || getSyllabusScore(mediaType, data.id);\n              const displayScore = syllabusScore || (data.vote_average ? data.vote_average.toFixed(1) : null);\n              const label = syllabusScore ? 'Syllabus Score' : 'TMDB';\n              return displayScore ? (\n                <div className=\"bg-accent/10 border border-accent/20 rounded-xl px-4 py-3 text-center min-w-[90px] flex flex-col justify-center\">\n                  <div className=\"flex items-center justify-center gap-1.5 mb-1\">\n                    <Star size={16} className=\"text-gold fill-gold\" />\n                    <span className=\"text-xl font-black\">{displayScore}</span>\n                    <span className=\"text-white/30 text-xs\">/ 10</span>\n                  </div>\n                  <p className=\"text-[10px] text-white/40 uppercase tracking-wider\">{label}</p>\n                </div>\n              ) : null;\n            })()}\n\n            {/* IMDb — links to IMDb page */}\n            {extRatings?.imdb && (\n              <a href={`https://www.imdb.com/title/${imdbId}/`} target=\"_blank\" rel=\"noopener noreferrer\"\n                className=\"bg-[#f5c518]/[0.08] border border-[#f5c518]/20 rounded-xl px-4 py-3 text-center min-w-[90px] hover:bg-[#f5c518]/[0.15] transition-colors cursor-pointer flex flex-col justify-center\">\n                <p className=\"text-xl font-black text-[#f5c518]\">{extRatings.imdb.score}</p>\n                <p className=\"text-[10px] text-white/30 mt-0.5 flex items-center justify-center gap-1\">IMDb <ExternalLink size={10} /></p>\n                {extRatings.imdb.votes && (\n                  <p className=\"text-[9px] text-white/20\">{extRatings.imdb.votes} votes</p>\n                )}\n              </a>\n            )}\n\n            {/* Rotten Tomatoes — links to RT search */}\n            {extRatings?.rt && (\n              <a href={`https://www.rottentomatoes.com/search?search=${encodeURIComponent(title)}`} target=\"_blank\" rel=\"noopener noreferrer\"\n                className=\"bg-white/[0.04] border border-white/[0.06] rounded-xl px-4 py-3 text-center min-w-[90px] hover:bg-white/[0.08] transition-colors cursor-pointer flex flex-col justify-center\">\n                <p className=\"text-xl font-black\">\n                  <span className={parseInt(extRatings.rt.score) >= 60 ? 'text-red-400' : 'text-green-400'}>\n                    🍅 {extRatings.rt.score}\n                  </span>\n                </p>\n                <p className=\"text-[10px] text-white/30 mt-0.5 flex items-center justify-center gap-1\">Rotten Tomatoes <ExternalLink size={10} /></p>\n              </a>\n            )}\n\n            {/* MAL (anime only) */}\n            {isAnime && malData?.score && (\n              <a href={malData.url} target=\"_blank\" rel=\"noopener noreferrer\"\n                className=\"bg-[#2e51a2]/10 border border-[#2e51a2]/20 rounded-xl px-4 py-3 text-center min-w-[90px] hover:bg-[#2e51a2]/20 transition-colors flex flex-col justify-center\">\n                <p className=\"text-xl font-black text-[#2e51a2]\">{malData.score}</p>\n                <p className=\"text-[10px] text-white/30 mt-0.5 flex items-center justify-center gap-1\">MAL <ExternalLink size={10} /></p>\n                {malData.scored_by && (\n                  <p className=\"text-[9px] text-white/20\">{malData.scored_by.toLocaleString()} votes</p>\n                )}\n              </a>\n            )}\n\n            {/* Crunchyroll (anime only) */}\n            {isAnime && (\n              <a href={`https://www.crunchyroll.com/search?q=${encodeURIComponent(title)}`} target=\"_blank\" rel=\"noopener noreferrer\"\n                className=\"bg-[#f47521]/10 border border-[#f47521]/20 rounded-xl px-4 py-3 text-center min-w-[90px] hover:bg-[#f47521]/20 transition-colors flex flex-col justify-center\">\n                <p className=\"text-xl font-black text-[#f47521]\">CR</p>\n                <p className=\"text-[10px] text-white/30 mt-0.5 flex items-center justify-center gap-1\">Crunchyroll <ExternalLink size={10} /></p>\n              </a>\n            )}\n\n            {/* Loading shimmer — only while actually loading, not after failure */}\n            {!ratingsLoaded && data.external_ids?.imdb_id && (\n              <div className=\"bg-white/[0.02] border border-white/[0.04] rounded-xl px-4 py-3 text-center min-w-[90px] animate-pulse flex flex-col justify-center\">\n                <div className=\"h-5 w-12 bg-dark-600 rounded mx-auto mb-1\" />\n                <div className=\"h-2 w-8 bg-dark-600 rounded mx-auto\" />\n              </div>\n            )}\n          </div>\n\n          <p className=\"text-white/60 leading-relaxed mb-6 max-w-2xl\">{data.overview}</p>\n\n          {/* ── Quick Facts card (mobile only) ── */}\n          <div className=\"md:hidden mb-6\">\n            {quickFactsCard}\n          </div>\n\n          {/* ── Trailer ── */}\n          {trailer && (\n            <div className=\"mb-8\">\n              <h3 className=\"text-sm font-semibold text-white/60 mb-3 uppercase tracking-wider flex items-center gap-2\">\n                <Play size={14} /> Trailer\n              </h3>\n              <div className=\"relative w-full max-w-2xl aspect-video rounded-xl overflow-hidden border border-white/[0.06] bg-dark-700\">\n                <iframe\n                  src={`https://www.youtube.com/embed/${trailer.key}?rel=0&modestbranding=1`}\n                  title={trailer.name}\n                  allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n                  allowFullScreen\n                  className=\"absolute inset-0 w-full h-full\"\n                />\n              </div>\n              <p className=\"text-[10px] text-white/20 mt-2\">{trailer.name}</p>\n            </div>\n          )}\n\n          {/* ── Cast ── */}\n          {data.credits?.cast?.length > 0 && (\n            <div className=\"mb-8\">\n              <h3 className=\"text-sm font-semibold text-white/60 mb-3 uppercase tracking-wider\">Cast</h3>\n              <div className=\"flex gap-3 overflow-x-auto pb-2 scrollbar-hide\">\n                {data.credits.cast.slice(0, 10).map(actor => (\n                  <a\n                    key={actor.id}\n                    href={`https://www.google.com/search?q=${encodeURIComponent(actor.name + ' actor')}`}\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    className=\"flex-shrink-0 w-[90px] group/actor text-center\"\n                  >\n                    {actor.profile_path ? (\n                      <img\n                        src={`${TMDB_PROFILE}${actor.profile_path}`}\n                        alt={actor.name}\n                        className=\"w-[90px] h-[90px] rounded-full object-cover border-2 border-white/[0.06] group-hover/actor:border-accent/40 transition-colors\"\n                      />\n                    ) : (\n                      <div className=\"w-[90px] h-[90px] rounded-full bg-dark-600 flex items-center justify-center text-white/20 text-lg font-bold border-2 border-white/[0.06] group-hover/actor:border-accent/40 transition-colors\">\n                        {actor.name?.charAt(0)}\n                      </div>\n                    )}\n                    <p className=\"text-xs font-medium mt-2 truncate group-hover/actor:text-accent transition-colors\">{actor.name}</p>\n                    <p className=\"text-[10px] text-white/30 truncate\">{actor.character}</p>\n                  </a>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {/* ── Where to Watch ── */}\n          {(streamingProviders.length > 0 || rentProviders.length > 0 || buyProviders.length > 0) && (\n            <div className=\"mb-8\">\n              <h3 className=\"text-sm font-semibold text-white/60 mb-3 uppercase tracking-wider\">Where to Watch</h3>\n              <div className=\"space-y-3\">\n                {streamingProviders.length > 0 && (\n                  <div>\n                    <p className=\"text-[10px] text-white/30 mb-1.5 uppercase\">Stream</p>\n                    <div className=\"flex flex-wrap gap-2\">\n                      {streamingProviders.map(p => (\n                        <a key={p.provider_id} href={getProviderUrl(p.provider_name, title, providers?.link)} target=\"_blank\" rel=\"noopener noreferrer\"\n                          className=\"flex items-center gap-2 bg-white/[0.04] border border-white/[0.06] rounded-lg px-3 py-2 hover:bg-white/[0.08] transition-colors\">\n                          {p.logo_path && <img src={`${TMDB_LOGO}${p.logo_path}`} alt=\"\" className=\"w-6 h-6 rounded object-cover\" />}\n                          <span className=\"text-xs font-medium\">{p.provider_name}</span>\n                          <ExternalLink size={11} className=\"text-white/20\" />\n                        </a>\n                      ))}\n                    </div>\n                  </div>\n                )}\n                {rentProviders.length > 0 && (\n                  <div>\n                    <p className=\"text-[10px] text-white/30 mb-1.5 uppercase\">Rent</p>\n                    <div className=\"flex flex-wrap gap-2\">\n                      {rentProviders.slice(0, 6).map(p => (\n                        <a key={p.provider_id} href={getProviderUrl(p.provider_name, title, providers?.link)} target=\"_blank\" rel=\"noopener noreferrer\"\n                          className=\"flex items-center gap-2 bg-white/[0.04] border border-white/[0.06] rounded-lg px-3 py-2 hover:bg-white/[0.08] transition-colors\">\n                          {p.logo_path && <img src={`${TMDB_LOGO}${p.logo_path}`} alt=\"\" className=\"w-5 h-5 rounded object-cover\" />}\n                          <span className=\"text-xs text-white/60\">{p.provider_name}</span>\n                        </a>\n                      ))}\n                    </div>\n                  </div>\n                )}\n                {buyProviders.length > 0 && (\n                  <div>\n                    <p className=\"text-[10px] text-white/30 mb-1.5 uppercase\">Buy</p>\n                    <div className=\"flex flex-wrap gap-2\">\n                      {buyProviders.slice(0, 6).map(p => (\n                        <a key={p.provider_id} href={getProviderUrl(p.provider_name, title, providers?.link)} target=\"_blank\" rel=\"noopener noreferrer\"\n                          className=\"flex items-center gap-2 bg-white/[0.04] border border-white/[0.06] rounded-lg px-3 py-2 hover:bg-white/[0.08] transition-colors\">\n                          {p.logo_path && <img src={`${TMDB_LOGO}${p.logo_path}`} alt=\"\" className=\"w-5 h-5 rounded object-cover\" />}\n                          <span className=\"text-xs text-white/60\">{p.provider_name}</span>\n                        </a>\n                      ))}\n                    </div>\n                  </div>\n                )}\n\n              </div>\n            </div>\n          )}\n\n          {/* ── Fun Facts ── */}\n          {(() => {\n            const facts = [];\n            const releaseYear = parseInt((data.release_date || data.first_air_date || '').slice(0, 4));\n            const age = releaseYear ? new Date().getFullYear() - releaseYear : 0;\n\n            // Budget & revenue facts\n            if (data.budget > 0 && data.revenue > 0) {\n              const ratio = (data.revenue / data.budget).toFixed(0);\n              if (data.revenue > data.budget * 10) facts.push(`💰 Made ${ratio}x its budget — earning $${(data.revenue / 1e6).toFixed(0)}M from a $${(data.budget / 1e6).toFixed(0)}M budget.`);\n              else if (data.revenue > data.budget * 3) facts.push(`📈 Earned $${(data.revenue / 1e6).toFixed(0)}M against a $${(data.budget / 1e6).toFixed(0)}M budget — a ${ratio}x return.`);\n              else if (data.revenue < data.budget) facts.push(`📉 Only earned $${(data.revenue / 1e6).toFixed(0)}M against a $${(data.budget / 1e6).toFixed(0)}M budget — a box office underperformer.`);\n            } else if (data.budget > 200e6) {\n              facts.push(`🎬 Had a massive $${(data.budget / 1e6).toFixed(0)}M production budget.`);\n            }\n\n            // Awards\n            if (extRatings?.awards) {\n              const oscars = extRatings.awards.match(/Won (\\d+) Oscar/);\n              const noms = extRatings.awards.match(/Nominated for (\\d+) Oscar/);\n              if (oscars) facts.push(`🏆 Won ${oscars[1]} Academy Award${parseInt(oscars[1]) > 1 ? 's' : ''}.`);\n              else if (noms) facts.push(`🎖️ Nominated for ${noms[1]} Academy Award${parseInt(noms[1]) > 1 ? 's' : ''}.`);\n              else if (extRatings.awards.includes('win')) facts.push(`🏅 ${extRatings.awards}`);\n            }\n\n            // Age & classic status\n            if (age > 50) facts.push(`🕰️ Released ${age} years ago and still beloved — a true classic.`);\n            else if (age > 25) facts.push(`📅 Over ${age} years old and still highly regarded.`);\n            else if (age <= 1 && releaseYear) facts.push(`✨ A brand new release from ${releaseYear}.`);\n\n            // Popularity & votes\n            if (data.vote_count > 20000) facts.push(`🌍 Rated by over ${Math.floor(data.vote_count / 1000)}k people on TMDB — one of the most-reviewed titles.`);\n            else if (data.vote_count > 5000) facts.push(`⭐ Rated by ${data.vote_count.toLocaleString()} users on TMDB.`);\n\n            // Runtime\n            if (data.runtime > 180) facts.push(`⏱️ At ${data.runtime} minutes, this is an epic-length film — bring snacks.`);\n            else if (data.runtime && data.runtime < 90) facts.push(`⚡ At just ${data.runtime} minutes, it's a quick but impactful watch.`);\n\n            // TV-specific\n            if (data.number_of_seasons > 10) facts.push(`📺 A long-running series spanning ${data.number_of_seasons} seasons and ${data.number_of_episodes || 'many'} episodes.`);\n            else if (data.number_of_seasons === 1 && data.status === 'Ended') facts.push(`🎯 A complete story told in just one season — ${data.number_of_episodes || 'a few'} episodes.`);\n            if (data.number_of_episodes > 500) facts.push(`📊 Over ${data.number_of_episodes} episodes have aired!`);\n\n            // Language / country\n            if (data.original_language && data.original_language !== 'en') {\n              const langNames = { ja: 'Japanese', ko: 'Korean', fr: 'French', es: 'Spanish', de: 'German', it: 'Italian', pt: 'Portuguese', zh: 'Chinese', hi: 'Hindi', ar: 'Arabic', ru: 'Russian', sv: 'Swedish', da: 'Danish', th: 'Thai', tl: 'Tagalog', pl: 'Polish', nl: 'Dutch', tr: 'Turkish' };\n              const lang = langNames[data.original_language] || data.original_language.toUpperCase();\n              facts.push(`🌐 Originally produced in ${lang}.`);\n            }\n\n            // Production companies\n            if (data.production_companies?.length > 3) facts.push(`🏢 A joint production between ${data.production_companies.length} studios.`);\n\n            return facts.length > 0 ? (\n              <div className=\"mb-8\">\n                <h3 className=\"text-sm font-semibold text-white/60 mb-3 uppercase tracking-wider flex items-center gap-2\">\n                  <Lightbulb size={14} className=\"text-gold\" /> Fun Facts\n                </h3>\n                <div className=\"space-y-2\">\n                  {facts.slice(0, 5).map((fact, i) => (\n                    <div key={i} className=\"flex items-start gap-3 bg-white/[0.03] border border-white/[0.06] rounded-xl px-4 py-3\">\n                      <Sparkles size={14} className=\"text-accent mt-0.5 flex-shrink-0\" />\n                      <p className=\"text-sm text-white/60 leading-relaxed\">{fact}</p>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            ) : null;\n          })()}\n\n          <LibraryPanel\n            mediaId={{ tmdb_id: data.id }}\n            addPayload={{\n              tmdb_id: data.id,\n              media_type: mediaType,\n              title: data.title || data.name,\n              poster_path: data.poster_path ? `${TMDB_IMG}${data.poster_path}` : null,\n              overview: data.overview,\n              external_rating: avgScore ? parseFloat(avgScore) : data.vote_average,\n              genres: data.genres?.map(g => g.name).join(', '),\n              release_date: data.release_date || data.first_air_date,\n            }}\n          />\n        </div>\n      </div>\n\n      {/* Recommendations */}\n      {recommendations.length > 0 && (\n        <div className=\"mt-16\">\n          <h2 className=\"text-xl font-bold mb-6\">You Might Also Like</h2>\n          <div className=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-5\">\n            {recommendations.map(r => (\n              <MediaCard key={r.id} item={r} mediaType={mediaType} />\n            ))}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default Details;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  [\n    'path',\n    {\n      d: 'm15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526',\n      key: '1yiouv',\n    },\n  ],\n  ['circle', { cx: '12', cy: '8', r: '6', key: '1vp47v' }],\n];\n\n/**\n * @component @name Award\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtMTUuNDc3IDEyLjg5IDEuNTE1IDguNTI2YS41LjUgMCAwIDEtLjgxLjQ3bC0zLjU4LTIuNjg3YTEgMSAwIDAgMC0xLjE5NyAwbC0zLjU4NiAyLjY4NmEuNS41IDAgMCAxLS44MS0uNDY5bDEuNTE0LTguNTI2IiAvPgogIDxjaXJjbGUgY3g9IjEyIiBjeT0iOCIgcj0iNiIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/award\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Award = createLucideIcon('award', __iconNode);\n\nexport default Award;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M12 7v14', key: '1akyts' }],\n  [\n    'path',\n    {\n      d: 'M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z',\n      key: 'ruj8y',\n    },\n  ],\n];\n\n/**\n * @component @name BookOpen\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTIgN3YxNCIgLz4KICA8cGF0aCBkPSJNMyAxOGExIDEgMCAwIDEtMS0xVjRhMSAxIDAgMCAxIDEtMWg1YTQgNCAwIDAgMSA0IDQgNCA0IDAgMCAxIDQtNGg1YTEgMSAwIDAgMSAxIDF2MTNhMSAxIDAgMCAxLTEgMWgtNmEzIDMgMCAwIDAtMyAzIDMgMyAwIDAgMC0zLTN6IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/book-open\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst BookOpen = createLucideIcon('book-open', __iconNode);\n\nexport default BookOpen;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [['path', { d: 'M20 6 9 17l-5-5', key: '1gmf2c' }]];\n\n/**\n * @component @name Check\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjAgNiA5IDE3bC01LTUiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/check\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Check = createLucideIcon('check', __iconNode);\n\nexport default Check;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [['path', { d: 'm15 18-6-6 6-6', key: '1wnfg3' }]];\n\n/**\n * @component @name ChevronLeft\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtMTUgMTgtNi02IDYtNiIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/chevron-left\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ChevronLeft = createLucideIcon('chevron-left', __iconNode);\n\nexport default ChevronLeft;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M12 6v6l4 2', key: 'mmk7yg' }],\n  ['circle', { cx: '12', cy: '12', r: '10', key: '1mglay' }],\n];\n\n/**\n * @component @name Clock\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTIgNnY2bDQgMiIgLz4KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMCIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/clock\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Clock = createLucideIcon('clock', __iconNode);\n\nexport default Clock;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  [\n    'path',\n    {\n      d: 'M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0',\n      key: '1nclc0',\n    },\n  ],\n  ['circle', { cx: '12', cy: '12', r: '3', key: '1v7zrd' }],\n];\n\n/**\n * @component @name Eye\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMi4wNjIgMTIuMzQ4YTEgMSAwIDAgMSAwLS42OTYgMTAuNzUgMTAuNzUgMCAwIDEgMTkuODc2IDAgMSAxIDAgMCAxIDAgLjY5NiAxMC43NSAxMC43NSAwIDAgMS0xOS44NzYgMCIgLz4KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIzIiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/eye\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Eye = createLucideIcon('eye', __iconNode);\n\nexport default Eye;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['rect', { width: '18', height: '18', x: '3', y: '3', rx: '2', key: 'afitv7' }],\n  ['path', { d: 'M7 3v18', key: 'bbkbws' }],\n  ['path', { d: 'M3 7.5h4', key: 'zfgn84' }],\n  ['path', { d: 'M3 12h18', key: '1i2n21' }],\n  ['path', { d: 'M3 16.5h4', key: '1230mu' }],\n  ['path', { d: 'M17 3v18', key: 'in4fa5' }],\n  ['path', { d: 'M17 7.5h4', key: 'myr1c1' }],\n  ['path', { d: 'M17 16.5h4', key: 'go4c1d' }],\n];\n\n/**\n * @component @name Film\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cmVjdCB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHg9IjMiIHk9IjMiIHJ4PSIyIiAvPgogIDxwYXRoIGQ9Ik03IDN2MTgiIC8+CiAgPHBhdGggZD0iTTMgNy41aDQiIC8+CiAgPHBhdGggZD0iTTMgMTJoMTgiIC8+CiAgPHBhdGggZD0iTTMgMTYuNWg0IiAvPgogIDxwYXRoIGQ9Ik0xNyAzdjE4IiAvPgogIDxwYXRoIGQ9Ik0xNyA3LjVoNCIgLz4KICA8cGF0aCBkPSJNMTcgMTYuNWg0IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/film\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Film = createLucideIcon('film', __iconNode);\n\nexport default Film;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  [\n    'path',\n    {\n      d: 'M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z',\n      key: '10ikf1',\n    },\n  ],\n];\n\n/**\n * @component @name Play\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNNSA1YTIgMiAwIDAgMSAzLjAwOC0xLjcyOGwxMS45OTcgNi45OThhMiAyIDAgMCAxIC4wMDMgMy40NThsLTEyIDdBMiAyIDAgMCAxIDUgMTl6IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/play\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Play = createLucideIcon('play', __iconNode);\n\nexport default Play;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M5 12h14', key: '1ays0h' }],\n  ['path', { d: 'M12 5v14', key: 's699le' }],\n];\n\n/**\n * @component @name Plus\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNNSAxMmgxNCIgLz4KICA8cGF0aCBkPSJNMTIgNXYxNCIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/plus\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Plus = createLucideIcon('plus', __iconNode);\n\nexport default Plus;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  [\n    'path',\n    {\n      d: 'M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z',\n      key: '1s2grr',\n    },\n  ],\n  ['path', { d: 'M20 2v4', key: '1rf3ol' }],\n  ['path', { d: 'M22 4h-4', key: 'gwowj6' }],\n  ['circle', { cx: '4', cy: '20', r: '2', key: '6kqj1y' }],\n];\n\n/**\n * @component @name Sparkles\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTEuMDE3IDIuODE0YTEgMSAwIDAgMSAxLjk2NiAwbDEuMDUxIDUuNTU4YTIgMiAwIDAgMCAxLjU5NCAxLjU5NGw1LjU1OCAxLjA1MWExIDEgMCAwIDEgMCAxLjk2NmwtNS41NTggMS4wNTFhMiAyIDAgMCAwLTEuNTk0IDEuNTk0bC0xLjA1MSA1LjU1OGExIDEgMCAwIDEtMS45NjYgMGwtMS4wNTEtNS41NThhMiAyIDAgMCAwLTEuNTk0LTEuNTk0bC01LjU1OC0xLjA1MWExIDEgMCAwIDEgMC0xLjk2Nmw1LjU1OC0xLjA1MWEyIDIgMCAwIDAgMS41OTQtMS41OTR6IiAvPgogIDxwYXRoIGQ9Ik0yMCAydjQiIC8+CiAgPHBhdGggZD0iTTIyIDRoLTQiIC8+CiAgPGNpcmNsZSBjeD0iNCIgY3k9IjIwIiByPSIyIiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/sparkles\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Sparkles = createLucideIcon('sparkles', __iconNode);\n\nexport default Sparkles;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M10 11v6', key: 'nco0om' }],\n  ['path', { d: 'M14 11v6', key: 'outv1u' }],\n  ['path', { d: 'M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6', key: 'miytrc' }],\n  ['path', { d: 'M3 6h18', key: 'd0wm0j' }],\n  ['path', { d: 'M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2', key: 'e791ji' }],\n];\n\n/**\n * @component @name Trash2\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTAgMTF2NiIgLz4KICA8cGF0aCBkPSJNMTQgMTF2NiIgLz4KICA8cGF0aCBkPSJNMTkgNnYxNGEyIDIgMCAwIDEtMiAySDdhMiAyIDAgMCAxLTItMlY2IiAvPgogIDxwYXRoIGQ9Ik0zIDZoMTgiIC8+CiAgPHBhdGggZD0iTTggNlY0YTIgMiAwIDAgMSAyLTJoNGEyIDIgMCAwIDEgMiAydjIiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/trash-2\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Trash2 = createLucideIcon('trash-2', __iconNode);\n\nexport default Trash2;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2', key: '1yyitq' }],\n  ['path', { d: 'M16 3.128a4 4 0 0 1 0 7.744', key: '16gr8j' }],\n  ['path', { d: 'M22 21v-2a4 4 0 0 0-3-3.87', key: 'kshegd' }],\n  ['circle', { cx: '9', cy: '7', r: '4', key: 'nufk8' }],\n];\n\n/**\n * @component @name Users\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTYgMjF2LTJhNCA0IDAgMCAwLTQtNEg2YTQgNCAwIDAgMC00IDR2MiIgLz4KICA8cGF0aCBkPSJNMTYgMy4xMjhhNCA0IDAgMCAxIDAgNy43NDQiIC8+CiAgPHBhdGggZD0iTTIyIDIxdi0yYTQgNCAwIDAgMC0zLTMuODciIC8+CiAgPGNpcmNsZSBjeD0iOSIgY3k9IjciIHI9IjQiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/users\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Users = createLucideIcon('users', __iconNode);\n\nexport default Users;\n"],"names":["MediaCard","_ref","_ref2","_ref3","_item$unified_rating","item","mediaType","navigate","useNavigate","user","useAuth","toast","useToast","title","name","poster","poster_path","startsWith","concat","year","release_date","first_air_date","first_publish_year","toString","slice","type","media_type","storedScore","getSyllabusScore","id","rating","unified_rating","vote_average","imgBroken","setImgBroken","useState","_jsxs","className","onClick","handleClick","_item$key","workKey","key","replace","tmdb_id","children","_jsx","src","alt","loading","onError","onLoad","e","target","naturalWidth","Star","size","Number","toFixed","async","stopPropagation","addToLibrary","openlibrary_key","overview","external_rating","genres","genre_ids","join","err","message","Plus","author","React","ExternalLink","createLucideIcon","d","BookCopy","BookMarked","ShoppingCart","cx","cy","r","Lightbulb","DollarSign","x1","x2","y1","y2","Globe","TMDB_IMG","TMDB_LOGO","TMDB_PROFILE","PROVIDER_URLS","encodeURIComponent","getProviderUrl","providerName","fallbackLink","urlFn","Object","entries","toLowerCase","includes","LibraryPanel","mediaId","addPayload","libItem","setLibItem","setLoading","saving","setSaving","status","setStatus","setRating","review","setReview","expanded","setExpanded","stableKey","useEffect","cancelled","getLibraryItemByMediaId","user_rating","console","error","lookup","Check","removeFromLibrary","_unused2","Trash2","icon","Clock","label","active","Eye","CheckCircle2","map","s","newStatus","updateLibraryItem","prev","_objectSpread","want","watching","finished","logActivity","action","media_id","poster_url","catch","_unused","handleStatusChange","min","max","step","value","onChange","parseFloat","val","getRatingLabel","n","placeholder","rows","updated","disabled","cls","newItem","chosenStatus","handleAdd","BookDetails","_data$authors","_data$description","data","setData","result","getBookDetails","load","totalReaders","want_to_read","currently_reading","already_read","searchQ","coverBroken","setCoverBroken","ChevronLeft","strokeWidth","BookOpen","authors","length","i","_author$name","href","rel","photo","charAt","first_publish_date","edition_count","ratings_count","toLocaleString","Users","description","subjects","_data$subjects","_data$subjects2","_data$authors2","facts","push","Math","floor","yearMatch","match","age","Date","getFullYear","parseInt","some","fact","Sparkles","MovieTVDetails","_data$genres","_data$genres2","_data$recommendations","_data$recommendations2","_data$external_ids","_data$credits","_data$watchProviders","_data$production_comp","_data$external_ids2","_data$external_ids3","_data$credits2","_data$credits2$cast","_data$genres3","extRatings","setExtRatings","ratingsLoaded","setRatingsLoaded","malData","setMalData","_result$external_ids","_result$genres","fetcher","getMovieDetails","getTVDetails","imdbId","external_ids","imdb_id","resultTitle","getOMDbRatings","Promise","resolve","setTimeout","fetchRatings","then","original_language","g","getMALRating","isAnime","avgScore","computeUnifiedRating","setSyllabusScore","recommendations","results","crew","credits","directors","filter","c","job","writers","department","trailer","_data$videos","vids","videos","v","site","find","wpData","providers","AU","US","streamingProviders","flatrate","rentProviders","rent","buyProviders","buy","quickFactsCard","tagline","_d$name","profile_path","w","_w$name","rated","Film","awards","Award","boxOffice","budget","revenue","country","production_companies","Info","backdrop_path","runtime","number_of_seasons","syllabusScore","displayScore","imdb","score","votes","rt","url","scored_by","Play","allow","allowFullScreen","cast","actor","_actor$name","character","p","provider_name","link","logo_path","provider_id","_data$production_comp2","releaseYear","ratio","oscars","noms","vote_count","number_of_episodes","lang","ja","ko","fr","es","de","it","pt","zh","hi","ar","ru","sv","da","th","tl","pl","nl","tr","toUpperCase","useParams","width","height","x","y","rx"],"sourceRoot":""}