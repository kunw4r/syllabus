{"version":3,"file":"static/js/939.9cf74dab.chunk.js","mappings":";kNASA,SAASA,EAASC,GAAiC,IAADC,EAAAC,EAAAC,EAAA,IAA/B,KAAEC,EAAI,UAAEC,EAAY,SAASL,EAC9C,MAAMM,GAAWC,EAAAA,EAAAA,OACX,KAAEC,IAASC,EAAAA,EAAAA,KACXC,GAAQC,EAAAA,EAAAA,KAERC,EAAQR,EAAKQ,OAASR,EAAKS,KAC3BC,EAASV,EAAKW,YACfX,EAAKW,YAAYC,WAAW,QAAUZ,EAAKW,YAAW,GAAAE,OAT5C,mCAS0DA,OAAGb,EAAKW,aAC7E,KACEG,GAAQd,EAAKe,cAAgBf,EAAKgB,gBAAkBhB,EAAKiB,oBAAsB,IAAIC,WAAWC,MAAM,EAAG,GACvGC,EAAOpB,EAAKqB,YAAcpB,EAG1BqB,EAAuB,SAATF,GAAkBG,EAAAA,EAAAA,IAAiBH,EAAMpB,EAAKwB,IAAM,KAClEC,EAAgE,QAA1D5B,EAAqC,QAArCC,EAAsB,QAAtBC,EAAGC,EAAK0B,sBAAc,IAAA3B,EAAAA,EAAIuB,SAAW,IAAAxB,EAAAA,EAAIE,EAAK2B,oBAAY,IAAA9B,EAAAA,EAAIG,EAAKyB,OAiC/E,OACEG,EAAAA,EAAAA,MAAA,OACEC,UAAU,yNACVC,QAlCgBC,KAClB,GAAa,SAATX,EAAiB,CAAC,IAADY,EACnB,MAAMC,GAAkB,QAARD,EAAAhC,EAAKkC,WAAG,IAAAF,OAAA,EAARA,EAAUG,QAAQ,UAAW,MAAO,GAEpD,YADIF,GAAS/B,EAAS,iBAADW,OAAkBoB,IAEzC,CACA,MAAMT,EAAKxB,EAAKwB,IAAMxB,EAAKoC,QAC3BlC,EAAS,YAADW,OAAaO,EAAI,KAAAP,OAAIW,KA2BNa,SAAA,CAEpB3B,GACC4B,EAAAA,EAAAA,KAAA,OAAKC,IAAK7B,EAAQ8B,IAAKhC,EAAOiC,QAAQ,OAAOZ,UAAU,sCAEvDS,EAAAA,EAAAA,KAAA,OAAKT,UAAU,yGAAwGQ,SACpH7B,IAIJiB,EAAS,IACRG,EAAAA,EAAAA,MAAA,OAAKC,UAAU,yHAAwHQ,SAAA,EACrIC,EAAAA,EAAAA,KAACI,EAAAA,EAAI,CAACC,KAAM,GAAId,UAAU,wBACzBe,OAAOnB,GAAQoB,QAAQ,OAI5BP,EAAAA,EAAAA,KAAA,UACER,QA1CYgB,UAEhB,GADAC,EAAEC,mBACG5C,EAAM,OAAOE,EAAM,sBAAuB,SAC/C,UACQ2C,EAAAA,EAAAA,IAAa,CACjBb,QAAkB,SAAThB,EAAkBpB,EAAKwB,GAAK,KACrC0B,gBAA0B,SAAT9B,EAAkBpB,EAAKkC,IAAM,KAC9Cb,WAAYD,EACZZ,QACAG,YAAaD,EACbyC,SAAUnD,EAAKmD,UAAY,GAC3BC,gBAAiB3B,GAAU,KAC3B4B,OAAQrD,EAAKsD,UAAYtD,EAAKsD,UAAUC,KAAK,KAAO,GACpDxC,aAAcf,EAAKe,cAAgBf,EAAKgB,gBAAkB,KAE5DV,EAAM,UAADO,OAAWL,EAAK,sBAAsB,UAC7C,CAAE,MAAOgD,GACPlD,EAAuB,6BAAd,OAAHkD,QAAG,IAAHA,OAAG,EAAHA,EAAKC,SAAqC,IAAA5C,OAAOL,EAAK,gCAAiC,2BAA4B,QAC3H,GAyBIA,MAAM,iBACNqB,UAAU,2NAA0NQ,UAEpOC,EAAAA,EAAAA,KAACoB,EAAAA,EAAI,CAACf,KAAM,QAGdf,EAAAA,EAAAA,MAAA,OAAKC,UAAU,MAAKQ,SAAA,EAClBC,EAAAA,EAAAA,KAAA,KAAGT,UAAU,iCAAgCQ,SAAE7B,KAC/CoB,EAAAA,EAAAA,MAAA,KAAGC,UAAU,6BAA4BQ,SAAA,CACtCvB,EAAe,SAATM,GAAmBpB,EAAK2D,OAAM,SAAA9C,OAASb,EAAK2D,QAAW,WAKxE,CAEA,QAAeC,EAAAA,KAAWjE,E,uDC3FnB,MAaDkE,GAAeC,E,QAAAA,GAAiB,gBAbF,CAAC,CAAC,OAAQ,CAAEC,EAAG,gBAAiB7B,IAAK,a,aCAzE,SAAS8B,EAASpE,GAAuC,IAAtC,MAAEY,EAAK,SAAE6B,EAAQ,UAAER,EAAY,IAAIjC,EACpD,MAAMqE,GAAMC,EAAAA,EAAAA,QAAO,MACbC,EAAUJ,IAAC,IAAAK,EAAA,OAAgB,QAAhBA,EAAKH,EAAII,eAAO,IAAAD,OAAA,EAAXA,EAAaE,SAAS,CAAEC,KAAU,IAAJR,EAASS,SAAU,YAEvE,OACE5C,EAAAA,EAAAA,MAAA,OAAKC,UAAS,2BAAAhB,OAA6BgB,GAAYQ,SAAA,EACrDC,EAAAA,EAAAA,KAAA,MAAIT,UAAU,uEAAsEQ,SAAE7B,KACtFoB,EAAAA,EAAAA,MAAA,OAAKC,UAAU,mBAAkBQ,SAAA,EAC/BC,EAAAA,EAAAA,KAAA,UACER,QAASA,IAAMqC,GAAQ,GACvBtC,UAAU,6LAA4LQ,UAEtMC,EAAAA,EAAAA,KAACmC,EAAAA,EAAW,CAAC9B,KAAM,QAErBL,EAAAA,EAAAA,KAAA,OAAK2B,IAAKA,EAAKpC,UAAU,4GAA2GQ,SACjIA,KAEHC,EAAAA,EAAAA,KAAA,UACER,QAASA,IAAMqC,EAAO,GACtBtC,UAAU,8LAA6LQ,UAEvMC,EAAAA,EAAAA,KAACuB,EAAY,CAAClB,KAAM,YAK9B,CAEA,QAAeiB,EAAAA,KAAWI,E,8DC7BX,SAASU,IACtB,OACE9C,EAAAA,EAAAA,MAAA,OAAKC,UAAU,qDAAoDQ,SAAA,EACjEC,EAAAA,EAAAA,KAAA,OAAKT,UAAU,qDACfS,EAAAA,EAAAA,KAAA,OAAKT,UAAU,wCACfS,EAAAA,EAAAA,KAAA,OAAKT,UAAU,oCAGrB,CAEO,SAAS8C,EAAW/E,GAAa,IAAZ,MAAEY,GAAOZ,EACnC,OACEgC,EAAAA,EAAAA,MAAA,OAAKC,UAAU,OAAMQ,SAAA,CAClB7B,IAAS8B,EAAAA,EAAAA,KAAA,OAAKT,UAAU,qDACzBS,EAAAA,EAAAA,KAAA,OAAKT,UAAU,6BAA4BQ,SACxCuC,MAAMC,KAAK,CAAEC,OAAQ,IAAKC,IAAI,CAACC,EAAGC,KACjC3C,EAAAA,EAAAA,KAACoC,EAAY,GAAMO,QAK7B,CAEO,SAASC,IACd,OACE5C,EAAAA,EAAAA,KAAA,OAAKT,UAAU,0FAAyFQ,UACtGT,EAAAA,EAAAA,MAAA,OAAKC,UAAU,wDAAuDQ,SAAA,EACpEC,EAAAA,EAAAA,KAAA,OAAKT,UAAU,mCACfS,EAAAA,EAAAA,KAAA,OAAKT,UAAU,mCACfS,EAAAA,EAAAA,KAAA,OAAKT,UAAU,sCAIvB,C,uFChCO,MAqBDsD,GAAOrB,E,QAAAA,GAAiB,OArBM,CAClC,CACE,OACA,CACEC,EAAG,yFACH7B,IAAK,a,+DCDX,MAAMkD,EAAW,CACf,CAAElD,IAAK,UAAWzB,KAAM,WACxB,CAAEyB,IAAK,mBAAoBzB,KAAM,oBACjC,CAAEyB,IAAK,kBAAmBzB,KAAM,mBAChC,CAAEyB,IAAK,UAAWzB,KAAM,WACxB,CAAEyB,IAAK,UAAWzB,KAAM,sBACxB,CAAEyB,IAAK,UAAWzB,KAAM,WACxB,CAAEyB,IAAK,SAAUzB,KAAM,UACvB,CAAEyB,IAAK,YAAazB,KAAM,sBAC1B,CAAEyB,IAAK,UAAWzB,KAAM,WACxB,CAAEyB,IAAK,UAAWzB,KAAM,WACxB,CAAEyB,IAAK,aAAczB,KAAM,cAC3B,CAAEyB,IAAK,YAAazB,KAAM,aAC1B,CAAEyB,IAAK,WAAYzB,KAAM,sBACzB,CAAEyB,IAAK,SAAUzB,KAAM,UACvB,CAAEyB,IAAK,SAAUzB,KAAM,2BACvB,CAAEyB,IAAK,aAAczB,KAAM,cAC3B,CAAEyB,IAAK,sBAAuBzB,KAAM,eACpC,CAAEyB,IAAK,WAAYzB,KAAM,oBACzB,CAAEyB,IAAK,UAAWzB,KAAM,kBACxB,CAAEyB,IAAK,MAAOzB,KAAM,iBAgJtB,QA7IA,WACE,MAAO4E,EAAUC,IAAeC,EAAAA,EAAAA,UAAS,KAClCC,EAAaC,IAAkBF,EAAAA,EAAAA,UAAS,CAAC,IACzCG,EAAgBC,IAAqBJ,EAAAA,EAAAA,UAAS,IAAIK,MAClDC,EAASC,IAAcP,EAAAA,EAAAA,UAAS,OAChCQ,EAAOC,IAAYT,EAAAA,EAAAA,UAAS,KAC5BU,EAAYC,IAAiBX,EAAAA,EAAAA,WAAS,IAG7CY,EAAAA,EAAAA,WAAU,MACRrD,iBACE,MAAOsD,KAAMC,SAAwBC,QAAQC,IAAI,EAC/CC,EAAAA,EAAAA,SACGpB,EAASjE,MAAM,EAAG,GAAG4D,IAAI0B,IAAKC,EAAAA,EAAAA,IAAkBD,EAAEvE,QAEvDoD,EAAYc,GACZF,GAAc,GACd,MAAMS,EAAK,CAAC,EACZvB,EAASjE,MAAM,EAAG,GAAGyF,QAAQ,CAACH,EAAGxB,KAAQ0B,EAAGF,EAAEvE,KAAOmE,EAAepB,KACpEQ,EAAekB,GACfhB,EAAkB,IAAIC,IAAIR,EAASjE,MAAM,EAAG,GAAG4D,IAAI0B,GAAKA,EAAEvE,MAC5D,CACA2E,IACC,IAGH,MAAMC,GAAcC,EAAAA,EAAAA,aAAYjE,UAC9B,GAAI4C,EAAesB,IAAI9E,GAAM,OAC7ByD,EAAkBsB,GAAQ,IAAIrB,IAAI,IAAIqB,EAAM/E,KAC5C,MAAMgF,QAAaR,EAAAA,EAAAA,IAAkBxE,GACrCuD,EAAewB,IAAIE,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAUF,GAAI,IAAE,CAAC/E,GAAMgF,MACzC,CAACxB,IAEE0B,GAAcL,EAAAA,EAAAA,aAAaM,IAC/B,IAAKA,EAAM,OACX,MAAMC,EAAW,IAAIC,qBAAqB3H,IAAc,IAAZ4H,GAAM5H,EAChD,GAAI4H,EAAMC,eAAgB,CACxB,MAAMvF,EAAMmF,EAAKK,QAAQC,QACrBzF,GAAK4E,EAAY5E,GACrBoF,EAASM,YACX,GACC,CAAEC,WAAY,UACjBP,EAASQ,QAAQT,IAChB,CAACP,IAWEiB,EAAO1C,EAAS,GAEtB,OACEzD,EAAAA,EAAAA,MAAA,OAAKC,UAAU,UAASQ,SAAA,EAEtBT,EAAAA,EAAAA,MAAA,QAAMoG,SAdWlF,UAEnB,GADAC,EAAEkF,kBACGlC,EAAMmC,OAAQ,OACnB,MAAMhB,QAAaiB,EAAAA,EAAAA,IAAYpC,GAC/BD,EAAWoB,IAUqBrF,UAAU,+BAA8BQ,SAAA,EACpET,EAAAA,EAAAA,MAAA,OAAKC,UAAU,2BAA0BQ,SAAA,EACvCC,EAAAA,EAAAA,KAAC8F,EAAAA,EAAM,CAACzF,KAAM,GAAId,UAAU,4DAC5BS,EAAAA,EAAAA,KAAA,SAAO+F,MAAOtC,EAAOuC,SAAUvF,GAAKiD,EAASjD,EAAEwF,OAAOF,OAAQG,YAAY,mCACxE3G,UAAU,qLAEdD,EAAAA,EAAAA,MAAA,UAAQR,KAAK,SAASS,UAAU,kIAAiIQ,SAAA,EAC/JC,EAAAA,EAAAA,KAAC8F,EAAAA,EAAM,CAACzF,KAAM,KAAM,aAErBkD,IAAWvD,EAAAA,EAAAA,KAAA,UAAQlB,KAAK,SAASU,QAhBpB2G,KAAQ3C,EAAW,MAAOE,EAAS,KAgBOnE,UAAU,iCAAgCQ,UAACC,EAAAA,EAAAA,KAACoG,EAAAA,EAAC,CAAC/F,KAAM,UAG7GkD,GACCjE,EAAAA,EAAAA,MAAA+G,EAAAA,SAAA,CAAAtG,SAAA,EACET,EAAAA,EAAAA,MAAA,MAAIC,UAAU,6BAA4BQ,SAAA,CAAC,qBAAoB0D,EAAM,aACrEzD,EAAAA,EAAAA,KAAA,OAAKT,UAAU,sEAAqEQ,SACjFwD,EAAQd,IAAI,CAAC6D,EAAG3D,KAAM3C,EAAAA,EAAAA,KAAC3C,EAAAA,EAAS,CAAkBK,KAAM4I,EAAG3I,UAAU,QAA/B2I,EAAE1G,KAAO+C,MAE9B,IAAnBY,EAAQf,SACPlD,EAAAA,EAAAA,MAAA,OAAKC,UAAU,kCAAiCQ,SAAA,EAC9CC,EAAAA,EAAAA,KAAA,MAAIT,UAAU,yCAAwCQ,SAAC,oBACvDC,EAAAA,EAAAA,KAAA,KAAGT,UAAU,UAASQ,SAAC,+CAK7BT,EAAAA,EAAAA,MAAA+G,EAAAA,SAAA,CAAAtG,SAAA,CAEG4D,GAAc8B,IACbnG,EAAAA,EAAAA,MAAA,OAAKC,UAAU,2KAA0KQ,SAAA,EACvLC,EAAAA,EAAAA,KAAA,OAAKT,UAAU,oFACfS,EAAAA,EAAAA,KAAA,OAAKT,UAAU,kCAAiCQ,UAC9CT,EAAAA,EAAAA,MAAA,OAAKC,UAAU,0CAAyCQ,SAAA,CACrD0F,EAAKpH,cACJ2B,EAAAA,EAAAA,KAAA,OAAKC,IAAKwF,EAAKpH,YAAa6B,IAAKuF,EAAKvH,MAAOqB,UAAU,qEAEzDD,EAAAA,EAAAA,MAAA,OAAKC,UAAU,eAAcQ,SAAA,EAC3BT,EAAAA,EAAAA,MAAA,OAAKC,UAAU,iEAAgEQ,SAAA,EAC7EC,EAAAA,EAAAA,KAAC6C,EAAI,CAACxC,KAAM,KAAM,wBAEpBL,EAAAA,EAAAA,KAAA,MAAIT,UAAU,6EAA4EQ,SAAE0F,EAAKvH,SACjGoB,EAAAA,EAAAA,MAAA,KAAGC,UAAU,6BAA4BQ,SAAA,CAAC,MAAI0F,EAAKpE,WACnD/B,EAAAA,EAAAA,MAAA,OAAKC,UAAU,gDAA+CQ,SAAA,CAC3D0F,EAAKtG,SAAUG,EAAAA,EAAAA,MAAA,QAAMC,UAAU,oCAAmCQ,SAAA,EAACC,EAAAA,EAAAA,KAACI,EAAAA,EAAI,CAACC,KAAM,GAAId,UAAU,cAAc,IAAEkG,EAAKtG,UAClHsG,EAAK9G,qBAAsBqB,EAAAA,EAAAA,KAAA,QAAAD,SAAO0F,EAAK9G,mCASnDoE,EAASP,OAAS,IACjBxC,EAAAA,EAAAA,KAAC0B,EAAAA,EAAS,CAACxD,MAAM,eAAc6B,SAC5BgD,EAASN,IAAI,CAAC6D,EAAG3D,KAAM3C,EAAAA,EAAAA,KAAA,OAAsBT,UAAU,0BAAyBQ,UAACC,EAAAA,EAAAA,KAAC3C,EAAAA,EAAS,CAACK,KAAM4I,EAAG3I,UAAU,UAA9E2I,EAAE1G,KAAO+C,MAK9CG,EAASL,IAAI0B,IACZ,MAAMoC,EAAQrD,EAAYiB,EAAEvE,KACtB4G,EAASpD,EAAesB,IAAIP,EAAEvE,KAEpC,OACEI,EAAAA,EAAAA,KAAA,OAAiB2B,IAAK6E,OAASC,EAAY3B,EAAa,eAAcX,EAAEvE,IAAIG,SACxEyG,GAEO,OAALD,QAAK,IAALA,OAAK,EAALA,EAAO/D,QAAS,GAClBxC,EAAAA,EAAAA,KAAC0B,EAAAA,EAAS,CAACxD,MAAOiG,EAAEhG,KAAK4B,SACtBwG,EAAM9D,IAAI,CAAC6D,EAAG3D,KAAM3C,EAAAA,EAAAA,KAAA,OAAsBT,UAAU,0BAAyBQ,UAACC,EAAAA,EAAAA,KAAC3C,EAAAA,EAAS,CAACK,KAAM4I,EAAG3I,UAAU,UAA9E2I,EAAE1G,KAAO+C,MAExC,MALF3C,EAAAA,EAAAA,KAACqC,EAAAA,GAAW,CAACnE,MAAOiG,EAAEhG,QAFhBgG,EAAEvE,YAe1B,C,+BCtKO,MAaDuC,GAAcX,E,QAAAA,GAAiB,eAbD,CAAC,CAAC,OAAQ,CAAEC,EAAG,iBAAkB7B,IAAK,Y,+BCAnE,MAgBDwB,GAAOI,E,QAAAA,GAAiB,OAhBM,CAClC,CAAC,OAAQ,CAAEC,EAAG,WAAY7B,IAAK,WAC/B,CAAC,OAAQ,CAAE6B,EAAG,WAAY7B,IAAK,Y,+BCF1B,MAgBDkG,GAAStE,E,QAAAA,GAAiB,SAhBI,CAClC,CAAC,OAAQ,CAAEC,EAAG,mBAAoB7B,IAAK,WACvC,CAAC,SAAU,CAAE8G,GAAI,KAAMC,GAAI,KAAMC,EAAG,IAAKhH,IAAK,Y","sources":["components/MediaCard.jsx","../node_modules/lucide-react/src/icons/chevron-right.ts","components/ScrollRow.jsx","components/SkeletonCard.jsx","../node_modules/lucide-react/src/icons/book.ts","pages/Books.jsx","../node_modules/lucide-react/src/icons/chevron-left.ts","../node_modules/lucide-react/src/icons/plus.ts","../node_modules/lucide-react/src/icons/search.ts"],"sourcesContent":["import React from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { Plus, Star } from 'lucide-react';\nimport { addToLibrary, getSyllabusScore } from '../services/api';\nimport { useAuth } from '../context/AuthContext';\nimport { useToast } from '../context/ToastContext';\n\nconst TMDB_IMG = 'https://image.tmdb.org/t/p/w342';\n\nfunction MediaCard({ item, mediaType = 'movie' }) {\n  const navigate = useNavigate();\n  const { user } = useAuth();\n  const toast = useToast();\n\n  const title = item.title || item.name;\n  const poster = item.poster_path\n    ? (item.poster_path.startsWith('http') ? item.poster_path : `${TMDB_IMG}${item.poster_path}`)\n    : null;\n  const year = (item.release_date || item.first_air_date || item.first_publish_year || '').toString().slice(0, 4);\n  const type = item.media_type || mediaType;\n\n  // Prefer: unified_rating (from enrichment) → stored Syllabus Score → TMDB vote_average → book rating\n  const storedScore = type !== 'book' ? getSyllabusScore(type, item.id) : null;\n  const rating = item.unified_rating ?? storedScore ?? item.vote_average ?? item.rating;\n\n  const handleClick = () => {\n    if (type === 'book') {\n      const workKey = item.key?.replace('/works/', '') || '';\n      if (workKey) navigate(`/details/book/${workKey}`);\n      return;\n    }\n    const id = item.id || item.tmdb_id;\n    navigate(`/details/${type}/${id}`);\n  };\n\n  const handleAdd = async (e) => {\n    e.stopPropagation();\n    if (!user) return toast('Please log in first', 'error');\n    try {\n      await addToLibrary({\n        tmdb_id: type !== 'book' ? item.id : null,\n        openlibrary_key: type === 'book' ? item.key : null,\n        media_type: type,\n        title,\n        poster_path: poster,\n        overview: item.overview || '',\n        external_rating: rating || null,\n        genres: item.genre_ids ? item.genre_ids.join(',') : '',\n        release_date: item.release_date || item.first_air_date || '',\n      });\n      toast(`Added \"${title}\" to your library!`, 'success');\n    } catch (err) {\n      toast(err?.message === 'Already in your library' ? `\"${title}\" is already in your library` : 'Could not add to library', 'error');\n    }\n  };\n\n  return (\n    <div\n      className=\"group relative rounded-2xl overflow-hidden bg-dark-700/50 border border-white/5 cursor-pointer transition-all duration-300 hover:-translate-y-1.5 hover:shadow-[0_8px_30px_rgba(233,69,96,0.12)] hover:border-white/10\"\n      onClick={handleClick}\n    >\n      {poster ? (\n        <img src={poster} alt={title} loading=\"lazy\" className=\"w-full aspect-[2/3] object-cover\" />\n      ) : (\n        <div className=\"w-full aspect-[2/3] bg-dark-600 flex items-center justify-center text-white/30 text-xs p-4 text-center\">\n          {title}\n        </div>\n      )}\n\n      {rating > 0 && (\n        <div className=\"absolute top-3 right-3 bg-black/70 backdrop-blur-md rounded-lg px-2 py-1 flex items-center gap-1 text-xs font-semibold\">\n          <Star size={13} className=\"text-gold fill-gold\" />\n          {Number(rating).toFixed(1)}\n        </div>\n      )}\n\n      <button\n        onClick={handleAdd}\n        title=\"Add to library\"\n        className=\"absolute bottom-16 right-3 w-9 h-9 rounded-full bg-accent text-white flex items-center justify-center opacity-0 scale-75 group-hover:opacity-100 group-hover:scale-100 transition-all duration-200 hover:bg-accent-hover\"\n      >\n        <Plus size={18} />\n      </button>\n\n      <div className=\"p-3\">\n        <p className=\"text-sm font-semibold truncate\">{title}</p>\n        <p className=\"text-xs text-white/40 mt-1\">\n          {year}{type === 'book' && item.author ? ` · ${item.author}` : ''}\n        </p>\n      </div>\n    </div>\n  );\n}\n\nexport default React.memo(MediaCard);\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [['path', { d: 'm9 18 6-6-6-6', key: 'mthhwq' }]];\n\n/**\n * @component @name ChevronRight\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtOSAxOCA2LTYtNi02IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/chevron-right\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ChevronRight = createLucideIcon('chevron-right', __iconNode);\n\nexport default ChevronRight;\n","import React, { useRef } from 'react';\nimport { ChevronLeft, ChevronRight } from 'lucide-react';\n\nfunction ScrollRow({ title, children, className = '' }) {\n  const ref = useRef(null);\n  const scroll = (d) => ref.current?.scrollBy({ left: d * 400, behavior: 'smooth' });\n\n  return (\n    <div className={`mb-10 group/row min-w-0 ${className}`}>\n      <h2 className=\"text-[15px] font-semibold text-white/80 mb-4 uppercase tracking-wide\">{title}</h2>\n      <div className=\"relative min-w-0\">\n        <button\n          onClick={() => scroll(-1)}\n          className=\"absolute left-0 top-0 bottom-6 z-10 w-10 bg-gradient-to-r from-dark-900 to-transparent opacity-0 group-hover/row:opacity-100 transition-opacity items-center justify-center hidden sm:flex\"\n        >\n          <ChevronLeft size={20} />\n        </button>\n        <div ref={ref} className=\"flex gap-3 overflow-x-auto overflow-y-hidden pb-2 scrollbar-hide scroll-smooth -mx-4 px-4 sm:mx-0 sm:px-0\">\n          {children}\n        </div>\n        <button\n          onClick={() => scroll(1)}\n          className=\"absolute right-0 top-0 bottom-6 z-10 w-10 bg-gradient-to-l from-dark-900 to-transparent opacity-0 group-hover/row:opacity-100 transition-opacity items-center justify-center hidden sm:flex\"\n        >\n          <ChevronRight size={20} />\n        </button>\n      </div>\n    </div>\n  );\n}\n\nexport default React.memo(ScrollRow);\n","import React from 'react';\n\nexport default function SkeletonCard() {\n  return (\n    <div className=\"flex-shrink-0 w-[140px] sm:w-[160px] animate-pulse\">\n      <div className=\"bg-dark-700 rounded-lg aspect-[2/3] w-full mb-2\" />\n      <div className=\"bg-dark-700 rounded h-3 w-3/4 mb-1\" />\n      <div className=\"bg-dark-700 rounded h-3 w-1/2\" />\n    </div>\n  );\n}\n\nexport function SkeletonRow({ title }) {\n  return (\n    <div className=\"mb-8\">\n      {title && <div className=\"bg-dark-700 rounded h-5 w-40 mb-4 animate-pulse\" />}\n      <div className=\"flex gap-4 overflow-hidden\">\n        {Array.from({ length: 8 }).map((_, i) => (\n          <SkeletonCard key={i} />\n        ))}\n      </div>\n    </div>\n  );\n}\n\nexport function SkeletonHero() {\n  return (\n    <div className=\"relative h-[50vh] sm:h-[60vh] rounded-xl overflow-hidden mb-8 animate-pulse bg-dark-700\">\n      <div className=\"absolute bottom-0 left-0 p-6 sm:p-10 space-y-3 w-full\">\n        <div className=\"bg-dark-600 rounded h-8 w-1/3\" />\n        <div className=\"bg-dark-600 rounded h-4 w-2/3\" />\n        <div className=\"bg-dark-600 rounded h-4 w-1/2\" />\n      </div>\n    </div>\n  );\n}\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  [\n    'path',\n    {\n      d: 'M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20',\n      key: 'k3hazp',\n    },\n  ],\n];\n\n/**\n * @component @name Book\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNNCAxOS41di0xNUEyLjUgMi41IDAgMCAxIDYuNSAySDE5YTEgMSAwIDAgMSAxIDF2MThhMSAxIDAgMCAxLTEgMUg2LjVhMSAxIDAgMCAxIDAtNUgyMCIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/book\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Book = createLucideIcon('book', __iconNode);\n\nexport default Book;\n","import React, { useEffect, useState, useCallback } from 'react';\nimport { Search, X, Book, Star } from 'lucide-react';\nimport MediaCard from '../components/MediaCard';\nimport ScrollRow from '../components/ScrollRow';\nimport { SkeletonRow } from '../components/SkeletonCard';\nimport { getTrendingBooks, getBooksBySubject, searchBooks } from '../services/api';\n\nconst SUBJECTS = [\n  { key: 'fiction', name: 'Fiction' },\n  { key: 'literary fiction', name: 'Literary Fiction' },\n  { key: 'science fiction', name: 'Science Fiction' },\n  { key: 'fantasy', name: 'Fantasy' },\n  { key: 'mystery', name: 'Mystery & Thriller' },\n  { key: 'romance', name: 'Romance' },\n  { key: 'horror', name: 'Horror' },\n  { key: 'biography', name: 'Biography & Memoir' },\n  { key: 'history', name: 'History' },\n  { key: 'science', name: 'Science' },\n  { key: 'philosophy', name: 'Philosophy' },\n  { key: 'self-help', name: 'Self-Help' },\n  { key: 'business', name: 'Business & Finance' },\n  { key: 'poetry', name: 'Poetry' },\n  { key: 'comics', name: 'Comics & Graphic Novels' },\n  { key: 'true crime', name: 'True Crime' },\n  { key: 'young adult fiction', name: 'Young Adult' },\n  { key: 'children', name: \"Children's Books\" },\n  { key: 'cooking', name: 'Cooking & Food' },\n  { key: 'art', name: 'Art & Design' },\n];\n\nfunction Books() {\n  const [trending, setTrending] = useState([]);\n  const [subjectData, setSubjectData] = useState({});\n  const [loadedSubjects, setLoadedSubjects] = useState(new Set());\n  const [results, setResults] = useState(null);\n  const [query, setQuery] = useState('');\n  const [heroLoaded, setHeroLoaded] = useState(false);\n\n  // Load trending + first 4 subjects immediately\n  useEffect(() => {\n    async function loadInitial() {\n      const [t, ...initialResults] = await Promise.all([\n        getTrendingBooks(),\n        ...SUBJECTS.slice(0, 4).map(s => getBooksBySubject(s.key)),\n      ]);\n      setTrending(t);\n      setHeroLoaded(true);\n      const sd = {};\n      SUBJECTS.slice(0, 4).forEach((s, i) => { sd[s.key] = initialResults[i]; });\n      setSubjectData(sd);\n      setLoadedSubjects(new Set(SUBJECTS.slice(0, 4).map(s => s.key)));\n    }\n    loadInitial();\n  }, []);\n\n  // Lazy-load remaining subjects\n  const loadSubject = useCallback(async (key) => {\n    if (loadedSubjects.has(key)) return;\n    setLoadedSubjects(prev => new Set([...prev, key]));\n    const data = await getBooksBySubject(key);\n    setSubjectData(prev => ({ ...prev, [key]: data }));\n  }, [loadedSubjects]);\n\n  const observerRef = useCallback((node) => {\n    if (!node) return;\n    const observer = new IntersectionObserver(([entry]) => {\n      if (entry.isIntersecting) {\n        const key = node.dataset.subject;\n        if (key) loadSubject(key);\n        observer.disconnect();\n      }\n    }, { rootMargin: '200px' });\n    observer.observe(node);\n  }, [loadSubject]);\n\n  const handleSearch = async (e) => {\n    e.preventDefault();\n    if (!query.trim()) return;\n    const data = await searchBooks(query);\n    setResults(data);\n  };\n\n  const clearSearch = () => { setResults(null); setQuery(''); };\n\n  const hero = trending[0];\n\n  return (\n    <div className=\"min-w-0\">\n      {/* Search */}\n      <form onSubmit={handleSearch} className=\"flex items-center gap-3 mb-6\">\n        <div className=\"relative flex-1 max-w-md\">\n          <Search size={16} className=\"absolute left-4 top-1/2 -translate-y-1/2 text-white/30\" />\n          <input value={query} onChange={e => setQuery(e.target.value)} placeholder=\"Search books by title, author...\"\n            className=\"w-full bg-white/[0.04] border border-white/[0.08] rounded-xl pl-11 pr-4 py-2.5 text-sm text-white placeholder-white/25 outline-none focus:border-accent/40 transition-colors\" />\n        </div>\n        <button type=\"submit\" className=\"bg-accent hover:bg-accent-hover text-white text-sm font-medium px-4 py-2.5 rounded-xl transition-colors flex items-center gap-2\">\n          <Search size={14} /> Search\n        </button>\n        {results && <button type=\"button\" onClick={clearSearch} className=\"text-white/40 hover:text-white\"><X size={18} /></button>}\n      </form>\n\n      {results ? (\n        <>\n          <h2 className=\"text-xl font-semibold mb-5\">Results for &ldquo;{query}&rdquo;</h2>\n          <div className=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-5\">\n            {results.map((b, i) => <MediaCard key={b.key || i} item={b} mediaType=\"book\" />)}\n          </div>\n          {results.length === 0 && (\n            <div className=\"text-center py-20 text-white/40\">\n              <h3 className=\"text-lg font-medium text-white/60 mb-2\">No books found</h3>\n              <p className=\"text-sm\">Try searching for a title or author</p>\n            </div>\n          )}\n        </>\n      ) : (\n        <>\n          {/* Hero Banner */}\n          {heroLoaded && hero && (\n            <div className=\"relative -mx-4 sm:-mx-6 lg:-mx-10 -mt-2 mb-10 h-[36vh] sm:h-[44vh] min-h-[260px] overflow-hidden rounded-b-3xl bg-gradient-to-br from-accent/20 via-dark-800 to-dark-900\">\n              <div className=\"absolute inset-0 bg-gradient-to-t from-dark-900 via-dark-900/40 to-transparent\" />\n              <div className=\"absolute inset-0 flex items-end\">\n                <div className=\"flex items-end gap-6 p-6 sm:p-10 w-full\">\n                  {hero.poster_path && (\n                    <img src={hero.poster_path} alt={hero.title} className=\"h-36 sm:h-48 rounded-xl shadow-2xl flex-shrink-0 object-contain\" />\n                  )}\n                  <div className=\"min-w-0 pb-1\">\n                    <div className=\"flex items-center gap-2 text-accent text-xs font-semibold mb-2\">\n                      <Book size={14} /> NEW & NOTEWORTHY\n                    </div>\n                    <h1 className=\"text-xl sm:text-3xl lg:text-4xl font-black mb-2 leading-tight line-clamp-2\">{hero.title}</h1>\n                    <p className=\"text-white/50 text-sm mb-1\">by {hero.author}</p>\n                    <div className=\"flex items-center gap-3 text-xs text-white/40\">\n                      {hero.rating && <span className=\"flex items-center gap-1 text-gold\"><Star size={14} className=\"fill-gold\" /> {hero.rating}</span>}\n                      {hero.first_publish_year && <span>{hero.first_publish_year}</span>}\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Trending Row */}\n          {trending.length > 0 && (\n            <ScrollRow title=\"Trending Now\">\n              {trending.map((b, i) => <div key={b.key || i} className=\"flex-shrink-0 w-[150px]\"><MediaCard item={b} mediaType=\"book\" /></div>)}\n            </ScrollRow>\n          )}\n\n          {/* Subject/Genre Rows — library-style categories */}\n          {SUBJECTS.map(s => {\n            const books = subjectData[s.key];\n            const loaded = loadedSubjects.has(s.key);\n\n            return (\n              <div key={s.key} ref={loaded ? undefined : observerRef} data-subject={s.key}>\n                {!loaded ? (\n                  <SkeletonRow title={s.name} />\n                ) : books?.length > 0 ? (\n                  <ScrollRow title={s.name}>\n                    {books.map((b, i) => <div key={b.key || i} className=\"flex-shrink-0 w-[150px]\"><MediaCard item={b} mediaType=\"book\" /></div>)}\n                  </ScrollRow>\n                ) : null}\n              </div>\n            );\n          })}\n        </>\n      )}\n    </div>\n  );\n}\n\nexport default Books;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [['path', { d: 'm15 18-6-6 6-6', key: '1wnfg3' }]];\n\n/**\n * @component @name ChevronLeft\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtMTUgMTgtNi02IDYtNiIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/chevron-left\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ChevronLeft = createLucideIcon('chevron-left', __iconNode);\n\nexport default ChevronLeft;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M5 12h14', key: '1ays0h' }],\n  ['path', { d: 'M12 5v14', key: 's699le' }],\n];\n\n/**\n * @component @name Plus\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNNSAxMmgxNCIgLz4KICA8cGF0aCBkPSJNMTIgNXYxNCIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/plus\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Plus = createLucideIcon('plus', __iconNode);\n\nexport default Plus;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'm21 21-4.34-4.34', key: '14j7rj' }],\n  ['circle', { cx: '11', cy: '11', r: '8', key: '4ej97u' }],\n];\n\n/**\n * @component @name Search\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtMjEgMjEtNC4zNC00LjM0IiAvPgogIDxjaXJjbGUgY3g9IjExIiBjeT0iMTEiIHI9IjgiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/search\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Search = createLucideIcon('search', __iconNode);\n\nexport default Search;\n"],"names":["MediaCard","_ref","_ref2","_ref3","_item$unified_rating","item","mediaType","navigate","useNavigate","user","useAuth","toast","useToast","title","name","poster","poster_path","startsWith","concat","year","release_date","first_air_date","first_publish_year","toString","slice","type","media_type","storedScore","getSyllabusScore","id","rating","unified_rating","vote_average","_jsxs","className","onClick","handleClick","_item$key","workKey","key","replace","tmdb_id","children","_jsx","src","alt","loading","Star","size","Number","toFixed","async","e","stopPropagation","addToLibrary","openlibrary_key","overview","external_rating","genres","genre_ids","join","err","message","Plus","author","React","ChevronRight","createLucideIcon","d","ScrollRow","ref","useRef","scroll","_ref$current","current","scrollBy","left","behavior","ChevronLeft","SkeletonCard","SkeletonRow","Array","from","length","map","_","i","SkeletonHero","Book","SUBJECTS","trending","setTrending","useState","subjectData","setSubjectData","loadedSubjects","setLoadedSubjects","Set","results","setResults","query","setQuery","heroLoaded","setHeroLoaded","useEffect","t","initialResults","Promise","all","getTrendingBooks","s","getBooksBySubject","sd","forEach","loadInitial","loadSubject","useCallback","has","prev","data","_objectSpread","observerRef","node","observer","IntersectionObserver","entry","isIntersecting","dataset","subject","disconnect","rootMargin","observe","hero","onSubmit","preventDefault","trim","searchBooks","Search","value","onChange","target","placeholder","clearSearch","X","_Fragment","b","books","loaded","undefined","cx","cy","r"],"sourceRoot":""}