/*! For license information please see 771.47046aa2.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunksyllabus_client=self.webpackChunksyllabus_client||[]).push([[771],{7655(e,t,s){s.d(t,{A:()=>n});var a=s(5043),r=s(2626),i=s(579);function l(e){let{urls:t=[],alt:s="",className:l="",children:n}=e;const[o,c]=(0,a.useState)(0),[d,m]=(0,a.useState)(!1),h=t[0]||"";(0,a.useEffect)(()=>{c(0),m(!1)},[h]);const x=()=>{c(e=>{const s=e+1;return s>=t.length?(m(!0),e):s})};return d||0===t.length?null!==n&&void 0!==n?n:(0,i.jsx)("div",{className:"".concat(l," bg-dark-600 flex flex-col items-center justify-center"),children:(0,i.jsx)(r.A,{size:20,className:"text-white/15"})}):(0,i.jsx)("img",{src:t[o],alt:s,className:l,loading:"lazy",decoding:"async",onError:x,onLoad:e=>{e.target.naturalWidth<=1&&x()}},t[o])}const n=a.memo(l)},2353(e,t,s){s.d(t,{A:()=>x});var a=s(5043),r=s(3216),i=s(1360),l=s(3944),n=s(7655),o=s(4505),c=s(8729),d=s(7694),m=s(579);function h(e){var t,s,h;let{item:x,mediaType:u="movie"}=e;const p=(0,r.Zp)(),{user:b}=(0,c.A)(),v=(0,d.d)(),y=x.title||x.name,f=x.poster_path?x.poster_path.startsWith("http")?x.poster_path:"".concat("https://image.tmdb.org/t/p/w342").concat(x.poster_path):null,g=(x.release_date||x.first_air_date||x.first_publish_year||"").toString().slice(0,4),j=x.media_type||u,k="book"!==j?(0,o.yN)(j,x.id):null,w=null!==(t=null!==(s=null!==(h=x.unified_rating)&&void 0!==h?h:k)&&void 0!==s?s:x.vote_average)&&void 0!==t?t:x.rating,[N,A]=(0,a.useState)(!1),_="book"===j;return(0,m.jsxs)("div",{className:"group relative rounded-2xl overflow-hidden bg-dark-700/50 border border-white/5 cursor-pointer transition-all duration-300 hover:-translate-y-1.5 hover:shadow-[0_8px_30px_rgba(233,69,96,0.12)] hover:border-white/10",onClick:()=>{if("book"===j){var e;const t=(null===(e=x.key)||void 0===e?void 0:e.replace("/works/",""))||"";return void(t&&p("/details/book/".concat(t)))}const t=x.id||x.tmdb_id;p("/details/".concat(j,"/").concat(t))},children:[_?(0,m.jsx)(n.A,{urls:x.cover_urls||(f?[f]:[]),alt:y,className:"w-full aspect-[2/3] object-cover",children:(0,m.jsx)("div",{className:"w-full aspect-[2/3] bg-dark-600 flex items-center justify-center text-white/30 text-xs p-4 text-center",children:y})}):f&&!N?(0,m.jsx)("img",{src:f,alt:y,loading:"lazy",className:"w-full aspect-[2/3] object-cover",onError:()=>A(!0),onLoad:e=>{e.target.naturalWidth<=1&&A(!0)}}):(0,m.jsx)("div",{className:"w-full aspect-[2/3] bg-dark-600 flex items-center justify-center text-white/30 text-xs p-4 text-center",children:y}),w>0&&(0,m.jsxs)("div",{className:"absolute top-3 right-3 bg-black/70 backdrop-blur-md rounded-lg px-2 py-1 flex items-center gap-1 text-xs font-semibold",children:[(0,m.jsx)(l.A,{size:13,className:"text-gold fill-gold"}),Number(w).toFixed(1)]}),(0,m.jsx)("button",{onClick:async e=>{if(e.stopPropagation(),!b)return v("Please log in first","error");try{await(0,o.w7)({tmdb_id:"book"!==j?x.id:null,openlibrary_key:"book"===j?x.key:null,media_type:j,title:y,poster_path:f,overview:x.overview||"",external_rating:w||null,genres:x.genre_ids?x.genre_ids.join(","):"",release_date:x.release_date||x.first_air_date||""}),v('Added "'.concat(y,'" to your library!'),"success")}catch(t){v("Already in your library"===(null===t||void 0===t?void 0:t.message)?'"'.concat(y,'" is already in your library'):"Could not add to library","error")}},title:"Add to library",className:"absolute bottom-16 right-3 w-9 h-9 rounded-full bg-accent text-white flex items-center justify-center opacity-0 scale-75 group-hover:opacity-100 group-hover:scale-100 transition-all duration-200 hover:bg-accent-hover",children:(0,m.jsx)(i.A,{size:18})}),(0,m.jsxs)("div",{className:"p-3",children:[(0,m.jsx)("p",{className:"text-sm font-semibold truncate",children:y}),(0,m.jsxs)("p",{className:"text-xs text-white/40 mt-1",children:[g,"book"===j&&x.author?" \xb7 ".concat(x.author):""]})]})]})}const x=a.memo(h)},7893(e,t,s){s.d(t,{A:()=>o});var a=s(5043),r=s(9463);const i=(0,s(1212).A)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);var l=s(579);function n(e){let{title:t,children:s,className:n=""}=e;const o=(0,a.useRef)(null),c=e=>{var t;return null===(t=o.current)||void 0===t?void 0:t.scrollBy({left:400*e,behavior:"smooth"})};return(0,l.jsxs)("div",{className:"mb-10 group/row min-w-0 ".concat(n),children:[(0,l.jsx)("h2",{className:"text-[15px] font-semibold text-white/80 mb-4 uppercase tracking-wide",children:t}),(0,l.jsxs)("div",{className:"relative min-w-0",children:[(0,l.jsx)("button",{onClick:()=>c(-1),className:"absolute left-0 top-0 bottom-6 z-10 w-10 bg-gradient-to-r from-dark-900 to-transparent opacity-0 group-hover/row:opacity-100 transition-opacity items-center justify-center hidden sm:flex",children:(0,l.jsx)(r.A,{size:20})}),(0,l.jsx)("div",{ref:o,className:"flex gap-3 overflow-x-auto overflow-y-hidden pb-2 scrollbar-hide scroll-smooth -mx-4 px-4 sm:mx-0 sm:px-0",children:s}),(0,l.jsx)("button",{onClick:()=>c(1),className:"absolute right-0 top-0 bottom-6 z-10 w-10 bg-gradient-to-l from-dark-900 to-transparent opacity-0 group-hover/row:opacity-100 transition-opacity items-center justify-center hidden sm:flex",children:(0,l.jsx)(i,{size:20})})]})]})}const o=a.memo(n)},1540(e,t,s){s.d(t,{A6:()=>i,eP:()=>l});s(5043);var a=s(579);function r(){return(0,a.jsxs)("div",{className:"flex-shrink-0 w-[140px] sm:w-[160px] animate-pulse",children:[(0,a.jsx)("div",{className:"bg-dark-700 rounded-lg aspect-[2/3] w-full mb-2"}),(0,a.jsx)("div",{className:"bg-dark-700 rounded h-3 w-3/4 mb-1"}),(0,a.jsx)("div",{className:"bg-dark-700 rounded h-3 w-1/2"})]})}function i(e){let{title:t}=e;return(0,a.jsxs)("div",{className:"mb-8",children:[t&&(0,a.jsx)("div",{className:"bg-dark-700 rounded h-5 w-40 mb-4 animate-pulse"}),(0,a.jsx)("div",{className:"flex gap-4 overflow-hidden",children:Array.from({length:8}).map((e,t)=>(0,a.jsx)(r,{},t))})]})}function l(){return(0,a.jsx)("div",{className:"relative h-[50vh] sm:h-[60vh] rounded-xl overflow-hidden mb-8 animate-pulse bg-dark-700",children:(0,a.jsxs)("div",{className:"absolute bottom-0 left-0 p-6 sm:p-10 space-y-3 w-full",children:[(0,a.jsx)("div",{className:"bg-dark-600 rounded h-8 w-1/3"}),(0,a.jsx)("div",{className:"bg-dark-600 rounded h-4 w-2/3"}),(0,a.jsx)("div",{className:"bg-dark-600 rounded h-4 w-1/2"})]})})}},7771(e,t,s){s.r(t),s.d(t,{default:()=>y});var a=s(2555),r=s(5043),i=s(3216),l=s(2626),n=s(9292),o=s(3944),c=s(4919),d=s(614),m=s(2353),h=s(7655),x=s(7893),u=s(1540),p=s(4505),b=s(579);const v=[{key:"fiction",name:"Fiction"},{key:"science fiction",name:"Science Fiction"},{key:"fantasy",name:"Fantasy"},{key:"mystery",name:"Mystery & Thriller"},{key:"romance",name:"Romance"},{key:"horror",name:"Horror"},{key:"biography",name:"Biography & Memoir"},{key:"history",name:"History"},{key:"science",name:"Science"},{key:"true crime",name:"True Crime"},{key:"philosophy",name:"Philosophy"},{key:"self-help",name:"Self-Help"}];const y=function(){const e=(0,i.Zp)(),[t,s]=(0,r.useState)([]),[y,f]=(0,r.useState)({}),[g,j]=(0,r.useState)(new Set),[k,w]=(0,r.useState)(null),[N,A]=(0,r.useState)(""),[_,S]=(0,r.useState)(!1),[z,C]=(0,r.useState)(!1);(0,r.useEffect)(()=>{!async function(){try{const[e,...t]=await Promise.all([(0,p.e8)(),...v.slice(0,2).map(e=>(0,p.Y2)(e.key))]);s(e);const a={};v.slice(0,2).forEach((e,s)=>{a[e.key]=t[s]}),f(a),j(new Set(v.slice(0,2).map(e=>e.key)))}catch(e){console.error("[Books] Initial load failed:",e)}C(!0)}()},[]);const T=(0,r.useCallback)(async e=>{if(!g.has(e)){j(t=>new Set([...t,e]));try{const t=await(0,p.Y2)(e);f(s=>(0,a.A)((0,a.A)({},s),{},{[e]:t}))}catch(t){f(t=>(0,a.A)((0,a.A)({},t),{},{[e]:[]}))}}},[g]),E=(0,r.useCallback)(e=>{if(!e)return;const t=new IntersectionObserver(s=>{let[a]=s;if(a.isIntersecting){const s=e.dataset.subject;s&&T(s),t.disconnect()}},{rootMargin:"300px"});t.observe(e)},[T]),M=t[0];return z?(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!N.trim())return;S(!0);const t=await(0,p.Ve)(N);w(t),S(!1)},className:"flex items-center gap-3 mb-6",children:[(0,b.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,b.jsx)(n.A,{size:16,className:"absolute left-4 top-1/2 -translate-y-1/2 text-white/30"}),(0,b.jsx)("input",{value:N,onChange:e=>A(e.target.value),placeholder:"Search by title, author, or ISBN...",className:"w-full bg-white/[0.04] border border-white/[0.08] rounded-xl pl-11 pr-4 py-2.5 text-sm text-white placeholder-white/25 outline-none focus:border-accent/40 transition-colors"})]}),(0,b.jsxs)("button",{type:"submit",disabled:_,className:"bg-accent hover:bg-accent-hover disabled:opacity-50 text-white text-sm font-medium px-4 py-2.5 rounded-xl transition-colors flex items-center gap-2",children:[_?(0,b.jsx)("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}):(0,b.jsx)(n.A,{size:14}),"Search"]}),k&&(0,b.jsx)("button",{type:"button",onClick:()=>{w(null),A("")},className:"text-white/40 hover:text-white transition-colors",children:(0,b.jsx)(d.A,{size:18})})]}),k?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("h2",{className:"text-xl font-semibold mb-5",children:["Results for \u201c",N,"\u201d"]}),k.length>0?(0,b.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-5",children:k.map((e,t)=>(0,b.jsx)(m.A,{item:e,mediaType:"book"},e.key||t))}):(0,b.jsxs)("div",{className:"text-center py-20 text-white/40",children:[(0,b.jsx)(l.A,{size:40,className:"mx-auto mb-3 text-white/15"}),(0,b.jsx)("h3",{className:"text-lg font-medium text-white/60 mb-2",children:"No books found"}),(0,b.jsx)("p",{className:"text-sm",children:"Try a different title, author, or ISBN"})]})]}):(0,b.jsxs)(b.Fragment,{children:[M&&(0,b.jsxs)("div",{className:"relative -mx-4 sm:-mx-6 lg:-mx-10 -mt-2 mb-10 h-[36vh] sm:h-[44vh] min-h-[260px] overflow-hidden rounded-b-3xl bg-gradient-to-br from-accent/20 via-dark-800 to-dark-900 cursor-pointer group",onClick:()=>(t=>{var s;const a=(null===(s=t.key)||void 0===s?void 0:s.replace("/works/",""))||"";a&&e("/details/book/".concat(a))})(M),children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-dark-900 via-dark-900/40 to-transparent"}),(0,b.jsx)("div",{className:"absolute inset-0 flex items-end",children:(0,b.jsxs)("div",{className:"flex items-end gap-6 p-6 sm:p-10 w-full",children:[(0,b.jsx)(h.A,{urls:M.cover_urls,alt:M.title,className:"h-36 sm:h-48 rounded-xl shadow-2xl flex-shrink-0 object-contain group-hover:scale-105 transition-transform duration-300",children:(0,b.jsx)("div",{className:"h-36 sm:h-48 w-24 sm:w-32 rounded-xl bg-dark-600 flex items-center justify-center flex-shrink-0",children:(0,b.jsx)(l.A,{size:32,className:"text-white/15"})})}),(0,b.jsxs)("div",{className:"min-w-0 pb-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-accent text-xs font-semibold mb-2",children:[(0,b.jsx)(c.A,{size:14})," TRENDING THIS WEEK"]}),(0,b.jsx)("h1",{className:"text-xl sm:text-3xl lg:text-4xl font-black mb-2 leading-tight line-clamp-2",children:M.title}),(0,b.jsxs)("p",{className:"text-white/50 text-sm mb-1",children:["by ",M.author]}),(0,b.jsxs)("div",{className:"flex items-center gap-3 text-xs text-white/40",children:[M.rating>0&&(0,b.jsxs)("span",{className:"flex items-center gap-1 text-gold",children:[(0,b.jsx)(o.A,{size:14,className:"fill-gold"})," ",M.rating]}),M.first_publish_year&&(0,b.jsx)("span",{children:M.first_publish_year})]})]})]})})]}),t.length>0&&(0,b.jsx)(x.A,{title:"Trending This Week",children:t.map((e,t)=>(0,b.jsx)("div",{className:"flex-shrink-0 w-[150px]",children:(0,b.jsx)(m.A,{item:e,mediaType:"book"})},e.key||t))}),v.map(e=>{const t=y[e.key],s=g.has(e.key);return(0,b.jsx)("div",{ref:s?void 0:E,"data-subject":e.key,children:s?(null===t||void 0===t?void 0:t.length)>0?(0,b.jsx)(x.A,{title:e.name,children:t.map((e,t)=>(0,b.jsx)("div",{className:"flex-shrink-0 w-[150px]",children:(0,b.jsx)(m.A,{item:e,mediaType:"book"})},e.key||t))}):null:(0,b.jsx)(u.A6,{title:e.name})},e.key)})]})]}):(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsx)(u.eP,{}),(0,b.jsx)(u.A6,{title:!0}),(0,b.jsx)(u.A6,{title:!0})]})}},2626(e,t,s){s.d(t,{A:()=>a});const a=(0,s(1212).A)("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]])},9463(e,t,s){s.d(t,{A:()=>a});const a=(0,s(1212).A)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},1360(e,t,s){s.d(t,{A:()=>a});const a=(0,s(1212).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},9292(e,t,s){s.d(t,{A:()=>a});const a=(0,s(1212).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},4919(e,t,s){s.d(t,{A:()=>a});const a=(0,s(1212).A)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]])}}]);
//# sourceMappingURL=771.47046aa2.chunk.js.map