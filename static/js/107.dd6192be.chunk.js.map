{"version":3,"file":"static/js/107.dd6192be.chunk.js","mappings":";kNASA,SAASA,EAASC,GAAiC,IAADC,EAAAC,EAAAC,EAAA,IAA/B,KAAEC,EAAI,UAAEC,EAAY,SAASL,EAC9C,MAAMM,GAAWC,EAAAA,EAAAA,OACX,KAAEC,IAASC,EAAAA,EAAAA,KACXC,GAAQC,EAAAA,EAAAA,KAERC,EAAQR,EAAKQ,OAASR,EAAKS,KAC3BC,EAASV,EAAKW,YACfX,EAAKW,YAAYC,WAAW,QAAUZ,EAAKW,YAAW,GAAAE,OAT5C,mCAS0DA,OAAGb,EAAKW,aAC7E,KACEG,GAAQd,EAAKe,cAAgBf,EAAKgB,gBAAkBhB,EAAKiB,oBAAsB,IAAIC,WAAWC,MAAM,EAAG,GACvGC,EAAOpB,EAAKqB,YAAcpB,EAG1BqB,EAAuB,SAATF,GAAkBG,EAAAA,EAAAA,IAAiBH,EAAMpB,EAAKwB,IAAM,KAClEC,EAAgE,QAA1D5B,EAAqC,QAArCC,EAAsB,QAAtBC,EAAGC,EAAK0B,sBAAc,IAAA3B,EAAAA,EAAIuB,SAAW,IAAAxB,EAAAA,EAAIE,EAAK2B,oBAAY,IAAA9B,EAAAA,EAAIG,EAAKyB,OAiC/E,OACEG,EAAAA,EAAAA,MAAA,OACEC,UAAU,yNACVC,QAlCgBC,KAClB,GAAa,SAATX,EAAiB,CAAC,IAADY,EACnB,MAAMC,GAAkB,QAARD,EAAAhC,EAAKkC,WAAG,IAAAF,OAAA,EAARA,EAAUG,QAAQ,UAAW,MAAO,GAEpD,YADIF,GAAS/B,EAAS,iBAADW,OAAkBoB,IAEzC,CACA,MAAMT,EAAKxB,EAAKwB,IAAMxB,EAAKoC,QAC3BlC,EAAS,YAADW,OAAaO,EAAI,KAAAP,OAAIW,KA2BNa,SAAA,CAEpB3B,GACC4B,EAAAA,EAAAA,KAAA,OAAKC,IAAK7B,EAAQ8B,IAAKhC,EAAOiC,QAAQ,OAAOZ,UAAU,sCAEvDS,EAAAA,EAAAA,KAAA,OAAKT,UAAU,yGAAwGQ,SACpH7B,IAIJiB,EAAS,IACRG,EAAAA,EAAAA,MAAA,OAAKC,UAAU,yHAAwHQ,SAAA,EACrIC,EAAAA,EAAAA,KAACI,EAAAA,EAAI,CAACC,KAAM,GAAId,UAAU,wBACzBe,OAAOnB,GAAQoB,QAAQ,OAI5BP,EAAAA,EAAAA,KAAA,UACER,QA1CYgB,UAEhB,GADAC,EAAEC,mBACG5C,EAAM,OAAOE,EAAM,sBAAuB,SAC/C,UACQ2C,EAAAA,EAAAA,IAAa,CACjBb,QAAkB,SAAThB,EAAkBpB,EAAKwB,GAAK,KACrC0B,gBAA0B,SAAT9B,EAAkBpB,EAAKkC,IAAM,KAC9Cb,WAAYD,EACZZ,QACAG,YAAaD,EACbyC,SAAUnD,EAAKmD,UAAY,GAC3BC,gBAAiB3B,GAAU,KAC3B4B,OAAQrD,EAAKsD,UAAYtD,EAAKsD,UAAUC,KAAK,KAAO,GACpDxC,aAAcf,EAAKe,cAAgBf,EAAKgB,gBAAkB,KAE5DV,EAAM,UAADO,OAAWL,EAAK,sBAAsB,UAC7C,CAAE,MAAOgD,GACPlD,EAAuB,6BAAd,OAAHkD,QAAG,IAAHA,OAAG,EAAHA,EAAKC,SAAqC,IAAA5C,OAAOL,EAAK,gCAAiC,2BAA4B,QAC3H,GAyBIA,MAAM,iBACNqB,UAAU,2NAA0NQ,UAEpOC,EAAAA,EAAAA,KAACoB,EAAAA,EAAI,CAACf,KAAM,QAGdf,EAAAA,EAAAA,MAAA,OAAKC,UAAU,MAAKQ,SAAA,EAClBC,EAAAA,EAAAA,KAAA,KAAGT,UAAU,iCAAgCQ,SAAE7B,KAC/CoB,EAAAA,EAAAA,MAAA,KAAGC,UAAU,6BAA4BQ,SAAA,CACtCvB,EAAe,SAATM,GAAmBpB,EAAK2D,OAAM,SAAA9C,OAASb,EAAK2D,QAAW,WAKxE,CAEA,QAAeC,EAAAA,KAAWjE,E,8JCjFpB,MAAAkE,GAAeC,EAAAA,EAAAA,GAAiB,eAAgB,CACpD,CAAC,OAAQ,CAAEC,EAAG,YAAa7B,IAAK,WAChC,CAAC,OAAQ,CAAE6B,EAAG,cAAe7B,IAAK,WAClC,CAAC,OAAQ,CAAE6B,EAAG,2DAA4D7B,IAAK,a,wBCH3E,MAAA8B,GAAWF,EAAAA,EAAAA,GAAiB,WAAY,CAC5C,CAAC,OAAQ,CAAEC,EAAG,2BAA4B7B,IAAK,WAC/C,CAAC,OAAQ,CAAE6B,EAAG,0BAA2B7B,IAAK,WAC9C,CAAC,OAAQ,CAAE6B,EAAG,mDAAoD7B,IAAK,aCHnE+B,GAAaH,EAAAA,EAAAA,GAAiB,aAAc,CAChD,CAAC,OAAQ,CAAEC,EAAG,iEAAkE7B,IAAK,WACrF,CAAC,WAAY,CAAEgC,OAAQ,6BAA8BhC,IAAK,aCFtDiC,GAAeL,EAAAA,EAAAA,GAAiB,eAAgB,CACpD,CAAC,SAAU,CAAEM,GAAI,IAAKC,GAAI,KAAMC,EAAG,IAAKpC,IAAK,WAC7C,CAAC,SAAU,CAAEkC,GAAI,KAAMC,GAAI,KAAMC,EAAG,IAAKpC,IAAK,WAC9C,CACE,OACA,CACE6B,EAAG,mFACH7B,IAAK,aCPLqC,GAAYT,EAAAA,EAAAA,GAAiB,YAAa,CAC9C,CACE,OACA,CACEC,EAAG,uGACH7B,IAAK,WAGT,CAAC,OAAQ,CAAE6B,EAAG,UAAW7B,IAAK,WAC9B,CAAC,OAAQ,CAAE6B,EAAG,WAAY7B,IAAK,a,kCCT3B,MAAAsC,GAAaV,EAAAA,EAAAA,GAAiB,aAAc,CAChD,CAAC,OAAQ,CAAEW,GAAI,KAAMC,GAAI,KAAMC,GAAI,IAAKC,GAAI,KAAM1C,IAAK,WACvD,CAAC,OAAQ,CAAE6B,EAAG,oDAAqD7B,IAAK,aCFpE2C,GAAQf,EAAAA,EAAAA,GAAiB,QAAS,CACtC,CAAC,SAAU,CAAEM,GAAI,KAAMC,GAAI,KAAMC,EAAG,KAAMpC,IAAK,WAC/C,CAAC,OAAQ,CAAE6B,EAAG,kDAAmD7B,IAAK,WACtE,CAAC,OAAQ,CAAE6B,EAAG,WAAY7B,IAAK,a,yECRjC,MAAM4C,EAAW,kCAEXC,EAAY,iCACZC,EAAe,kCAGfC,EAAgB,CACpB,QAAYzE,GAAK,oCAAAK,OAAyCqE,mBAAmB1E,IAC7E,qBAAuBA,GAAK,8CAAAK,OAAmDqE,mBAAmB1E,IAClG,eAAiBA,GAAK,8CAAAK,OAAmDqE,mBAAmB1E,IAC5F,cAAgBA,GAAK,qCAAAK,OAA0CqE,mBAAmB1E,IAClF,WAAaA,GAAK,oCAAAK,OAAyCqE,mBAAmB1E,IAC9E,gBAAkBA,GAAK,oCAAAK,OAAyCqE,mBAAmB1E,IACnF,KAASA,GAAK,oCAAAK,OAAyCqE,mBAAmB1E,IAC1E,MAAUA,GAAK,iCAAAK,OAAsCqE,mBAAmB1E,IACxE,iBAAmBA,GAAK,2CAAAK,OAAgDqE,mBAAmB1E,IAC3F,4BAA8BA,GAAK,8CAAAK,OAAmDqE,mBAAmB1E,IACzG,aAAeA,GAAK,+CAAAK,OAAoDqE,mBAAmB1E,IAC3F,KAASA,GAAK,iCAAAK,OAAsCqE,mBAAmB1E,IACvE,UAAYA,GAAK,iCAAAK,OAAsCqE,mBAAmB1E,IAC1E,IAAQA,GAAK,iCAAAK,OAAsCqE,mBAAmB1E,IACtE,QAAYA,GAAK,sCAAAK,OAA2CqE,mBAAmB1E,IAC/E,YAAgBA,GAAK,wCAAAK,OAA6CqE,mBAAmB1E,IACrF,qBAAuBA,GAAK,0CAAAK,OAA+CqE,mBAAmB1E,GAAM,aACpG,QAAYA,GAAK,gDAAAK,OAAqDqE,mBAAmB1E,IACzF,kBAAoBA,GAAK,2DAAAK,OAAgEqE,mBAAmB1E,KAG9G,SAAS2E,EAAeC,EAAc5E,EAAO6E,GAC3C,IAAK,MAAOnD,EAAKoD,KAAUC,OAAOC,QAAQP,GACxC,GAAIG,EAAaK,cAAcC,SAASxD,EAAIuD,gBAAkBvD,EAAIuD,cAAcC,SAASN,EAAaK,eACpG,OAAOH,EAAM9E,GAGjB,OAAO6E,GAAgB,GACzB,CAKA,SAASM,EAAY/F,GAA2B,IAA1B,QAAEgG,EAAO,WAAEC,GAAYjG,EAC3C,MAAOkG,EAASC,IAAcC,EAAAA,EAAAA,UAAS,OAChCvD,EAASwD,IAAcD,EAAAA,EAAAA,WAAS,IAChCE,EAAQC,IAAaH,EAAAA,EAAAA,WAAS,IAC9BI,EAAQC,IAAaL,EAAAA,EAAAA,UAAS,aAC9BvE,EAAQ6E,IAAaN,EAAAA,EAAAA,UAAS,IAC9BO,EAAQC,IAAaR,EAAAA,EAAAA,UAAS,KAC9BS,EAAUC,IAAeV,EAAAA,EAAAA,WAAS,GACnC1F,GAAQC,EAAAA,EAAAA,MACR,KAAEH,IAASC,EAAAA,EAAAA,KAGXsG,EAAYf,EAAQxD,SAAWwD,EAAQ1C,iBAE7C0D,EAAAA,EAAAA,WAAU,KACR,IAAIC,GAAY,EAmBhB,OAlBA/D,iBACE,GAAK1C,EAAL,CACA,IACE,MAAMJ,QAAa8G,EAAAA,EAAAA,IAAwBlB,GAC3C,GAAIiB,EAAW,OACX7G,IACF+F,EAAW/F,GACXqG,EAAUrG,EAAKoG,QAAU,YACzBE,EAAUtG,EAAK+G,aAAe,GAC9BP,EAAUxG,EAAKuG,QAAU,IACzBG,GAAY,GAEhB,CAAE,MAAOlD,GACPwD,QAAQC,MAAM,yBAA0BzD,EAC1C,CACKqD,GAAWZ,GAAW,EAda,MAA3BA,GAAW,EAe1B,CACAiB,GACO,KAAQL,GAAY,IAC1B,CAACF,EAAWvG,IAwFf,OAAIqC,GAAgBH,EAAAA,EAAAA,KAAA,OAAKT,UAAU,wDAC9BzB,EAKA0F,GAuBHlE,EAAAA,EAAAA,MAAA,OAAKC,UAAU,8EAA6EQ,SAAA,EAE1FT,EAAAA,EAAAA,MAAA,OAAKC,UAAU,2EAA0EQ,SAAA,EACvFT,EAAAA,EAAAA,MAAA,OAAKC,UAAU,0BAAyBQ,SAAA,EACtCC,EAAAA,EAAAA,KAAC6E,EAAAA,EAAK,CAACxE,KAAM,GAAId,UAAU,oBAC3BS,EAAAA,EAAAA,KAAA,QAAMT,UAAU,oCAAmCQ,SAAC,wBAEtDT,EAAAA,EAAAA,MAAA,OAAKC,UAAU,4BAA2BQ,SAAA,EACxCC,EAAAA,EAAAA,KAAA,UAAQR,QAASA,IAAM4E,EAAY3D,IAAMA,GACvClB,UAAU,iGAAgGQ,SACzGoE,EAAW,WAAa,UAE3BnE,EAAAA,EAAAA,KAAA,UAAQR,QA1EKgB,UACnB,GAAKgD,EACL,UACQsB,EAAAA,EAAAA,IAAkBtB,EAAQtE,IAChCuE,EAAW,MACXM,EAAU,YACVC,EAAU,GACVE,EAAU,IACVE,GAAY,GACZpG,EAAM,uBAAwB,UAChC,CAAE,MAAA+G,GAAQ/G,EAAM,mBAAoB,QAAU,GAiEtCuB,UAAU,kFAAkFrB,MAAM,SAAQ6B,UAC1GC,EAAAA,EAAAA,KAACgF,EAAAA,EAAM,CAAC3E,KAAM,cAMpBL,EAAAA,EAAAA,KAAA,OAAKT,UAAU,uBAAsBQ,SAClC,CACC,CAAEH,IAAK,OAAQqF,KAAMC,EAAAA,EAAOC,MAAO,WAAYC,OAAQ,8CACvD,CAAExF,IAAK,WAAYqF,KAAMI,EAAAA,EAAKF,MAAO,cAAeC,OAAQ,0CAC5D,CAAExF,IAAK,WAAYqF,KAAMK,EAAAA,EAAcH,MAAO,WAAYC,OAAQ,6CAClEG,IAAIC,IACJlG,EAAAA,EAAAA,MAAA,UAAoBE,QAASA,IA/HVgB,WAEzB,GADAuD,EAAU0B,GACNjC,EACF,UACQkC,EAAAA,EAAAA,IAAkBlC,EAAQtE,GAAI,CAAE4E,OAAQ2B,IAC9ChC,EAAWkC,IAAIC,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAUD,GAAI,IAAE7B,OAAQ2B,KAEvCzH,EAAM,YAADO,OADU,CAAEsH,KAAM,WAAYC,SAAU,cAAeC,SAAU,YAC7CN,IAAc,QACrB,aAAdA,IACFO,EAAAA,EAAAA,IAAY,CAAEC,OAAQ,WAAY/H,MAAOqF,EAAWrF,MAAOa,WAAYwE,EAAWxE,WAAYmH,SAAU3C,EAAWzD,SAAWyD,EAAW3C,gBAAiBuF,WAAY5C,EAAW4C,aAAcC,MAAM,OAEzM,CAAE,MAAAC,GAAQrI,EAAM,0BAA2B,QAAU,GAoHdsI,CAAmBd,EAAE5F,KACtDL,UAAS,4HAAAhB,OACPuF,IAAW0B,EAAE5F,IAAM4F,EAAEJ,OAAS,2EAC7BrF,SAAA,EACHC,EAAAA,EAAAA,KAACwF,EAAEP,KAAI,CAAC5E,KAAM,KACbmF,EAAEL,QALQK,EAAE5F,QAWlBuE,IACC7E,EAAAA,EAAAA,MAAA,OAAKC,UAAU,sBAAqBQ,SAAA,EAElCT,EAAAA,EAAAA,MAAA,OAAAS,SAAA,EACEC,EAAAA,EAAAA,KAAA,SAAOT,UAAU,gEAA+DQ,SAAC,iBACjFT,EAAAA,EAAAA,MAAA,OAAKC,UAAU,0BAAyBQ,SAAA,EACtCT,EAAAA,EAAAA,MAAA,OAAKC,UAAU,SAAQQ,SAAA,EACrBC,EAAAA,EAAAA,KAAA,SAAOlB,KAAK,QAAQyH,IAAI,IAAIC,IAAI,KAAKC,KAAK,MAAMC,MAAOvH,EACrDwH,SAAUlG,GAAKuD,EAAU4C,WAAWnG,EAAEoG,OAAOH,QAC7CnH,UAAU,gcAKZD,EAAAA,EAAAA,MAAA,OAAKC,UAAU,4BAA2BQ,SAAA,EACxCC,EAAAA,EAAAA,KAAA,QAAMT,UAAU,2BAA0BQ,SAAC,OAC3CC,EAAAA,EAAAA,KAAA,QAAMT,UAAU,2BAA0BQ,SAAC,OAC3CC,EAAAA,EAAAA,KAAA,QAAMT,UAAU,2BAA0BQ,SAAC,cAG/CT,EAAAA,EAAAA,MAAA,OAAKC,UAAU,0BAAyBQ,SAAA,EACtCC,EAAAA,EAAAA,KAAA,QAAMT,UAAS,wCAAAhB,OAA0CY,EAAS,GA3GxD2H,EA2G2E3H,EA1G7F2H,GAAO,EAAU,0BACjBA,GAAO,EAAU,+BACjBA,GAAO,EAAU,8BACjBA,GAAO,EAAU,gCACd,gCAsGoG,4BAA2B,kCAAiC/G,SACxJZ,EAAS,EAAImB,OAAOnB,GAAQoB,QAAQ,GAAK,WAE3CpB,EAAS,IAAKa,EAAAA,EAAAA,KAAA,KAAGT,UAAU,2BAA0BQ,SAtG5C+G,IACjBA,GAAe,IAARA,EACRA,GAAO,EAAU,WACjBA,GAAO,EAAU,YACjBA,GAAO,EAAU,OACjBA,GAAO,IAAY,SACnBA,GAAO,IAAY,OACnBA,GAAO,IAAY,QACnBA,GAAO,IAAY,UAChB,cARuB,GAqGsCC,CAAe5H,YAI3Ea,EAAAA,EAAAA,KAAA,OAAKT,UAAU,kBAAiBQ,SAC7B,CAAC,EAAG,EAAG,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,IAAIwF,IAAIyB,IACtChH,EAAAA,EAAAA,KAAA,UAAgBR,QAASA,IAAMwE,EAAUgD,GACvCzH,UAAS,2DAAAhB,OACPY,IAAW6H,EAAI,uBAAyB,mEACvCjH,SAAEiH,GAHMA,UASnB1H,EAAAA,EAAAA,MAAA,OAAAS,SAAA,EACEC,EAAAA,EAAAA,KAAA,SAAOT,UAAU,gEAA+DQ,SAAC,mBACjFC,EAAAA,EAAAA,KAAA,YAAU0G,MAAOzC,EAAQ0C,SAAUlG,GAAKyD,EAAUzD,EAAEoG,OAAOH,OACzDO,YAAY,iCAAiCC,KAAM,EACnD3H,UAAU,mMAIdS,EAAAA,EAAAA,KAAA,UAAQR,QA1KGgB,UACjB,GAAKgD,EAAL,CACAK,GAAU,GACV,IACE,MAAMsD,QAAgBzB,EAAAA,EAAAA,IAAkBlC,EAAQtE,GAAI,CAClDuF,YAAatF,GAAU,KACvB8E,OAAQA,GAAU,KAClBH,WAEFL,EAAW0D,GACXnJ,EAAM,SAAU,WACZmB,IACF6G,EAAAA,EAAAA,IAAY,CAAEC,OAAQ,QAAS/H,MAAOqF,EAAWrF,MAAOa,WAAYwE,EAAWxE,WAAYmH,SAAU3C,EAAWzD,SAAWyD,EAAW3C,gBAAiBuF,WAAY5C,EAAW4C,WAAYhH,WAAUiH,MAAM,QAExMnC,IACF+B,EAAAA,EAAAA,IAAY,CAAEC,OAAQ,WAAY/H,MAAOqF,EAAWrF,MAAOa,WAAYwE,EAAWxE,WAAYmH,SAAU3C,EAAWzD,SAAWyD,EAAW3C,gBAAiBuF,WAAY5C,EAAW4C,WAAYlC,WAAUmC,MAAM,OAEjN,CAAE,MAAOlF,GACPwD,QAAQC,MAAM,eAAgBzD,GAC9BlD,GAAS,OAAHkD,QAAG,IAAHA,OAAG,EAAHA,EAAKC,UAAW,kCAA8B,QACtD,CACA0C,GAAU,EApBU,GAyKeuD,SAAUxD,EACrCrE,UAAU,qFAAoFQ,SAC7F6D,EAAS,YAAc,gBA3G9BtE,EAAAA,EAAAA,MAAA,OAAKC,UAAU,OAAMQ,SAAA,EACnBC,EAAAA,EAAAA,KAAA,KAAGT,UAAU,0DAAyDQ,SAAC,oBACvEC,EAAAA,EAAAA,KAAA,OAAKT,UAAU,uBAAsBQ,SAClC,CACC,CAAEH,IAAK,WAAYqF,KAAMI,EAAAA,EAAKF,MAAO,WAAYkC,IAAK,iCACtD,CAAEzH,IAAK,OAAQqF,KAAMC,EAAAA,EAAOC,MAAO,WAAYkC,IAAK,qCACpD,CAAEzH,IAAK,WAAYqF,KAAMK,EAAAA,EAAcH,MAAO,WAAYkC,IAAK,oCAC/D9B,IAAIC,IACJlG,EAAAA,EAAAA,MAAA,UAAoBE,QAASA,IAtGrBgB,WAChB,IAAK1C,EAAM,OAAOE,EAAM,sBAAuB,SAC/C,IACE,MAAMsJ,QAAgB3G,EAAAA,EAAAA,KAAYiF,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAC,CAAC,EAAIrC,GAAU,IAAEO,OAAQyD,KAC5D9D,EAAW6D,GACXvD,EAAUwD,GACVnD,GAAY,GACZpG,EAAM,oBAAqB,YAC3BgI,EAAAA,EAAAA,IAAY,CAAEC,OAAQ,QAAS/H,MAAOqF,EAAWrF,MAAOa,WAAYwE,EAAWxE,WAAYmH,SAAU3C,EAAWzD,SAAWyD,EAAW3C,gBAAiBuF,WAAY5C,EAAW4C,aAAcC,MAAM,OACpM,CAAE,MAAOlF,GACPlD,EAAuB,6BAAd,OAAHkD,QAAG,IAAHA,OAAG,EAAHA,EAAKC,SAAwC,0BAA4B,gBAAiB,QAClG,GA2F2CqG,CAAUhC,EAAE5F,KAC7CL,UAAS,GAAAhB,OAAKiH,EAAE6B,IAAG,iJAAgJtH,SAAA,EACnKC,EAAAA,EAAAA,KAACwF,EAAEP,KAAI,CAAC5E,KAAM,KACbmF,EAAEL,QAHQK,EAAE5F,YAdvBI,EAAAA,EAAAA,KAAA,KAAGT,UAAU,6BAA4BQ,SAAC,kCAtBpB+G,KA6I1B,CAKA,SAASW,EAAWlK,GAAyB,IAADmK,EAAAC,EAAA,IAAvB,QAAEhI,EAAO,SAAE/B,GAAUL,EACxC,MAAOqK,EAAMC,IAAWnE,EAAAA,EAAAA,UAAS,OAC1BvD,EAASwD,IAAcD,EAAAA,EAAAA,WAAS,IACzBzF,EAAAA,EAAAA,KAad,IAXAqG,EAAAA,EAAAA,WAAU,MACR9D,iBACEmD,GAAW,GACX,MAAM/D,EAAMD,EAAQrB,WAAW,WAAaqB,EAAO,UAAApB,OAAaoB,GAC1DmI,QAAeC,EAAAA,EAAAA,IAAenI,GACpCiI,EAAQC,GACRnE,GAAW,EACb,CACAqE,IACC,CAACrI,IAEAQ,EAAS,OAAOH,EAAAA,EAAAA,KAAA,OAAKT,UAAU,4BAA2BQ,UAACC,EAAAA,EAAAA,KAAA,OAAKT,UAAU,iFAC9E,IAAKqI,EAAM,OAAO5H,EAAAA,EAAAA,KAAA,OAAKT,UAAU,kCAAiCQ,UAACC,EAAAA,EAAAA,KAAA,MAAIT,UAAU,UAASQ,SAAC,qBAE3F,MAAMkI,GAAgBL,EAAKM,cAAgB,IAAMN,EAAKO,mBAAqB,IAAMP,EAAKQ,cAAgB,GAChGC,EAAUzF,mBAAmB,GAADrE,OAAIqJ,EAAK1J,MAAK,UAEhD,OACEoB,EAAAA,EAAAA,MAAA,OAAAS,SAAA,EAEET,EAAAA,EAAAA,MAAA,OAAKC,UAAU,0DAAyDQ,SAAA,EACtEC,EAAAA,EAAAA,KAAA,OAAKT,UAAU,6EACfS,EAAAA,EAAAA,KAAA,OAAKT,UAAU,uEAGjBD,EAAAA,EAAAA,MAAA,UAAQE,QAASA,IAAM5B,GAAU,GAAI2B,UAAU,uFAAsFQ,SAAA,EACnIC,EAAAA,EAAAA,KAACsI,EAAAA,EAAS,CAACjI,KAAM,KAAM,YAGzBf,EAAAA,EAAAA,MAAA,OAAKC,UAAU,kCAAiCQ,SAAA,CAE7C6H,EAAKvJ,aACJ2B,EAAAA,EAAAA,KAAA,OAAKC,IAAK2H,EAAKvJ,YAAa6B,IAAK0H,EAAK1J,MAAOqB,UAAU,wHAEvDS,EAAAA,EAAAA,KAAA,OAAKT,UAAU,iIAAgIQ,UAC7IC,EAAAA,EAAAA,KAACuI,EAAAA,EAAQ,CAAClI,KAAM,GAAId,UAAU,qBAKlCD,EAAAA,EAAAA,MAAA,OAAKC,UAAU,iBAAgBQ,SAAA,EAC7BC,EAAAA,EAAAA,KAAA,MAAIT,UAAU,sCAAqCQ,SAAE6H,EAAK1J,SAG7C,QAAZwJ,EAAAE,EAAKY,eAAO,IAAAd,OAAA,EAAZA,EAAce,QAAS,IACtBzI,EAAAA,EAAAA,KAAA,OAAKT,UAAU,yCAAwCQ,SACpD6H,EAAKY,QAAQjD,IAAI,CAAClE,EAAQqH,KAAC,IAAAC,EAAA,OAC1BrJ,EAAAA,EAAAA,MAAA,KAEEsJ,KAAI,mCAAArK,OAAqCqE,mBAAmBvB,EAAOlD,KAAO,YAC1E0I,OAAO,SACPgC,IAAI,sBACJtJ,UAAU,8DAA6DQ,SAAA,CAEtEsB,EAAOyH,OACN9I,EAAAA,EAAAA,KAAA,OAAKC,IAAKoB,EAAOyH,MAAO5I,IAAKmB,EAAOlD,KAAMoB,UAAU,8DAEpDS,EAAAA,EAAAA,KAAA,OAAKT,UAAU,2HAA0HQ,SAC3H,QAD2H4I,EACtItH,EAAOlD,YAAI,IAAAwK,OAAA,EAAXA,EAAaI,OAAO,MAGzB/I,EAAAA,EAAAA,KAAA,QAAMT,UAAU,4DAA2DQ,SACxEsB,EAAOlD,QAEV6B,EAAAA,EAAAA,KAACuB,EAAY,CAAClB,KAAM,GAAId,UAAU,oBAhB7B8B,EAAOzB,KAAO8I,QAsB3BpJ,EAAAA,EAAAA,MAAA,KAAGC,UAAU,6BAA4BQ,SAAA,CACtC6H,EAAKoB,oBAAkB,mBAAAzK,OAAuBqJ,EAAKoB,oBACnDpB,EAAKqB,cAAgB,GAAC,SAAA1K,OAAUqJ,EAAKqB,cAAa,iBAIrD3J,EAAAA,EAAAA,MAAA,OAAKC,UAAU,wCAAuCQ,SAAA,CACnD6H,EAAKzI,SACJG,EAAAA,EAAAA,MAAA,KAAGsJ,KAAI,0BAAArK,OAA4BqJ,EAAKhI,KAAOiH,OAAO,SAASgC,IAAI,sBACjEtJ,UAAU,0HAAyHQ,SAAA,EACnIT,EAAAA,EAAAA,MAAA,OAAKC,UAAU,gDAA+CQ,SAAA,EAC5DC,EAAAA,EAAAA,KAACI,EAAAA,EAAI,CAACC,KAAM,GAAId,UAAU,yBAC1BS,EAAAA,EAAAA,KAAA,QAAMT,UAAU,qBAAoBQ,SAAE6H,EAAKzI,UAC3Ca,EAAAA,EAAAA,KAAA,QAAMT,UAAU,wBAAuBQ,SAAC,aAE1CC,EAAAA,EAAAA,KAAA,KAAGT,UAAU,qDAAoDQ,SAAC,iBACjE6H,EAAKsB,cAAgB,IAAK5J,EAAAA,EAAAA,MAAA,KAAGC,UAAU,2BAA0BQ,SAAA,CAAE6H,EAAKsB,cAAcC,iBAAiB,iBAI3GlB,EAAe,IACd3I,EAAAA,EAAAA,MAAA,OAAKC,UAAU,2FAA0FQ,SAAA,EACvGT,EAAAA,EAAAA,MAAA,OAAKC,UAAU,gDAA+CQ,SAAA,EAC5DC,EAAAA,EAAAA,KAACoJ,EAAAA,EAAK,CAAC/I,KAAM,GAAId,UAAU,iBAC3BS,EAAAA,EAAAA,KAAA,QAAMT,UAAU,oBAAmBQ,SAAEkI,EAAakB,uBAEpDnJ,EAAAA,EAAAA,KAAA,KAAGT,UAAU,4BAA2BQ,SAAC,eAI5C6H,EAAKqB,cAAgB,IACpB3J,EAAAA,EAAAA,MAAA,OAAKC,UAAU,2FAA0FQ,SAAA,EACvGT,EAAAA,EAAAA,MAAA,OAAKC,UAAU,gDAA+CQ,SAAA,EAC5DC,EAAAA,EAAAA,KAAC0B,EAAQ,CAACrB,KAAM,GAAId,UAAU,mBAC9BS,EAAAA,EAAAA,KAAA,QAAMT,UAAU,oBAAmBQ,SAAE6H,EAAKqB,oBAE5CjJ,EAAAA,EAAAA,KAAA,KAAGT,UAAU,4BAA2BQ,SAAC,mBAM9CkI,EAAe,IACd3I,EAAAA,EAAAA,MAAA,OAAKC,UAAU,kDAAiDQ,SAAA,CAC7D6H,EAAKM,aAAe,IAAK5I,EAAAA,EAAAA,MAAA,QAAMC,UAAU,4BAA2BQ,SAAA,EAACC,EAAAA,EAAAA,KAAC2B,EAAU,CAACtB,KAAM,GAAId,UAAU,mBAAmB,IAAEqI,EAAKM,aAAaiB,iBAAiB,mBAC7JvB,EAAKO,kBAAoB,IAAK7I,EAAAA,EAAAA,MAAA,QAAMC,UAAU,4BAA2BQ,SAAA,EAACC,EAAAA,EAAAA,KAACqF,EAAAA,EAAG,CAAChF,KAAM,GAAId,UAAU,qBAAqB,IAAEqI,EAAKO,kBAAkBgB,iBAAiB,kBAClKvB,EAAKQ,aAAe,IAAK9I,EAAAA,EAAAA,MAAA,QAAMC,UAAU,4BAA2BQ,SAAA,EAACC,EAAAA,EAAAA,KAACsF,EAAAA,EAAY,CAACjF,KAAM,GAAId,UAAU,sBAAsB,IAAEqI,EAAKQ,aAAae,iBAAiB,mBAGtKlB,EAAe,IACdjI,EAAAA,EAAAA,KAAA,KAAGT,UAAU,iCAAgCQ,SAAC,iCAI/C6H,EAAKyB,cACJrJ,EAAAA,EAAAA,KAAA,KAAGT,UAAU,mEAAkEQ,SAAE6H,EAAKyB,cAIvFzB,EAAK0B,SAASb,OAAS,IACtBzI,EAAAA,EAAAA,KAAA,OAAKT,UAAU,4BAA2BQ,SACvC6H,EAAK0B,SAAS/D,IAAIC,IACjBxF,EAAAA,EAAAA,KAAA,QAAcT,UAAU,0FAAyFQ,SAAEyF,GAAxGA,OAMjBlG,EAAAA,EAAAA,MAAA,OAAKC,UAAU,OAAMQ,SAAA,EACnBC,EAAAA,EAAAA,KAAA,MAAIT,UAAU,oEAAmEQ,SAAC,kBAClFT,EAAAA,EAAAA,MAAA,OAAKC,UAAU,uBAAsBQ,SAAA,EACnCT,EAAAA,EAAAA,MAAA,KAAGsJ,KAAI,0BAAArK,OAA4BqJ,EAAKhI,KAAOiH,OAAO,SAASgC,IAAI,sBACjEtJ,UAAU,oIAAmIQ,SAAA,EAC7IC,EAAAA,EAAAA,KAACuI,EAAAA,EAAQ,CAAClI,KAAM,GAAId,UAAU,mBAC9BS,EAAAA,EAAAA,KAAA,QAAMT,UAAU,sBAAqBQ,SAAC,eACtCC,EAAAA,EAAAA,KAACuB,EAAY,CAAClB,KAAM,GAAId,UAAU,sBAEpCD,EAAAA,EAAAA,MAAA,KAAGsJ,KAAI,8BAAArK,OAAgC8J,GAAWxB,OAAO,SAASgC,IAAI,sBACpEtJ,UAAU,oIAAmIQ,SAAA,EAC7IC,EAAAA,EAAAA,KAAC6B,EAAY,CAACxB,KAAM,GAAId,UAAU,oBAClCS,EAAAA,EAAAA,KAAA,QAAMT,UAAU,qCAAoCQ,SAAC,YACrDC,EAAAA,EAAAA,KAACuB,EAAY,CAAClB,KAAM,GAAId,UAAU,0BAEpCD,EAAAA,EAAAA,MAAA,KAAGsJ,KAAI,gDAAArK,OAAkD8J,GAAWxB,OAAO,SAASgC,IAAI,sBACtFtJ,UAAU,oIAAmIQ,SAAA,EAC7IC,EAAAA,EAAAA,KAAC6B,EAAY,CAACxB,KAAM,GAAId,UAAU,mBAClCS,EAAAA,EAAAA,KAAA,QAAMT,UAAU,sBAAqBQ,SAAC,eACtCC,EAAAA,EAAAA,KAACuB,EAAY,CAAClB,KAAM,GAAId,UAAU,sBAEpCD,EAAAA,EAAAA,MAAA,KAAGsJ,KAAI,sCAAArK,OAAwC8J,GAAWxB,OAAO,SAASgC,IAAI,sBAC5EtJ,UAAU,oIAAmIQ,SAAA,EAC7IC,EAAAA,EAAAA,KAACI,EAAAA,EAAI,CAACC,KAAM,GAAId,UAAU,mBAC1BS,EAAAA,EAAAA,KAAA,QAAMT,UAAU,sBAAqBQ,SAAC,eACtCC,EAAAA,EAAAA,KAACuB,EAAY,CAAClB,KAAM,GAAId,UAAU,2BAMvC,EAACgK,EAAAC,EAAAC,KACA,MAAMC,EAAQ,GAOd,GANI9B,EAAKqB,eAAiB,GAAIS,EAAMC,KAAK,6BAADpL,OAAoBqJ,EAAKqB,cAAa,yDACrErB,EAAKqB,eAAiB,IAAIS,EAAMC,KAAK,6BAADpL,OAAoBqJ,EAAKqB,cAAa,yBAC/ErB,EAAKQ,aAAe,KAAOsB,EAAMC,KAAK,qBAADpL,OAAmD,IAAvCqL,KAAKC,MAAMjC,EAAKQ,aAAe,KAAY,4DAC5FR,EAAKO,kBAAoB,KAAMuB,EAAMC,KAAK,gBAADpL,OAAOqJ,EAAKO,kBAAkBgB,iBAAgB,wCACvFvB,EAAKM,aAAe,KAAOwB,EAAMC,KAAK,0BAADpL,OAAiBqL,KAAKC,MAAMjC,EAAKM,aAAe,KAAK,8CAC1FN,EAAKsB,cAAgB,KAAMQ,EAAMC,KAAK,mBAADpL,OAAeqJ,EAAKsB,cAAcC,iBAAgB,gCAAA5K,OAA+BqJ,EAAKzI,OAAM,SACjIyI,EAAKoB,mBAAoB,CAC3B,MAAMc,EAAYlC,EAAKoB,mBAAmBe,MAAM,SAChD,GAAID,EAAW,CACb,MAAME,GAAM,IAAIC,MAAOC,cAAgBC,SAASL,EAAU,IACtDE,EAAM,IAAKN,EAAMC,KAAK,sCAADpL,OAAwByL,EAAG,sEAC3CA,EAAM,GAAIN,EAAMC,KAAK,+BAADpL,OAAsByL,EAAG,4CAC7CA,GAAO,GAAGN,EAAMC,KAAK,4EAChC,CACF,CAIA,OAHiB,QAAjBJ,EAAI3B,EAAK0B,gBAAQ,IAAAC,GAAbA,EAAea,KAAK5E,GAAKA,EAAErC,cAAcC,SAAS,oBAAoBsG,EAAMC,KAAK,6CACpE,QAAjBH,EAAI5B,EAAK0B,gBAAQ,IAAAE,GAAbA,EAAeY,KAAK5E,GAAKA,EAAErC,cAAcC,SAAS,cAAcsG,EAAMC,KAAK,8CAC/D,QAAZF,EAAA7B,EAAKY,eAAO,IAAAiB,OAAA,EAAZA,EAAchB,QAAS,GAAGiB,EAAMC,KAAK,wCAADpL,OAA+BqJ,EAAKY,QAAQC,OAAM,cACnFiB,EAAMjB,OAAS,GACpBnJ,EAAAA,EAAAA,MAAA,OAAKC,UAAU,OAAMQ,SAAA,EACnBT,EAAAA,EAAAA,MAAA,MAAIC,UAAU,4FAA2FQ,SAAA,EACvGC,EAAAA,EAAAA,KAACiC,EAAS,CAAC5B,KAAM,GAAId,UAAU,cAAc,iBAE/CS,EAAAA,EAAAA,KAAA,OAAKT,UAAU,YAAWQ,SACvB2J,EAAM7K,MAAM,EAAG,GAAG0G,IAAI,CAAC8E,EAAM3B,KAC5BpJ,EAAAA,EAAAA,MAAA,OAAaC,UAAU,yFAAwFQ,SAAA,EAC7GC,EAAAA,EAAAA,KAACsK,EAAAA,EAAQ,CAACjK,KAAM,GAAId,UAAU,sCAC9BS,EAAAA,EAAAA,KAAA,KAAGT,UAAU,wCAAuCQ,SAAEsK,MAF9C3B,SAOd,IACL,EAnCA,IAqCD1I,EAAAA,EAAAA,KAACqD,EAAY,CACXC,QAAS,CAAE1C,gBAAiBgH,EAAKhI,KACjC2D,WAAY,CACV3C,gBAAiBgH,EAAKhI,IACtBb,WAAY,OACZb,MAAO0J,EAAK1J,MACZG,YAAauJ,EAAKvJ,YAClBwC,UAA0B,QAAhB8G,EAAAC,EAAKyB,mBAAW,IAAA1B,OAAA,EAAhBA,EAAkB9I,MAAM,EAAG,OAAQ,GAC7CiC,gBAAiB8G,EAAKzI,kBAOpC,CAiBA,SAASoL,EAAc/M,GAA+B,IAADgN,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAA,IAA7B,UAAEzN,EAAS,GAAEuB,EAAE,SAAEtB,GAAUJ,EACjD,MAAOoK,EAAMC,IAAWnE,EAAAA,EAAAA,UAAS,OAC1BvD,EAASwD,IAAcD,EAAAA,EAAAA,WAAS,IAChC2H,EAAYC,IAAiB5H,EAAAA,EAAAA,UAAS,OACtC6H,EAAeC,IAAoB9H,EAAAA,EAAAA,WAAS,IAC5C+H,EAASC,IAAchI,EAAAA,EAAAA,UAAS,OACzBzF,EAAAA,EAAAA,MAEdqG,EAAAA,EAAAA,WAAU,MACR9D,iBAAuB,IAADmL,EAAAC,EACpBjI,GAAW,GACX2H,EAAc,MACdE,GAAiB,GACjBE,EAAW,MACX,MAAMG,EAAwB,UAAdlO,EAAwBmO,EAAAA,GAAkBC,EAAAA,GACpDjE,QAAe+D,EAAQ3M,GAC7B2I,EAAQC,GACRnE,GAAW,GAEX,MAAMqI,GAA4B,QAAnBL,EAAA7D,EAAOmE,oBAAY,IAAAN,OAAA,EAAnBA,EAAqBO,UAAWpE,EAAOoE,QAChDC,EAAcrE,EAAO3J,MAAQ2J,EAAO5J,MACtC8N,GACFI,EAAAA,EAAAA,IAAeJ,EAAQG,EAAaxO,GACjC0O,KAAKrK,IAAOsJ,EAActJ,GAAIwJ,GAAiB,KAC/CpF,MAAM,IAAMoF,GAAiB,IAEhCA,GAAiB,GAIwB,OAA7B1D,EAAOwE,oBACN,QADgCV,EAC7C9D,EAAO/G,cAAM,IAAA6K,OAAA,EAAbA,EAAexB,KAAKmC,GAAc,KAATA,EAAErN,OAE3BsN,EAAAA,EAAAA,IAAaL,GAAaE,KAAKrK,GAAK0J,EAAW1J,GAEnD,CACAgG,IACC,CAACrK,EAAWuB,IAGf,MAAMuN,IAAU7E,IAAmC,OAA3BA,EAAK0E,oBAAyC,QAAf9B,EAAI5C,EAAK7G,cAAM,IAAAyJ,OAAA,EAAXA,EAAaJ,KAAKmC,GAAc,KAATA,EAAErN,MAC9EwN,GAAWC,EAAAA,EAAAA,IAAqBtB,EAAYI,EAASgB,GAS3D,IANAnI,EAAAA,EAAAA,WAAU,KACQ,MAAZoI,GAAwB,OAAJ9E,QAAI,IAAJA,GAAAA,EAAM1I,KAC5B0N,EAAAA,EAAAA,IAAiBjP,EAAWiK,EAAK1I,GAAIwN,IAEtC,CAACA,EAAc,OAAJ9E,QAAI,IAAJA,OAAI,EAAJA,EAAM1I,GAAIvB,IAEpBwC,EAAS,OAAOH,EAAAA,EAAAA,KAAA,OAAKT,UAAU,4BAA2BQ,UAACC,EAAAA,EAAAA,KAAA,OAAKT,UAAU,iFAC9E,IAAKqI,EAAM,OAAO5H,EAAAA,EAAAA,KAAA,OAAKT,UAAU,kCAAiCQ,UAACC,EAAAA,EAAAA,KAAA,MAAIT,UAAU,UAASQ,SAAC,gBAE3F,MAAM7B,EAAQ0J,EAAK1J,OAAS0J,EAAKzJ,KAC3BK,GAAQoJ,EAAKnJ,cAAgBmJ,EAAKlJ,gBAAkB,IAAIG,MAAM,EAAG,GACjEkC,EAAoB,QAAd0J,EAAG7C,EAAK7G,cAAM,IAAA0J,OAAA,EAAXA,EAAalF,IAAIgH,GAAKA,EAAEpO,MAAM8C,KAAK,MAC5C4L,GAAsC,QAApBnC,EAAA9C,EAAKiF,uBAAe,IAAAnC,GAAS,QAATC,EAApBD,EAAsBoC,eAAO,IAAAnC,OAAT,EAApBA,EAA+B9L,MAAM,EAAG,MAAO,GACjEmN,IAAmB,OAAVX,QAAU,IAAVA,OAAU,EAAVA,EAAYa,WAA4B,QAArBtB,EAAIhD,EAAKqE,oBAAY,IAAArB,OAAA,EAAjBA,EAAmBsB,SAGnDa,IAAmB,QAAZlC,EAAAjD,EAAKoF,eAAO,IAAAnC,OAAA,EAAZA,EAAckC,OAAQ,GAC7BE,GAAYF,GAAKG,OAAOC,GAAe,aAAVA,EAAEC,KAAoBvO,MAAM,EAAG,GAC5DwO,GAAUN,GAAKG,OAAOC,GAAsB,YAAjBA,EAAEG,YAA0BzO,MAAM,EAAG,GAGhE0O,GAAU,CAACC,IACf,MAAMC,IAAmB,QAAXD,EAAA5F,EAAK8F,cAAM,IAAAF,OAAA,EAAXA,EAAaV,UAAW,IAAII,OAAOS,GAAgB,YAAXA,EAAEC,MACxD,OAAOH,EAAKI,KAAKF,GAAgB,YAAXA,EAAE7O,MAAsB6O,EAAExP,KAAKgF,cAAcC,SAAS,cACvEqK,EAAKI,KAAKF,GAAgB,YAAXA,EAAE7O,OACjB2O,EAAKI,KAAKF,GAAgB,WAAXA,EAAE7O,OACjB2O,EAAK,IACL,IACN,EAPe,GAUVK,GAAgC,QAA1BhD,EAAGlD,EAAK,0BAAkB,IAAAkD,OAAA,EAAvBA,EAAyBgC,QAClCiB,IAAkB,OAAND,SAAM,IAANA,QAAM,EAANA,GAAQE,MAAY,OAANF,SAAM,IAANA,QAAM,EAANA,GAAQG,KAAM,KACxCC,IAA8B,OAATH,SAAS,IAATA,QAAS,EAATA,GAAWI,WAAY,GAC5CC,IAAyB,OAATL,SAAS,IAATA,QAAS,EAATA,GAAWM,OAAQ,GACnCC,IAAwB,OAATP,SAAS,IAATA,QAAS,EAATA,GAAWQ,MAAO,GAEvC,OACEjP,EAAAA,EAAAA,MAAA,OAAAS,SAAA,CAEG6H,EAAK4G,gBACJlP,EAAAA,EAAAA,MAAA,OAAKC,UAAU,0DAAyDQ,SAAA,EACtEC,EAAAA,EAAAA,KAAA,OAAKC,IAAG,GAAA1B,OAzmBI,oCAymBcA,OAAGqJ,EAAK4G,eAAiBtO,IAAI,GAAGX,UAAU,2CACpES,EAAAA,EAAAA,KAAA,OAAKT,UAAU,uEAInBD,EAAAA,EAAAA,MAAA,UAAQE,QAASA,IAAM5B,GAAU,GAC/B2B,UAAU,uFAAsFQ,SAAA,EAChGC,EAAAA,EAAAA,KAACsI,EAAAA,EAAS,CAACjI,KAAM,KAAM,YAGzBf,EAAAA,EAAAA,MAAA,OAAKC,UAAU,kCAAiCQ,SAAA,EAE9CT,EAAAA,EAAAA,MAAA,OAAKC,UAAU,sFAAqFQ,SAAA,CACjG6H,EAAKvJ,aACJ2B,EAAAA,EAAAA,KAAA,OAAKC,IAAG,GAAA1B,OAAKiE,GAAQjE,OAAGqJ,EAAKvJ,aAAe6B,IAAKhC,EAC/CqB,UAAU,6EAEZS,EAAAA,EAAAA,KAAA,OAAKT,UAAU,qGAAoGQ,SAAC,eAMtHT,EAAAA,EAAAA,MAAA,OAAKC,UAAU,2EAA0EQ,SAAA,CACtF6H,EAAK6G,UACJnP,EAAAA,EAAAA,MAAA,KAAGC,UAAU,+CAA8CQ,SAAA,CAAC,IAAE6H,EAAK6G,QAAQ,OAI5ExB,GAAUxE,OAAS,IAClBnJ,EAAAA,EAAAA,MAAA,OAAAS,SAAA,EACEC,EAAAA,EAAAA,KAAA,KAAGT,UAAU,0DAAyDQ,SAAC,cACvEC,EAAAA,EAAAA,KAAA,OAAKT,UAAU,YAAWQ,SACvBkN,GAAU1H,IAAI9D,IAAC,IAAAiN,EAAA,OACdpP,EAAAA,EAAAA,MAAA,KAAcsJ,KAAI,mCAAArK,OAAqCqE,mBAAmBnB,EAAEtD,KAAO,eACjF0I,OAAO,SAASgC,IAAI,sBAAsBtJ,UAAU,mGAAkGQ,SAAA,CACrJ0B,EAAEkN,cACD3O,EAAAA,EAAAA,KAAA,OAAKC,IAAG,GAAA1B,OAAKmE,GAAYnE,OAAGkD,EAAEkN,cAAgBzO,IAAKuB,EAAEtD,KACnDoB,UAAU,sHAEZS,EAAAA,EAAAA,KAAA,OAAKT,UAAU,mLAAkLQ,SACxL,QADwL2O,EAC9LjN,EAAEtD,YAAI,IAAAuQ,OAAA,EAANA,EAAQ3F,OAAO,MAGpB/I,EAAAA,EAAAA,KAAA,QAAMT,UAAU,uEAAsEQ,SAAE0B,EAAEtD,SAVpFsD,EAAEvC,WAkBjBmO,GAAQ5E,OAAS,IAChBnJ,EAAAA,EAAAA,MAAA,OAAAS,SAAA,EACEC,EAAAA,EAAAA,KAAA,KAAGT,UAAU,0DAAyDQ,SAAC,YACvEC,EAAAA,EAAAA,KAAA,OAAKT,UAAU,YAAWQ,SACvBsN,GAAQ9H,IAAIqJ,IAAC,IAAAC,EAAA,OACZvP,EAAAA,EAAAA,MAAA,KAAsBsJ,KAAI,mCAAArK,OAAqCqE,mBAAmBgM,EAAEzQ,KAAO,YACzF0I,OAAO,SAASgC,IAAI,sBAAsBtJ,UAAU,mGAAkGQ,SAAA,CACrJ6O,EAAED,cACD3O,EAAAA,EAAAA,KAAA,OAAKC,IAAG,GAAA1B,OAAKmE,GAAYnE,OAAGqQ,EAAED,cAAgBzO,IAAK0O,EAAEzQ,KACnDoB,UAAU,sHAEZS,EAAAA,EAAAA,KAAA,OAAKT,UAAU,mLAAkLQ,SACxL,QADwL8O,EAC9LD,EAAEzQ,YAAI,IAAA0Q,OAAA,EAANA,EAAQ9F,OAAO,MAGpBzJ,EAAAA,EAAAA,MAAA,OAAAS,SAAA,EACEC,EAAAA,EAAAA,KAAA,QAAMT,UAAU,6EAA4EQ,SAAE6O,EAAEzQ,QAChG6B,EAAAA,EAAAA,KAAA,QAAMT,UAAU,4BAA2BQ,SAAE6O,EAAExB,WAZ3CwB,EAAE1P,GAAK0P,EAAExB,aAoBd,OAAV/B,QAAU,IAAVA,OAAU,EAAVA,EAAYyD,SACXxP,EAAAA,EAAAA,MAAA,OAAKC,UAAU,2BAA0BQ,SAAA,EACvCC,EAAAA,EAAAA,KAAC+O,EAAAA,EAAI,CAAC1O,KAAM,GAAId,UAAU,wCAC1BD,EAAAA,EAAAA,MAAA,OAAAS,SAAA,EACEC,EAAAA,EAAAA,KAAA,KAAGT,UAAU,qDAAoDQ,SAAC,WAClEC,EAAAA,EAAAA,KAAA,KAAGT,UAAU,wBAAuBQ,SAAEsL,EAAWyD,eAI5C,OAAVzD,QAAU,IAAVA,OAAU,EAAVA,EAAY2D,UACX1P,EAAAA,EAAAA,MAAA,OAAKC,UAAU,2BAA0BQ,SAAA,EACvCC,EAAAA,EAAAA,KAACiP,EAAAA,EAAK,CAAC5O,KAAM,GAAId,UAAU,yCAC3BD,EAAAA,EAAAA,MAAA,OAAAS,SAAA,EACEC,EAAAA,EAAAA,KAAA,KAAGT,UAAU,qDAAoDQ,SAAC,YAClEC,EAAAA,EAAAA,KAAA,KAAGT,UAAU,wCAAuCQ,SAAEsL,EAAW2D,iBAI3D,OAAV3D,QAAU,IAAVA,OAAU,EAAVA,EAAY6D,YAAatH,EAAKuH,OAAS,GAAKvH,EAAKwH,QAAU,KAC3D9P,EAAAA,EAAAA,MAAA,OAAKC,UAAU,2BAA0BQ,SAAA,EACvCC,EAAAA,EAAAA,KAACkC,EAAU,CAAC7B,KAAM,GAAId,UAAU,4CAChCD,EAAAA,EAAAA,MAAA,OAAAS,SAAA,EACEC,EAAAA,EAAAA,KAAA,KAAGT,UAAU,qDAAoDQ,SAAC,eACjE6H,EAAKuH,OAAS,IAAK7P,EAAAA,EAAAA,MAAA,KAAGC,UAAU,wBAAuBQ,SAAA,CAAC,aAAW6H,EAAKuH,OAAS,KAAK5O,QAAQ,GAAG,QACvF,OAAV8K,QAAU,IAAVA,OAAU,EAAVA,EAAY6D,aAAa5P,EAAAA,EAAAA,MAAA,KAAGC,UAAU,wBAAuBQ,SAAA,CAAC,UAAQsL,EAAW6D,aACjFtH,EAAKwH,QAAU,IAAK9P,EAAAA,EAAAA,MAAA,KAAGC,UAAU,wBAAuBQ,SAAA,CAAC,cAAY6H,EAAKwH,QAAU,KAAK7O,QAAQ,GAAG,cAIhG,OAAV8K,QAAU,IAAVA,OAAU,EAAVA,EAAYgE,WACX/P,EAAAA,EAAAA,MAAA,OAAKC,UAAU,2BAA0BQ,SAAA,EACvCC,EAAAA,EAAAA,KAACuC,EAAK,CAAClC,KAAM,GAAId,UAAU,wCAC3BD,EAAAA,EAAAA,MAAA,OAAAS,SAAA,EACEC,EAAAA,EAAAA,KAAA,KAAGT,UAAU,qDAAoDQ,SAAC,aAClEC,EAAAA,EAAAA,KAAA,KAAGT,UAAU,wBAAuBQ,SAAEsL,EAAWgE,iBAI7B,QAAzBtE,EAAAnD,EAAK0H,4BAAoB,IAAAvE,OAAA,EAAzBA,EAA2BtC,QAAS,IACnCnJ,EAAAA,EAAAA,MAAA,OAAKC,UAAU,2BAA0BQ,SAAA,EACvCC,EAAAA,EAAAA,KAACuP,EAAAA,EAAI,CAAClP,KAAM,GAAId,UAAU,wCAC1BD,EAAAA,EAAAA,MAAA,OAAAS,SAAA,EACEC,EAAAA,EAAAA,KAAA,KAAGT,UAAU,qDAAoDQ,SAAC,YAClEC,EAAAA,EAAAA,KAAA,KAAGT,UAAU,wBAAuBQ,SAAE6H,EAAK0H,qBAAqBzQ,MAAM,EAAG,GAAG0G,IAAI4H,GAAKA,EAAEhP,MAAM8C,KAAK,eAKtGsK,IAAkC,QAArBP,EAAIpD,EAAKqE,oBAAY,IAAAjB,OAAA,EAAjBA,EAAmBkB,WACpClM,EAAAA,EAAAA,KAAA,OAAKT,UAAU,0BAAyBQ,SACrC,CAAC,EAAE,EAAE,GAAGwF,IAAImD,IAAMpJ,EAAAA,EAAAA,MAAA,OAAaC,UAAU,eAAcQ,SAAA,EAACC,EAAAA,EAAAA,KAAA,OAAKT,UAAU,iCAAgCD,EAAAA,EAAAA,MAAA,OAAKC,UAAU,SAAQQ,SAAA,EAACC,EAAAA,EAAAA,KAAA,OAAKT,UAAU,uCAAsCS,EAAAA,EAAAA,KAAA,OAAKT,UAAU,sCAAvKmJ,aAOrCpJ,EAAAA,EAAAA,MAAA,OAAKC,UAAU,iBAAgBQ,SAAA,EAC7BC,EAAAA,EAAAA,KAAA,MAAIT,UAAU,sCAAqCQ,SAAE7B,KAErDoB,EAAAA,EAAAA,MAAA,KAAGC,UAAU,6BAA4BQ,SAAA,CACtCvB,EAAK,IAAEuC,GAAM,QAAAxC,OAASwC,GACtB6G,EAAK4H,SAAO,SAAAjR,OAAUqJ,EAAK4H,QAAO,QAClC5H,EAAK6H,mBAAiB,SAAAlR,OAAUqJ,EAAK6H,kBAAiB,WAAAlR,OAAUqJ,EAAK6H,kBAAoB,EAAI,IAAM,QAItGnQ,EAAAA,EAAAA,MAAA,OAAKC,UAAU,0CAAyCQ,SAAA,CAErD,MACC,MAAM2P,EAAehD,IAAYzN,EAAAA,EAAAA,IAAiBtB,EAAWiK,EAAK1I,MAAQ0I,EAAKvI,aAAeuI,EAAKvI,aAAakB,QAAQ,GAAK,MACvHoP,EAAajD,IAA8BzN,EAAAA,EAAAA,IAAiBtB,EAAWiK,EAAK1I,IAApD,iBAA6E,OAC3G,OAAOwQ,GACLpQ,EAAAA,EAAAA,MAAA,OAAKC,UAAU,kHAAiHQ,SAAA,EAC9HT,EAAAA,EAAAA,MAAA,OAAKC,UAAU,gDAA+CQ,SAAA,EAC5DC,EAAAA,EAAAA,KAACI,EAAAA,EAAI,CAACC,KAAM,GAAId,UAAU,yBAC1BS,EAAAA,EAAAA,KAAA,QAAMT,UAAU,qBAAoBQ,SAAE2P,KACtC1P,EAAAA,EAAAA,KAAA,QAAMT,UAAU,wBAAuBQ,SAAC,aAE1CC,EAAAA,EAAAA,KAAA,KAAGT,UAAU,qDAAoDQ,SAAE4P,OAEnE,IACL,EAbA,IAgBU,OAAVtE,QAAU,IAAVA,OAAU,EAAVA,EAAYuE,QACXtQ,EAAAA,EAAAA,MAAA,KAAGsJ,KAAI,8BAAArK,OAAgCyN,GAAM,KAAKnF,OAAO,SAASgC,IAAI,sBACpEtJ,UAAU,uLAAsLQ,SAAA,EAChMC,EAAAA,EAAAA,KAAA,KAAGT,UAAU,oCAAmCQ,SAAEsL,EAAWuE,KAAKC,SAClEvQ,EAAAA,EAAAA,MAAA,KAAGC,UAAU,0EAAyEQ,SAAA,CAAC,SAAKC,EAAAA,EAAAA,KAACuB,EAAY,CAAClB,KAAM,OAC/GgL,EAAWuE,KAAKE,QACfxQ,EAAAA,EAAAA,MAAA,KAAGC,UAAU,2BAA0BQ,SAAA,CAAEsL,EAAWuE,KAAKE,MAAM,gBAM1D,OAAVzE,QAAU,IAAVA,OAAU,EAAVA,EAAY0E,MACXzQ,EAAAA,EAAAA,MAAA,KAAGsJ,KAAI,gDAAArK,OAAkDqE,mBAAmB1E,IAAU2I,OAAO,SAASgC,IAAI,sBACxGtJ,UAAU,+KAA8KQ,SAAA,EACxLC,EAAAA,EAAAA,KAAA,KAAGT,UAAU,qBAAoBQ,UAC/BT,EAAAA,EAAAA,MAAA,QAAMC,UAAW4K,SAASkB,EAAW0E,GAAGF,QAAU,GAAK,eAAiB,iBAAiB9P,SAAA,CAAC,gBACpFsL,EAAW0E,GAAGF,YAGtBvQ,EAAAA,EAAAA,MAAA,KAAGC,UAAU,0EAAyEQ,SAAA,CAAC,oBAAgBC,EAAAA,EAAAA,KAACuB,EAAY,CAAClB,KAAM,UAK9HkL,KAA4B,OAAVF,QAAU,IAAVA,GAAAA,EAAYuE,OAAQhI,EAAKvI,aAAe,IACzDC,EAAAA,EAAAA,MAAA,KAAGsJ,KAAI,8BAAArK,OAAgCZ,EAAS,KAAAY,OAAIqJ,EAAK1I,IAAM2H,OAAO,SAASgC,IAAI,sBACjFtJ,UAAU,uLAAsLQ,SAAA,EAChMC,EAAAA,EAAAA,KAAA,KAAGT,UAAU,oCAAmCQ,SAAE6H,EAAKvI,aAAakB,QAAQ,MAC5EjB,EAAAA,EAAAA,MAAA,KAAGC,UAAU,0EAAyEQ,SAAA,CAAC,SAAKC,EAAAA,EAAAA,KAACuB,EAAY,CAAClB,KAAM,OAC/GuH,EAAKoI,aACJ1Q,EAAAA,EAAAA,MAAA,KAAGC,UAAU,2BAA0BQ,SAAA,CAAE6H,EAAKoI,WAAW7G,iBAAiB,eAM/EsD,IAAkB,OAAPhB,QAAO,IAAPA,OAAO,EAAPA,EAASoE,SACnBvQ,EAAAA,EAAAA,MAAA,KAAGsJ,KAAM6C,EAAQwE,IAAKpJ,OAAO,SAASgC,IAAI,sBACxCtJ,UAAU,gKAA+JQ,SAAA,EACzKC,EAAAA,EAAAA,KAAA,KAAGT,UAAU,oCAAmCQ,SAAE0L,EAAQoE,SAC1DvQ,EAAAA,EAAAA,MAAA,KAAGC,UAAU,0EAAyEQ,SAAA,CAAC,QAAIC,EAAAA,EAAAA,KAACuB,EAAY,CAAClB,KAAM,OAC9GoL,EAAQyE,YACP5Q,EAAAA,EAAAA,MAAA,KAAGC,UAAU,2BAA0BQ,SAAA,CAAE0L,EAAQyE,UAAU/G,iBAAiB,eAMjFsD,IACCnN,EAAAA,EAAAA,MAAA,KAAGsJ,KAAI,wCAAArK,OAA0CqE,mBAAmB1E,IAAU2I,OAAO,SAASgC,IAAI,sBAChGtJ,UAAU,gKAA+JQ,SAAA,EACzKC,EAAAA,EAAAA,KAAA,KAAGT,UAAU,oCAAmCQ,SAAC,QACjDT,EAAAA,EAAAA,MAAA,KAAGC,UAAU,0EAAyEQ,SAAA,CAAC,gBAAYC,EAAAA,EAAAA,KAACuB,EAAY,CAAClB,KAAM,WAKzHkL,IAAkC,QAArBN,EAAIrD,EAAKqE,oBAAY,IAAAhB,OAAA,EAAjBA,EAAmBiB,WACpC5M,EAAAA,EAAAA,MAAA,OAAKC,UAAU,sIAAqIQ,SAAA,EAClJC,EAAAA,EAAAA,KAAA,OAAKT,UAAU,+CACfS,EAAAA,EAAAA,KAAA,OAAKT,UAAU,+CAKrBS,EAAAA,EAAAA,KAAA,KAAGT,UAAU,+CAA8CQ,SAAE6H,EAAK/G,WAGjE0M,KACCjO,EAAAA,EAAAA,MAAA,OAAKC,UAAU,OAAMQ,SAAA,EACnBT,EAAAA,EAAAA,MAAA,MAAIC,UAAU,4FAA2FQ,SAAA,EACvGC,EAAAA,EAAAA,KAACmQ,EAAAA,EAAI,CAAC9P,KAAM,KAAM,eAEpBL,EAAAA,EAAAA,KAAA,OAAKT,UAAU,2GAA0GQ,UACvHC,EAAAA,EAAAA,KAAA,UACEC,IAAG,iCAAA1B,OAAmCgP,GAAQ3N,IAAG,2BACjD1B,MAAOqP,GAAQpP,KACfiS,MAAM,2FACNC,iBAAe,EACf9Q,UAAU,sCAGdS,EAAAA,EAAAA,KAAA,KAAGT,UAAU,iCAAgCQ,SAAEwN,GAAQpP,WAK9C,QAAZ+M,EAAAtD,EAAKoF,eAAO,IAAA9B,GAAM,QAANC,EAAZD,EAAcoF,YAAI,IAAAnF,OAAN,EAAZA,EAAoB1C,QAAS,IAC5BnJ,EAAAA,EAAAA,MAAA,OAAKC,UAAU,OAAMQ,SAAA,EACnBC,EAAAA,EAAAA,KAAA,MAAIT,UAAU,oEAAmEQ,SAAC,UAClFC,EAAAA,EAAAA,KAAA,OAAKT,UAAU,iDAAgDQ,SAC5D6H,EAAKoF,QAAQsD,KAAKzR,MAAM,EAAG,IAAI0G,IAAIgL,IAAK,IAAAC,EAAA,OACvClR,EAAAA,EAAAA,MAAA,KAEEsJ,KAAI,mCAAArK,OAAqCqE,mBAAmB2N,EAAMpS,KAAO,WACzE0I,OAAO,SACPgC,IAAI,sBACJtJ,UAAU,iDAAgDQ,SAAA,CAEzDwQ,EAAM5B,cACL3O,EAAAA,EAAAA,KAAA,OACEC,IAAG,GAAA1B,OAAKmE,GAAYnE,OAAGgS,EAAM5B,cAC7BzO,IAAKqQ,EAAMpS,KACXoB,UAAU,mIAGZS,EAAAA,EAAAA,KAAA,OAAKT,UAAU,gMAA+LQ,SACjM,QADiMyQ,EAC3MD,EAAMpS,YAAI,IAAAqS,OAAA,EAAVA,EAAYzH,OAAO,MAGxB/I,EAAAA,EAAAA,KAAA,KAAGT,UAAU,oFAAmFQ,SAAEwQ,EAAMpS,QACxG6B,EAAAA,EAAAA,KAAA,KAAGT,UAAU,qCAAoCQ,SAAEwQ,EAAME,cAlBpDF,EAAMrR,YA0BnBgP,GAAmBzF,OAAS,GAAK2F,GAAc3F,OAAS,GAAK6F,GAAa7F,OAAS,KACnFnJ,EAAAA,EAAAA,MAAA,OAAKC,UAAU,OAAMQ,SAAA,EACnBC,EAAAA,EAAAA,KAAA,MAAIT,UAAU,oEAAmEQ,SAAC,oBAClFT,EAAAA,EAAAA,MAAA,OAAKC,UAAU,YAAWQ,SAAA,CACvBmO,GAAmBzF,OAAS,IAC3BnJ,EAAAA,EAAAA,MAAA,OAAAS,SAAA,EACEC,EAAAA,EAAAA,KAAA,KAAGT,UAAU,6CAA4CQ,SAAC,YAC1DC,EAAAA,EAAAA,KAAA,OAAKT,UAAU,uBAAsBQ,SAClCmO,GAAmB3I,IAAImL,IACtBpR,EAAAA,EAAAA,MAAA,KAAuBsJ,KAAM/F,EAAe6N,EAAEC,cAAezS,EAAgB,OAAT6P,SAAS,IAATA,QAAS,EAATA,GAAW6C,MAAO/J,OAAO,SAASgC,IAAI,sBACxGtJ,UAAU,kIAAiIQ,SAAA,CAC1I2Q,EAAEG,YAAa7Q,EAAAA,EAAAA,KAAA,OAAKC,IAAG,GAAA1B,OAAKkE,GAASlE,OAAGmS,EAAEG,WAAa3Q,IAAI,GAAGX,UAAU,kCACzES,EAAAA,EAAAA,KAAA,QAAMT,UAAU,sBAAqBQ,SAAE2Q,EAAEC,iBACzC3Q,EAAAA,EAAAA,KAACuB,EAAY,CAAClB,KAAM,EAAGd,UAAU,oBAJ3BmR,EAAEI,mBAUjB1C,GAAc3F,OAAS,IACtBnJ,EAAAA,EAAAA,MAAA,OAAAS,SAAA,EACEC,EAAAA,EAAAA,KAAA,KAAGT,UAAU,6CAA4CQ,SAAC,UAC1DC,EAAAA,EAAAA,KAAA,OAAKT,UAAU,uBAAsBQ,SAClCqO,GAAcvP,MAAM,EAAG,GAAG0G,IAAImL,IAC7BpR,EAAAA,EAAAA,MAAA,KAAuBsJ,KAAM/F,EAAe6N,EAAEC,cAAezS,EAAgB,OAAT6P,SAAS,IAATA,QAAS,EAATA,GAAW6C,MAAO/J,OAAO,SAASgC,IAAI,sBACxGtJ,UAAU,kIAAiIQ,SAAA,CAC1I2Q,EAAEG,YAAa7Q,EAAAA,EAAAA,KAAA,OAAKC,IAAG,GAAA1B,OAAKkE,GAASlE,OAAGmS,EAAEG,WAAa3Q,IAAI,GAAGX,UAAU,kCACzES,EAAAA,EAAAA,KAAA,QAAMT,UAAU,wBAAuBQ,SAAE2Q,EAAEC,kBAHrCD,EAAEI,mBASjBxC,GAAa7F,OAAS,IACrBnJ,EAAAA,EAAAA,MAAA,OAAAS,SAAA,EACEC,EAAAA,EAAAA,KAAA,KAAGT,UAAU,6CAA4CQ,SAAC,SAC1DC,EAAAA,EAAAA,KAAA,OAAKT,UAAU,uBAAsBQ,SAClCuO,GAAazP,MAAM,EAAG,GAAG0G,IAAImL,IAC5BpR,EAAAA,EAAAA,MAAA,KAAuBsJ,KAAM/F,EAAe6N,EAAEC,cAAezS,EAAgB,OAAT6P,SAAS,IAATA,QAAS,EAATA,GAAW6C,MAAO/J,OAAO,SAASgC,IAAI,sBACxGtJ,UAAU,kIAAiIQ,SAAA,CAC1I2Q,EAAEG,YAAa7Q,EAAAA,EAAAA,KAAA,OAAKC,IAAG,GAAA1B,OAAKkE,GAASlE,OAAGmS,EAAEG,WAAa3Q,IAAI,GAAGX,UAAU,kCACzES,EAAAA,EAAAA,KAAA,QAAMT,UAAU,wBAAuBQ,SAAE2Q,EAAEC,kBAHrCD,EAAEI,yBAevB,CAACC,IACA,MAAMrH,EAAQ,GACRsH,EAAc7G,UAAUvC,EAAKnJ,cAAgBmJ,EAAKlJ,gBAAkB,IAAIG,MAAM,EAAG,IACjFmL,EAAMgH,GAAc,IAAI/G,MAAOC,cAAgB8G,EAAc,EAGnE,GAAIpJ,EAAKuH,OAAS,GAAKvH,EAAKwH,QAAU,EAAG,CACvC,MAAM6B,GAASrJ,EAAKwH,QAAUxH,EAAKuH,QAAQ5O,QAAQ,GAC/CqH,EAAKwH,QAAwB,GAAdxH,EAAKuH,OAAazF,EAAMC,KAAK,qBAADpL,OAAY0S,EAAK,iCAAA1S,QAA4BqJ,EAAKwH,QAAU,KAAK7O,QAAQ,GAAE,cAAAhC,QAAcqJ,EAAKuH,OAAS,KAAK5O,QAAQ,GAAE,cAC5JqH,EAAKwH,QAAwB,EAAdxH,EAAKuH,OAAYzF,EAAMC,KAAK,wBAADpL,QAAgBqJ,EAAKwH,QAAU,KAAK7O,QAAQ,GAAE,iBAAAhC,QAAiBqJ,EAAKuH,OAAS,KAAK5O,QAAQ,GAAE,sBAAAhC,OAAgB0S,EAAK,cAC3JrJ,EAAKwH,QAAUxH,EAAKuH,QAAQzF,EAAMC,KAAK,6BAADpL,QAAqBqJ,EAAKwH,QAAU,KAAK7O,QAAQ,GAAE,iBAAAhC,QAAiBqJ,EAAKuH,OAAS,KAAK5O,QAAQ,GAAE,gDAClJ,MAAWqH,EAAKuH,OAAS,KACvBzF,EAAMC,KAAK,+BAADpL,QAAuBqJ,EAAKuH,OAAS,KAAK5O,QAAQ,GAAE,yBAIhE,GAAc,OAAV8K,QAAU,IAAVA,GAAAA,EAAY2D,OAAQ,CACtB,MAAMkC,EAAS7F,EAAW2D,OAAOjF,MAAM,mBACjCoH,EAAO9F,EAAW2D,OAAOjF,MAAM,6BACjCmH,EAAQxH,EAAMC,KAAK,oBAADpL,OAAW2S,EAAO,GAAE,kBAAA3S,OAAiB4L,SAAS+G,EAAO,IAAM,EAAI,IAAM,GAAE,MACpFC,EAAMzH,EAAMC,KAAK,oCAADpL,OAAsB4S,EAAK,GAAE,kBAAA5S,OAAiB4L,SAASgH,EAAK,IAAM,EAAI,IAAM,GAAE,MAC9F9F,EAAW2D,OAAO5L,SAAS,QAAQsG,EAAMC,KAAK,gBAADpL,OAAO8M,EAAW2D,QAC1E,CAqBA,GAlBIhF,EAAM,GAAIN,EAAMC,KAAK,+BAADpL,OAAiByL,EAAG,wDACnCA,EAAM,GAAIN,EAAMC,KAAK,qBAADpL,OAAYyL,EAAG,0CACnCA,GAAO,GAAKgH,GAAatH,EAAMC,KAAK,mCAADpL,OAA+ByS,EAAW,MAGlFpJ,EAAKoI,WAAa,IAAOtG,EAAMC,KAAK,8BAADpL,OAAqBqL,KAAKC,MAAMjC,EAAKoI,WAAa,KAAK,6DACrFpI,EAAKoI,WAAa,KAAMtG,EAAMC,KAAK,mBAADpL,OAAeqJ,EAAKoI,WAAW7G,iBAAgB,oBAGtFvB,EAAK4H,QAAU,IAAK9F,EAAMC,KAAK,mBAADpL,OAAUqJ,EAAK4H,QAAO,+DAC/C5H,EAAK4H,SAAW5H,EAAK4H,QAAU,IAAI9F,EAAMC,KAAK,kBAADpL,OAAcqJ,EAAK4H,QAAO,gDAG5E5H,EAAK6H,kBAAoB,GAAI/F,EAAMC,KAAK,+CAADpL,OAAsCqJ,EAAK6H,kBAAiB,iBAAAlR,OAAgBqJ,EAAKwJ,oBAAsB,OAAM,eACpH,IAA3BxJ,EAAK6H,mBAA2C,UAAhB7H,EAAK9D,QAAoB4F,EAAMC,KAAK,gEAADpL,OAAkDqJ,EAAKwJ,oBAAsB,QAAO,eAC5JxJ,EAAKwJ,mBAAqB,KAAK1H,EAAMC,KAAK,qBAADpL,OAAYqJ,EAAKwJ,mBAAkB,0BAG5ExJ,EAAK0E,mBAAgD,OAA3B1E,EAAK0E,kBAA4B,CAC7D,MACM+E,EADY,CAAEC,GAAI,WAAYC,GAAI,SAAUC,GAAI,SAAUC,GAAI,UAAWC,GAAI,SAAUC,GAAI,UAAWC,GAAI,aAAcC,GAAI,UAAWC,GAAI,QAASC,GAAI,SAAUC,GAAI,UAAWC,GAAI,UAAWC,GAAI,SAAUC,GAAI,OAAQC,GAAI,UAAWC,GAAI,SAAUC,GAAI,QAASC,GAAI,WACvP3K,EAAK0E,oBAAsB1E,EAAK0E,kBAAkBkG,cACzE9I,EAAMC,KAAK,uCAADpL,OAA8B8S,EAAI,KAC9C,CAKA,OAF6B,QAAzBN,EAAAnJ,EAAK0H,4BAAoB,IAAAyB,OAAA,EAAzBA,EAA2BtI,QAAS,GAAGiB,EAAMC,KAAK,2CAADpL,OAAkCqJ,EAAK0H,qBAAqB7G,OAAM,cAEhHiB,EAAMjB,OAAS,GACpBnJ,EAAAA,EAAAA,MAAA,OAAKC,UAAU,OAAMQ,SAAA,EACnBT,EAAAA,EAAAA,MAAA,MAAIC,UAAU,4FAA2FQ,SAAA,EACvGC,EAAAA,EAAAA,KAACiC,EAAS,CAAC5B,KAAM,GAAId,UAAU,cAAc,iBAE/CS,EAAAA,EAAAA,KAAA,OAAKT,UAAU,YAAWQ,SACvB2J,EAAM7K,MAAM,EAAG,GAAG0G,IAAI,CAAC8E,EAAM3B,KAC5BpJ,EAAAA,EAAAA,MAAA,OAAaC,UAAU,yFAAwFQ,SAAA,EAC7GC,EAAAA,EAAAA,KAACsK,EAAAA,EAAQ,CAACjK,KAAM,GAAId,UAAU,sCAC9BS,EAAAA,EAAAA,KAAA,KAAGT,UAAU,wCAAuCQ,SAAEsK,MAF9C3B,SAOd,IACL,EAnEA,IAqED1I,EAAAA,EAAAA,KAACqD,EAAY,CACXC,QAAS,CAAExD,QAAS8H,EAAK1I,IACzBqE,WAAY,CACVzD,QAAS8H,EAAK1I,GACdH,WAAYpB,EACZO,MAAO0J,EAAK1J,OAAS0J,EAAKzJ,KAC1BE,YAAauJ,EAAKvJ,YAAW,GAAAE,OAAMiE,GAAQjE,OAAGqJ,EAAKvJ,aAAgB,KACnEwC,SAAU+G,EAAK/G,SACfC,gBAAiB4L,EAAW9F,WAAW8F,GAAY9E,EAAKvI,aACxD0B,OAAmB,QAAbqK,EAAExD,EAAK7G,cAAM,IAAAqK,OAAA,EAAXA,EAAa7F,IAAIgH,GAAKA,EAAEpO,MAAM8C,KAAK,MAC3CxC,aAAcmJ,EAAKnJ,cAAgBmJ,EAAKlJ,wBAO/CmO,EAAgBpE,OAAS,IACxBnJ,EAAAA,EAAAA,MAAA,OAAKC,UAAU,QAAOQ,SAAA,EACpBC,EAAAA,EAAAA,KAAA,MAAIT,UAAU,yBAAwBQ,SAAC,yBACvCC,EAAAA,EAAAA,KAAA,OAAKT,UAAU,sEAAqEQ,SACjF8M,EAAgBtH,IAAIvD,IACnBhC,EAAAA,EAAAA,KAAC3C,EAAAA,EAAS,CAAYK,KAAMsE,EAAGrE,UAAWA,GAA1BqE,EAAE9C,YAOhC,CAEA,QArhBA,WACE,MAAM,UAAEvB,EAAS,GAAEuB,IAAOuT,EAAAA,EAAAA,KACpB7U,GAAWC,EAAAA,EAAAA,MAGjB,MAAkB,SAAdF,GACKqC,EAAAA,EAAAA,KAACyH,EAAW,CAAC9H,QAAST,EAAItB,SAAUA,KAGtCoC,EAAAA,EAAAA,KAACuK,EAAc,CAAC5M,UAAWA,EAAWuB,GAAIA,EAAItB,SAAUA,GACjE,C,+BC7gBM,MAAA0K,GAAY9G,E,QAAAA,GAAiB,YAAa,CAC9C,CAAC,OAAQ,CAAEC,EAAG,iBAAkB7B,IAAK,WACrC,CAAC,OAAQ,CAAE6B,EAAG,WAAY7B,IAAK,Y,+BCF3B,MAAAqP,GAAQzN,E,QAAAA,GAAiB,QAAS,CACtC,CACE,OACA,CACEC,EAAG,yHACH7B,IAAK,WAGT,CAAC,SAAU,CAAEkC,GAAI,KAAMC,GAAI,IAAKC,EAAG,IAAKpC,IAAK,Y,+BCR/C,MAAMiF,GAAQrD,E,QAAAA,GAAiB,QAAS,CAAC,CAAC,OAAQ,CAAEC,EAAG,kBAAmB7B,IAAK,Y,+BCAzE,MAAAsF,GAAQ1D,E,QAAAA,GAAiB,QAAS,CACtC,CAAC,SAAU,CAAEM,GAAI,KAAMC,GAAI,KAAMC,EAAG,KAAMpC,IAAK,WAC/C,CAAC,WAAY,CAAEgC,OAAQ,mBAAoBhC,IAAK,Y,+BCF5C,MAAAyF,GAAM7D,E,QAAAA,GAAiB,MAAO,CAClC,CAAC,OAAQ,CAAEC,EAAG,+CAAgD7B,IAAK,WACnE,CAAC,SAAU,CAAEkC,GAAI,KAAMC,GAAI,KAAMC,EAAG,IAAKpC,IAAK,Y,+BCF1C,MAAAuQ,GAAO3O,E,QAAAA,GAAiB,OAAQ,CACpC,CAAC,UAAW,CAAEI,OAAQ,qBAAsBhC,IAAK,Y,+BCD7C,MAAAwB,GAAOI,E,QAAAA,GAAiB,OAAQ,CACpC,CAAC,OAAQ,CAAEC,EAAG,WAAY7B,IAAK,WAC/B,CAAC,OAAQ,CAAE6B,EAAG,WAAY7B,IAAK,Y,+BCF3B,MAAA0K,GAAW9I,E,QAAAA,GAAiB,WAAY,CAC5C,CACE,OACA,CACEC,EAAG,8PACH7B,IAAK,WAGT,CAAC,OAAQ,CAAE6B,EAAG,UAAW7B,IAAK,WAC9B,CAAC,OAAQ,CAAE6B,EAAG,WAAY7B,IAAK,WAC/B,CAAC,OAAQ,CAAE6B,EAAG,UAAW7B,IAAK,WAC9B,CAAC,OAAQ,CAAE6B,EAAG,UAAW7B,IAAK,Y,+BCX1B,MAAAoF,GAASxD,E,QAAAA,GAAiB,SAAU,CACxC,CAAC,OAAQ,CAAEC,EAAG,UAAW7B,IAAK,WAC9B,CAAC,OAAQ,CAAE6B,EAAG,wCAAyC7B,IAAK,WAC5D,CAAC,OAAQ,CAAE6B,EAAG,qCAAsC7B,IAAK,WACzD,CAAC,OAAQ,CAAEuC,GAAI,KAAMC,GAAI,KAAMC,GAAI,KAAMC,GAAI,KAAM1C,IAAK,WACxD,CAAC,OAAQ,CAAEuC,GAAI,KAAMC,GAAI,KAAMC,GAAI,KAAMC,GAAI,KAAM1C,IAAK,W","sources":["components/MediaCard.jsx","../node_modules/lucide-react/src/icons/external-link.ts","../node_modules/lucide-react/src/icons/book-copy.ts","../node_modules/lucide-react/src/icons/book-marked.ts","../node_modules/lucide-react/src/icons/shopping-cart.ts","../node_modules/lucide-react/src/icons/lightbulb.ts","../node_modules/lucide-react/src/icons/dollar-sign.ts","../node_modules/lucide-react/src/icons/globe.ts","pages/Details.jsx","../node_modules/lucide-react/src/icons/arrow-left.ts","../node_modules/lucide-react/src/icons/award.ts","../node_modules/lucide-react/src/icons/check.ts","../node_modules/lucide-react/src/icons/clock.ts","../node_modules/lucide-react/src/icons/eye.ts","../node_modules/lucide-react/src/icons/play.ts","../node_modules/lucide-react/src/icons/plus.ts","../node_modules/lucide-react/src/icons/sparkles.ts","../node_modules/lucide-react/src/icons/trash-2.ts"],"sourcesContent":["import React from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { Plus, Star } from 'lucide-react';\nimport { addToLibrary, getSyllabusScore } from '../services/api';\nimport { useAuth } from '../context/AuthContext';\nimport { useToast } from '../context/ToastContext';\n\nconst TMDB_IMG = 'https://image.tmdb.org/t/p/w342';\n\nfunction MediaCard({ item, mediaType = 'movie' }) {\n  const navigate = useNavigate();\n  const { user } = useAuth();\n  const toast = useToast();\n\n  const title = item.title || item.name;\n  const poster = item.poster_path\n    ? (item.poster_path.startsWith('http') ? item.poster_path : `${TMDB_IMG}${item.poster_path}`)\n    : null;\n  const year = (item.release_date || item.first_air_date || item.first_publish_year || '').toString().slice(0, 4);\n  const type = item.media_type || mediaType;\n\n  // Prefer: unified_rating (from enrichment) → stored Syllabus Score → TMDB vote_average → book rating\n  const storedScore = type !== 'book' ? getSyllabusScore(type, item.id) : null;\n  const rating = item.unified_rating ?? storedScore ?? item.vote_average ?? item.rating;\n\n  const handleClick = () => {\n    if (type === 'book') {\n      const workKey = item.key?.replace('/works/', '') || '';\n      if (workKey) navigate(`/details/book/${workKey}`);\n      return;\n    }\n    const id = item.id || item.tmdb_id;\n    navigate(`/details/${type}/${id}`);\n  };\n\n  const handleAdd = async (e) => {\n    e.stopPropagation();\n    if (!user) return toast('Please log in first', 'error');\n    try {\n      await addToLibrary({\n        tmdb_id: type !== 'book' ? item.id : null,\n        openlibrary_key: type === 'book' ? item.key : null,\n        media_type: type,\n        title,\n        poster_path: poster,\n        overview: item.overview || '',\n        external_rating: rating || null,\n        genres: item.genre_ids ? item.genre_ids.join(',') : '',\n        release_date: item.release_date || item.first_air_date || '',\n      });\n      toast(`Added \"${title}\" to your library!`, 'success');\n    } catch (err) {\n      toast(err?.message === 'Already in your library' ? `\"${title}\" is already in your library` : 'Could not add to library', 'error');\n    }\n  };\n\n  return (\n    <div\n      className=\"group relative rounded-2xl overflow-hidden bg-dark-700/50 border border-white/5 cursor-pointer transition-all duration-300 hover:-translate-y-1.5 hover:shadow-[0_8px_30px_rgba(233,69,96,0.12)] hover:border-white/10\"\n      onClick={handleClick}\n    >\n      {poster ? (\n        <img src={poster} alt={title} loading=\"lazy\" className=\"w-full aspect-[2/3] object-cover\" />\n      ) : (\n        <div className=\"w-full aspect-[2/3] bg-dark-600 flex items-center justify-center text-white/30 text-xs p-4 text-center\">\n          {title}\n        </div>\n      )}\n\n      {rating > 0 && (\n        <div className=\"absolute top-3 right-3 bg-black/70 backdrop-blur-md rounded-lg px-2 py-1 flex items-center gap-1 text-xs font-semibold\">\n          <Star size={11} className=\"text-gold fill-gold\" />\n          {Number(rating).toFixed(1)}\n        </div>\n      )}\n\n      <button\n        onClick={handleAdd}\n        title=\"Add to library\"\n        className=\"absolute bottom-16 right-3 w-9 h-9 rounded-full bg-accent text-white flex items-center justify-center opacity-0 scale-75 group-hover:opacity-100 group-hover:scale-100 transition-all duration-200 hover:bg-accent-hover\"\n      >\n        <Plus size={18} />\n      </button>\n\n      <div className=\"p-3\">\n        <p className=\"text-sm font-semibold truncate\">{title}</p>\n        <p className=\"text-xs text-white/40 mt-1\">\n          {year}{type === 'book' && item.author ? ` · ${item.author}` : ''}\n        </p>\n      </div>\n    </div>\n  );\n}\n\nexport default React.memo(MediaCard);\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name ExternalLink\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTUgM2g2djYiIC8+CiAgPHBhdGggZD0iTTEwIDE0IDIxIDMiIC8+CiAgPHBhdGggZD0iTTE4IDEzdjZhMiAyIDAgMCAxLTIgMkg1YTIgMiAwIDAgMS0yLTJWOGEyIDIgMCAwIDEgMi0yaDYiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/external-link\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ExternalLink = createLucideIcon('ExternalLink', [\n  ['path', { d: 'M15 3h6v6', key: '1q9fwt' }],\n  ['path', { d: 'M10 14 21 3', key: 'gplh6r' }],\n  ['path', { d: 'M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6', key: 'a6xqqp' }],\n]);\n\nexport default ExternalLink;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name BookCopy\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMiAxNlY0YTIgMiAwIDAgMSAyLTJoMTEiIC8+CiAgPHBhdGggZD0iTTUgMTRINGEyIDIgMCAxIDAgMCA0aDEiIC8+CiAgPHBhdGggZD0iTTIyIDE4SDExYTIgMiAwIDEgMCAwIDRoMTFWNkgxMWEyIDIgMCAwIDAtMiAydjEyIiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/book-copy\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst BookCopy = createLucideIcon('BookCopy', [\n  ['path', { d: 'M2 16V4a2 2 0 0 1 2-2h11', key: 'spzkk5' }],\n  ['path', { d: 'M5 14H4a2 2 0 1 0 0 4h1', key: '16gqf9' }],\n  ['path', { d: 'M22 18H11a2 2 0 1 0 0 4h11V6H11a2 2 0 0 0-2 2v12', key: '1owzki' }],\n]);\n\nexport default BookCopy;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name BookMarked\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNNCAxOS41di0xNUEyLjUgMi41IDAgMCAxIDYuNSAySDIwdjIwSDYuNWEyLjUgMi41IDAgMCAxIDAtNUgyMCIgLz4KICA8cG9seWxpbmUgcG9pbnRzPSIxMCAyIDEwIDEwIDEzIDcgMTYgMTAgMTYgMiIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/book-marked\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst BookMarked = createLucideIcon('BookMarked', [\n  ['path', { d: 'M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20', key: 't4utmx' }],\n  ['polyline', { points: '10 2 10 10 13 7 16 10 16 2', key: '13o6vz' }],\n]);\n\nexport default BookMarked;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name ShoppingCart\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8Y2lyY2xlIGN4PSI4IiBjeT0iMjEiIHI9IjEiIC8+CiAgPGNpcmNsZSBjeD0iMTkiIGN5PSIyMSIgcj0iMSIgLz4KICA8cGF0aCBkPSJNMi4wNSAyLjA1aDJsMi42NiAxMi40MmEyIDIgMCAwIDAgMiAxLjU4aDkuNzhhMiAyIDAgMCAwIDEuOTUtMS41N2wxLjY1LTcuNDNINS4xMiIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/shopping-cart\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ShoppingCart = createLucideIcon('ShoppingCart', [\n  ['circle', { cx: '8', cy: '21', r: '1', key: 'jimo8o' }],\n  ['circle', { cx: '19', cy: '21', r: '1', key: '13723u' }],\n  [\n    'path',\n    {\n      d: 'M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12',\n      key: '9zh506',\n    },\n  ],\n]);\n\nexport default ShoppingCart;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Lightbulb\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTUgMTRjLjItMSAuNy0xLjcgMS41LTIuNSAxLS45IDEuNS0yLjIgMS41LTMuNUE2IDYgMCAwIDAgNiA4YzAgMSAuMiAyLjIgMS41IDMuNS43LjcgMS4zIDEuNSAxLjUgMi41IiAvPgogIDxwYXRoIGQ9Ik05IDE4aDYiIC8+CiAgPHBhdGggZD0iTTEwIDIyaDQiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/lightbulb\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Lightbulb = createLucideIcon('Lightbulb', [\n  [\n    'path',\n    {\n      d: 'M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5',\n      key: '1gvzjb',\n    },\n  ],\n  ['path', { d: 'M9 18h6', key: 'x1upvd' }],\n  ['path', { d: 'M10 22h4', key: 'ceow96' }],\n]);\n\nexport default Lightbulb;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name DollarSign\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8bGluZSB4MT0iMTIiIHgyPSIxMiIgeTE9IjIiIHkyPSIyMiIgLz4KICA8cGF0aCBkPSJNMTcgNUg5LjVhMy41IDMuNSAwIDAgMCAwIDdoNWEzLjUgMy41IDAgMCAxIDAgN0g2IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/dollar-sign\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst DollarSign = createLucideIcon('DollarSign', [\n  ['line', { x1: '12', x2: '12', y1: '2', y2: '22', key: '7eqyqh' }],\n  ['path', { d: 'M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6', key: '1b0p4s' }],\n]);\n\nexport default DollarSign;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Globe\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMCIgLz4KICA8cGF0aCBkPSJNMTIgMmExNC41IDE0LjUgMCAwIDAgMCAyMCAxNC41IDE0LjUgMCAwIDAgMC0yMCIgLz4KICA8cGF0aCBkPSJNMiAxMmgyMCIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/globe\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Globe = createLucideIcon('Globe', [\n  ['circle', { cx: '12', cy: '12', r: '10', key: '1mglay' }],\n  ['path', { d: 'M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20', key: '13o1zl' }],\n  ['path', { d: 'M2 12h20', key: '9i4pu4' }],\n]);\n\nexport default Globe;\n","import React, { useEffect, useState } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { Star, ArrowLeft, Plus, Check, ExternalLink, BookOpen, Users, BookCopy, ShoppingCart, BookMarked, Eye, CheckCircle2, Play, Award, Clapperboard, PenLine, DollarSign, Globe, Film, Info, Clock, Trash2, MessageSquare, X, Sparkles, Lightbulb } from 'lucide-react';\nimport MediaCard from '../components/MediaCard';\nimport { getMovieDetails, getTVDetails, getOMDbRatings, getMALRating, computeUnifiedRating, setSyllabusScore, getSyllabusScore, getBookDetails, addToLibrary, getLibraryItemByMediaId, updateLibraryItem, removeFromLibrary, logActivity } from '../services/api';\nimport { useToast } from '../context/ToastContext';\nimport { useAuth } from '../context/AuthContext';\n\nconst TMDB_IMG = 'https://image.tmdb.org/t/p/w780';\nconst TMDB_BACKDROP = 'https://image.tmdb.org/t/p/w1280';\nconst TMDB_LOGO = 'https://image.tmdb.org/t/p/w92';\nconst TMDB_PROFILE = 'https://image.tmdb.org/t/p/w185';\n\n// Map provider names → their direct search/browse URLs\nconst PROVIDER_URLS = {\n  'Netflix': (title) => `https://www.netflix.com/search?q=${encodeURIComponent(title)}`,\n  'Amazon Prime Video': (title) => `https://www.amazon.com/s?i=instant-video&k=${encodeURIComponent(title)}`,\n  'Amazon Video': (title) => `https://www.amazon.com/s?i=instant-video&k=${encodeURIComponent(title)}`,\n  'Disney Plus': (title) => `https://www.disneyplus.com/search/${encodeURIComponent(title)}`,\n  'Apple TV': (title) => `https://tv.apple.com/search?term=${encodeURIComponent(title)}`,\n  'Apple TV Plus': (title) => `https://tv.apple.com/search?term=${encodeURIComponent(title)}`,\n  'Stan': (title) => `https://www.stan.com.au/search?q=${encodeURIComponent(title)}`,\n  'Binge': (title) => `https://binge.com.au/search?q=${encodeURIComponent(title)}`,\n  'Paramount Plus': (title) => `https://www.paramountplus.com/search/?q=${encodeURIComponent(title)}`,\n  'Paramount+ Amazon Channel': (title) => `https://www.amazon.com/s?i=instant-video&k=${encodeURIComponent(title)}`,\n  'Foxtel Now': (title) => `https://www.foxtel.com.au/now/search.html?q=${encodeURIComponent(title)}`,\n  'Hulu': (title) => `https://www.hulu.com/search?q=${encodeURIComponent(title)}`,\n  'HBO Max': (title) => `https://play.max.com/search?q=${encodeURIComponent(title)}`,\n  'Max': (title) => `https://play.max.com/search?q=${encodeURIComponent(title)}`,\n  'Peacock': (title) => `https://www.peacocktv.com/search?q=${encodeURIComponent(title)}`,\n  'Crunchyroll': (title) => `https://www.crunchyroll.com/search?q=${encodeURIComponent(title)}`,\n  'Google Play Movies': (title) => `https://play.google.com/store/search?q=${encodeURIComponent(title)}&c=movies`,\n  'YouTube': (title) => `https://www.youtube.com/results?search_query=${encodeURIComponent(title)}`,\n  'Microsoft Store': (title) => `https://www.microsoft.com/en-au/search/shop/movies-tv?q=${encodeURIComponent(title)}`,\n};\n\nfunction getProviderUrl(providerName, title, fallbackLink) {\n  for (const [key, urlFn] of Object.entries(PROVIDER_URLS)) {\n    if (providerName.toLowerCase().includes(key.toLowerCase()) || key.toLowerCase().includes(providerName.toLowerCase())) {\n      return urlFn(title);\n    }\n  }\n  return fallbackLink || '#';\n}\n\n/* ─────────────────────────────────────────────────── */\n/*  Library Panel — inline status / rate / review       */\n/* ─────────────────────────────────────────────────── */\nfunction LibraryPanel({ mediaId, addPayload }) {\n  const [libItem, setLibItem] = useState(null);          // null = not in lib, object = in lib\n  const [loading, setLoading] = useState(true);\n  const [saving, setSaving] = useState(false);\n  const [status, setStatus] = useState('watching');\n  const [rating, setRating] = useState(0);\n  const [review, setReview] = useState('');\n  const [expanded, setExpanded] = useState(false);\n  const toast = useToast();\n  const { user } = useAuth();\n\n  // Stable primitive key so the effect doesn't re-fire every render\n  const stableKey = mediaId.tmdb_id || mediaId.openlibrary_key;\n\n  useEffect(() => {\n    let cancelled = false;\n    async function lookup() {\n      if (!user) { setLoading(false); return; }\n      try {\n        const item = await getLibraryItemByMediaId(mediaId);\n        if (cancelled) return;\n        if (item) {\n          setLibItem(item);\n          setStatus(item.status || 'watching');\n          setRating(item.user_rating || 0);\n          setReview(item.review || '');\n          setExpanded(true);\n        }\n      } catch (err) {\n        console.error('Library lookup failed:', err);\n      }\n      if (!cancelled) setLoading(false);\n    }\n    lookup();\n    return () => { cancelled = true; };\n  }, [stableKey, user]);\n\n  const handleAdd = async (chosenStatus) => {\n    if (!user) return toast('Please log in first', 'error');\n    try {\n      const newItem = await addToLibrary({ ...addPayload, status: chosenStatus });\n      setLibItem(newItem);\n      setStatus(chosenStatus);\n      setExpanded(true);\n      toast(`Added to library!`, 'success');\n      logActivity({ action: 'added', title: addPayload.title, media_type: addPayload.media_type, media_id: addPayload.tmdb_id || addPayload.openlibrary_key, poster_url: addPayload.poster_url }).catch(() => {});\n    } catch (err) {\n      toast(err?.message === 'Already in your library' ? 'Already in your library' : 'Could not add', 'error');\n    }\n  };\n\n  const handleStatusChange = async (newStatus) => {\n    setStatus(newStatus);\n    if (libItem) {\n      try {\n        await updateLibraryItem(libItem.id, { status: newStatus });\n        setLibItem(prev => ({ ...prev, status: newStatus }));\n        const labels = { want: 'Wishlist', watching: 'In Progress', finished: 'Finished' };\n        toast(`Moved to ${labels[newStatus]}`, 'info');\n        if (newStatus === 'finished') {\n          logActivity({ action: 'finished', title: addPayload.title, media_type: addPayload.media_type, media_id: addPayload.tmdb_id || addPayload.openlibrary_key, poster_url: addPayload.poster_url }).catch(() => {});\n        }\n      } catch { toast('Failed to update status', 'error'); }\n    }\n  };\n\n  const handleSave = async () => {\n    if (!libItem) return;\n    setSaving(true);\n    try {\n      const updated = await updateLibraryItem(libItem.id, {\n        user_rating: rating || null,\n        review: review || null,\n        status,\n      });\n      setLibItem(updated);\n      toast('Saved!', 'success');\n      if (rating) {\n        logActivity({ action: 'rated', title: addPayload.title, media_type: addPayload.media_type, media_id: addPayload.tmdb_id || addPayload.openlibrary_key, poster_url: addPayload.poster_url, rating }).catch(() => {});\n      }\n      if (review) {\n        logActivity({ action: 'reviewed', title: addPayload.title, media_type: addPayload.media_type, media_id: addPayload.tmdb_id || addPayload.openlibrary_key, poster_url: addPayload.poster_url, review }).catch(() => {});\n      }\n    } catch (err) {\n      console.error('Save failed:', err);\n      toast(err?.message || 'Failed to save — try again', 'error');\n    }\n    setSaving(false);\n  };\n\n  const handleRemove = async () => {\n    if (!libItem) return;\n    try {\n      await removeFromLibrary(libItem.id);\n      setLibItem(null);\n      setStatus('watching');\n      setRating(0);\n      setReview('');\n      setExpanded(false);\n      toast('Removed from library', 'success');\n    } catch { toast('Failed to remove', 'error'); }\n  };\n\n  const getRatingColor = (val) => {\n    if (val <= 3) return 'from-red-500 to-red-600';\n    if (val <= 5) return 'from-orange-500 to-amber-500';\n    if (val <= 7) return 'from-yellow-500 to-lime-500';\n    if (val <= 9) return 'from-green-400 to-emerald-500';\n    return 'from-emerald-400 to-cyan-400';\n  };\n\n  const getRatingLabel = (val) => {\n    if (!val || val === 0) return '';\n    if (val <= 2) return 'Terrible';\n    if (val <= 4) return 'Not great';\n    if (val <= 5) return 'Okay';\n    if (val <= 6.5) return 'Decent';\n    if (val <= 7.5) return 'Good';\n    if (val <= 8.5) return 'Great';\n    if (val <= 9.5) return 'Amazing';\n    return 'Masterpiece';\n  };\n\n  if (loading) return <div className=\"h-12 w-48 bg-dark-700 rounded-xl animate-pulse mt-2\" />;\n  if (!user) return (\n    <p className=\"text-xs text-white/30 mt-4\">Log in to add to your library</p>\n  );\n\n  // ─── Not in library: show add buttons ───\n  if (!libItem) {\n    return (\n      <div className=\"mt-6\">\n        <p className=\"text-[10px] text-white/30 uppercase tracking-wider mb-2\">Add to Library</p>\n        <div className=\"flex flex-wrap gap-2\">\n          {[\n            { key: 'watching', icon: Eye, label: 'Watching', cls: 'bg-blue-500 hover:bg-blue-600' },\n            { key: 'want', icon: Clock, label: 'Wishlist', cls: 'bg-purple-500 hover:bg-purple-600' },\n            { key: 'finished', icon: CheckCircle2, label: 'Finished', cls: 'bg-green-500 hover:bg-green-600' },\n          ].map(s => (\n            <button key={s.key} onClick={() => handleAdd(s.key)}\n              className={`${s.cls} text-white px-4 py-2.5 rounded-xl text-sm font-medium flex items-center gap-2 transition-all duration-200 hover:scale-[1.02] active:scale-95`}>\n              <s.icon size={16} />\n              {s.label}\n            </button>\n          ))}\n        </div>\n      </div>\n    );\n  }\n\n  // ─── In library: full control panel ───\n  return (\n    <div className=\"mt-6 bg-white/[0.03] border border-white/[0.08] rounded-2xl overflow-hidden\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between px-4 py-3 border-b border-white/[0.06]\">\n        <div className=\"flex items-center gap-2\">\n          <Check size={16} className=\"text-green-400\" />\n          <span className=\"text-sm font-medium text-white/70\">In Your Library</span>\n        </div>\n        <div className=\"flex items-center gap-1.5\">\n          <button onClick={() => setExpanded(e => !e)}\n            className=\"text-xs text-white/30 hover:text-white/60 px-2 py-1 rounded-lg hover:bg-white/5 transition-all\">\n            {expanded ? 'Collapse' : 'Edit'}\n          </button>\n          <button onClick={handleRemove}\n            className=\"text-white/20 hover:text-red-400 p-1 rounded-lg hover:bg-white/5 transition-all\" title=\"Remove\">\n            <Trash2 size={14} />\n          </button>\n        </div>\n      </div>\n\n      {/* Status buttons (always visible) */}\n      <div className=\"px-4 py-3 flex gap-2\">\n        {[\n          { key: 'want', icon: Clock, label: 'Wishlist', active: 'bg-purple-500 text-white border-purple-400' },\n          { key: 'watching', icon: Eye, label: 'In Progress', active: 'bg-blue-500 text-white border-blue-400' },\n          { key: 'finished', icon: CheckCircle2, label: 'Finished', active: 'bg-green-500 text-white border-green-400' },\n        ].map(s => (\n          <button key={s.key} onClick={() => handleStatusChange(s.key)}\n            className={`flex-1 py-2 rounded-xl text-xs font-semibold border flex items-center justify-center gap-1.5 transition-all duration-200 ${\n              status === s.key ? s.active : 'border-white/10 text-white/40 hover:border-white/20 hover:text-white/70'\n            }`}>\n            <s.icon size={13} />\n            {s.label}\n          </button>\n        ))}\n      </div>\n\n      {/* Expanded: rating + review */}\n      {expanded && (\n        <div className=\"px-4 pb-4 space-y-4\">\n          {/* Rating */}\n          <div>\n            <label className=\"text-[10px] text-white/30 uppercase tracking-wider block mb-2\">Your Rating</label>\n            <div className=\"flex items-center gap-4\">\n              <div className=\"flex-1\">\n                <input type=\"range\" min=\"0\" max=\"10\" step=\"0.1\" value={rating}\n                  onChange={e => setRating(parseFloat(e.target.value))}\n                  className=\"w-full h-1.5 rounded-full appearance-none cursor-pointer bg-dark-600\n                    [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-4 [&::-webkit-slider-thumb]:h-4\n                    [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-accent [&::-webkit-slider-thumb]:shadow-lg\n                    [&::-webkit-slider-thumb]:shadow-accent/30 [&::-webkit-slider-thumb]:cursor-pointer\n                    [&::-webkit-slider-thumb]:border-2 [&::-webkit-slider-thumb]:border-white/20\" />\n                <div className=\"flex justify-between mt-1\">\n                  <span className=\"text-[9px] text-white/15\">0</span>\n                  <span className=\"text-[9px] text-white/15\">5</span>\n                  <span className=\"text-[9px] text-white/15\">10</span>\n                </div>\n              </div>\n              <div className=\"text-right min-w-[60px]\">\n                <span className={`text-2xl font-black bg-gradient-to-r ${rating > 0 ? getRatingColor(rating) : 'from-white/20 to-white/20'} bg-clip-text text-transparent`}>\n                  {rating > 0 ? Number(rating).toFixed(1) : '—'}\n                </span>\n                {rating > 0 && <p className=\"text-[9px] text-white/30\">{getRatingLabel(rating)}</p>}\n              </div>\n            </div>\n            {/* Quick picks */}\n            <div className=\"flex gap-1 mt-2\">\n              {[5, 6, 7, 7.5, 8, 8.5, 9, 9.5, 10].map(n => (\n                <button key={n} onClick={() => setRating(n)}\n                  className={`flex-1 py-1 rounded text-[9px] font-bold transition-all ${\n                    rating === n ? 'bg-accent text-white' : 'bg-dark-700 text-white/25 hover:bg-dark-600 hover:text-white/50'\n                  }`}>{n}</button>\n              ))}\n            </div>\n          </div>\n\n          {/* Review */}\n          <div>\n            <label className=\"text-[10px] text-white/30 uppercase tracking-wider block mb-2\">Your Thoughts</label>\n            <textarea value={review} onChange={e => setReview(e.target.value)}\n              placeholder=\"What did you think? (optional)\" rows={2}\n              className=\"w-full bg-dark-700/50 border border-white/[0.06] rounded-xl px-3 py-2.5 text-sm text-white/80 placeholder-white/20 focus:outline-none focus:border-accent/40 resize-none transition-colors\" />\n          </div>\n\n          {/* Save */}\n          <button onClick={handleSave} disabled={saving}\n            className=\"w-full btn-primary py-2.5 text-sm font-semibold disabled:opacity-50 transition-all\">\n            {saving ? 'Saving...' : 'Save'}\n          </button>\n        </div>\n      )}\n    </div>\n  );\n}\n\n/* ─────────────────────────────────────────────────── */\n/*  Book Detail View                                    */\n/* ─────────────────────────────────────────────────── */\nfunction BookDetails({ workKey, navigate }) {\n  const [data, setData] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const toast = useToast();\n\n  useEffect(() => {\n    async function load() {\n      setLoading(true);\n      const key = workKey.startsWith('/works/') ? workKey : `/works/${workKey}`;\n      const result = await getBookDetails(key);\n      setData(result);\n      setLoading(false);\n    }\n    load();\n  }, [workKey]);\n\n  if (loading) return <div className=\"flex justify-center py-20\"><div className=\"w-8 h-8 border-2 border-dark-500 border-t-accent rounded-full animate-spin\" /></div>;\n  if (!data) return <div className=\"text-center py-20 text-white/40\"><h3 className=\"text-lg\">Book not found</h3></div>;\n\n  const totalReaders = (data.want_to_read || 0) + (data.currently_reading || 0) + (data.already_read || 0);\n  const searchQ = encodeURIComponent(`${data.title} book`);\n\n  return (\n    <div>\n      {/* Gradient backdrop for books */}\n      <div className=\"absolute top-0 left-0 w-full h-80 -z-10 overflow-hidden\">\n        <div className=\"w-full h-full bg-gradient-to-br from-accent/15 via-dark-800 to-dark-900\" />\n        <div className=\"absolute inset-0 bg-gradient-to-b from-transparent to-dark-900\" />\n      </div>\n\n      <button onClick={() => navigate(-1)} className=\"inline-flex items-center gap-2 text-white/50 hover:text-white mb-8 transition-colors\">\n        <ArrowLeft size={18} /> Back\n      </button>\n\n      <div className=\"flex flex-col md:flex-row gap-8\">\n        {/* Cover */}\n        {data.poster_path ? (\n          <img src={data.poster_path} alt={data.title} className=\"w-48 sm:w-56 md:w-64 max-h-[400px] rounded-2xl shadow-2xl shadow-black/50 flex-shrink-0 bg-dark-700 object-contain\" />\n        ) : (\n          <div className=\"w-48 sm:w-56 md:w-64 aspect-[2/3] rounded-2xl bg-dark-700 flex items-center justify-center text-white/30 text-sm flex-shrink-0\">\n            <BookOpen size={48} className=\"text-white/10\" />\n          </div>\n        )}\n\n        {/* Info */}\n        <div className=\"flex-1 min-w-0\">\n          <h1 className=\"text-3xl md:text-4xl font-bold mb-2\">{data.title}</h1>\n\n          {/* Author(s) */}\n          {data.authors?.length > 0 && (\n            <div className=\"flex flex-wrap items-center gap-3 mb-3\">\n              {data.authors.map((author, i) => (\n                <a\n                  key={author.key || i}\n                  href={`https://www.google.com/search?q=${encodeURIComponent(author.name + ' author')}`}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  className=\"flex items-center gap-2 hover:text-accent transition-colors\"\n                >\n                  {author.photo ? (\n                    <img src={author.photo} alt={author.name} className=\"w-7 h-7 rounded-full object-cover border border-white/10\" />\n                  ) : (\n                    <div className=\"w-7 h-7 rounded-full bg-dark-600 flex items-center justify-center text-white/30 text-xs font-bold border border-white/10\">\n                      {author.name?.charAt(0)}\n                    </div>\n                  )}\n                  <span className=\"text-sm text-white/60 hover:text-accent transition-colors\">\n                    {author.name}\n                  </span>\n                  <ExternalLink size={10} className=\"text-white/20\" />\n                </a>\n              ))}\n            </div>\n          )}\n\n          <p className=\"text-white/40 text-sm mb-5\">\n            {data.first_publish_date && `First published ${data.first_publish_date}`}\n            {data.edition_count > 0 && ` · ${data.edition_count} editions`}\n          </p>\n\n          {/* Rating + Stats */}\n          <div className=\"flex flex-wrap items-start gap-3 mb-6\">\n            {data.rating && (\n              <a href={`https://openlibrary.org${data.key}`} target=\"_blank\" rel=\"noopener noreferrer\"\n                className=\"bg-accent/10 border border-accent/20 rounded-xl px-4 py-3 text-center min-w-[80px] hover:bg-accent/20 transition-colors\">\n                <div className=\"flex items-center justify-center gap-1.5 mb-1\">\n                  <Star size={16} className=\"text-gold fill-gold\" />\n                  <span className=\"text-xl font-black\">{data.rating}</span>\n                  <span className=\"text-white/30 text-xs\">/ 10</span>\n                </div>\n                <p className=\"text-[10px] text-white/40 uppercase tracking-wider\">Open Library</p>\n                {data.ratings_count > 0 && <p className=\"text-[9px] text-white/20\">{data.ratings_count.toLocaleString()} ratings</p>}\n              </a>\n            )}\n\n            {totalReaders > 0 && (\n              <div className=\"bg-white/[0.04] border border-white/[0.06] rounded-xl px-4 py-3 text-center min-w-[80px]\">\n                <div className=\"flex items-center justify-center gap-1.5 mb-1\">\n                  <Users size={14} className=\"text-accent\" />\n                  <span className=\"text-lg font-bold\">{totalReaders.toLocaleString()}</span>\n                </div>\n                <p className=\"text-[10px] text-white/30\">Readers</p>\n              </div>\n            )}\n\n            {data.edition_count > 0 && (\n              <div className=\"bg-white/[0.04] border border-white/[0.06] rounded-xl px-4 py-3 text-center min-w-[80px]\">\n                <div className=\"flex items-center justify-center gap-1.5 mb-1\">\n                  <BookCopy size={14} className=\"text-white/50\" />\n                  <span className=\"text-lg font-bold\">{data.edition_count}</span>\n                </div>\n                <p className=\"text-[10px] text-white/30\">Editions</p>\n              </div>\n            )}\n          </div>\n\n          {/* Reader breakdown */}\n          {totalReaders > 0 && (\n            <div className=\"flex flex-wrap gap-4 text-xs text-white/40 mb-4\">\n              {data.want_to_read > 0 && <span className=\"flex items-center gap-1.5\"><BookMarked size={12} className=\"text-accent/70\" /> {data.want_to_read.toLocaleString()} want to read</span>}\n              {data.currently_reading > 0 && <span className=\"flex items-center gap-1.5\"><Eye size={12} className=\"text-blue-400/70\" /> {data.currently_reading.toLocaleString()} reading now</span>}\n              {data.already_read > 0 && <span className=\"flex items-center gap-1.5\"><CheckCircle2 size={12} className=\"text-green-400/70\" /> {data.already_read.toLocaleString()} have read</span>}\n            </div>\n          )}\n          {totalReaders > 0 && (\n            <p className=\"text-[10px] text-white/20 mb-6\">Reader data via Open Library</p>\n          )}\n\n          {/* Description */}\n          {data.description && (\n            <p className=\"text-white/60 leading-relaxed mb-6 max-w-2xl whitespace-pre-line\">{data.description}</p>\n          )}\n\n          {/* Subjects */}\n          {data.subjects.length > 0 && (\n            <div className=\"flex flex-wrap gap-2 mb-6\">\n              {data.subjects.map(s => (\n                <span key={s} className=\"text-xs bg-white/[0.04] border border-white/[0.06] rounded-full px-3 py-1 text-white/50\">{s}</span>\n              ))}\n            </div>\n          )}\n\n          {/* Buy / Read Links */}\n          <div className=\"mb-8\">\n            <h3 className=\"text-sm font-semibold text-white/60 mb-3 uppercase tracking-wider\">Where to Get</h3>\n            <div className=\"flex flex-wrap gap-2\">\n              <a href={`https://openlibrary.org${data.key}`} target=\"_blank\" rel=\"noopener noreferrer\"\n                className=\"flex items-center gap-2 bg-white/[0.04] border border-white/[0.06] rounded-lg px-4 py-2.5 hover:bg-white/[0.08] transition-colors\">\n                <BookOpen size={16} className=\"text-white/60\" />\n                <span className=\"text-xs font-medium\">Read Free</span>\n                <ExternalLink size={10} className=\"text-white/30\" />\n              </a>\n              <a href={`https://www.amazon.com/s?k=${searchQ}`} target=\"_blank\" rel=\"noopener noreferrer\"\n                className=\"flex items-center gap-2 bg-[#ff9900]/10 border border-[#ff9900]/20 rounded-lg px-4 py-2.5 hover:bg-[#ff9900]/20 transition-colors\">\n                <ShoppingCart size={16} className=\"text-[#ff9900]\" />\n                <span className=\"text-xs font-medium text-[#ff9900]\">Amazon</span>\n                <ExternalLink size={10} className=\"text-[#ff9900]/40\" />\n              </a>\n              <a href={`https://www.booktopia.com.au/search?keywords=${searchQ}`} target=\"_blank\" rel=\"noopener noreferrer\"\n                className=\"flex items-center gap-2 bg-white/[0.04] border border-white/[0.06] rounded-lg px-4 py-2.5 hover:bg-white/[0.08] transition-colors\">\n                <ShoppingCart size={16} className=\"text-white/60\" />\n                <span className=\"text-xs font-medium\">Booktopia</span>\n                <ExternalLink size={10} className=\"text-white/30\" />\n              </a>\n              <a href={`https://www.goodreads.com/search?q=${searchQ}`} target=\"_blank\" rel=\"noopener noreferrer\"\n                className=\"flex items-center gap-2 bg-white/[0.04] border border-white/[0.06] rounded-lg px-4 py-2.5 hover:bg-white/[0.08] transition-colors\">\n                <Star size={16} className=\"text-white/60\" />\n                <span className=\"text-xs font-medium\">Goodreads</span>\n                <ExternalLink size={10} className=\"text-white/30\" />\n              </a>\n            </div>\n          </div>\n\n          {/* Fun Facts */}\n          {(() => {\n            const facts = [];\n            if (data.edition_count >= 50) facts.push(`📚 Published in ${data.edition_count} editions worldwide — a true global phenomenon.`);\n            else if (data.edition_count >= 10) facts.push(`📖 Available in ${data.edition_count} different editions.`);\n            if (data.already_read > 10000) facts.push(`🏆 Over ${Math.floor(data.already_read / 1000) * 1000} readers have finished this book on Open Library alone.`);\n            if (data.currently_reading > 1000) facts.push(`👀 ${data.currently_reading.toLocaleString()} people are reading this right now!`);\n            if (data.want_to_read > 50000) facts.push(`🔥 More than ${Math.floor(data.want_to_read / 1000)}k people have this on their reading list.`);\n            if (data.ratings_count > 1000) facts.push(`⭐ Rated by ${data.ratings_count.toLocaleString()} readers with an average of ${data.rating}/10.`);\n            if (data.first_publish_date) {\n              const yearMatch = data.first_publish_date.match(/\\d{4}/);\n              if (yearMatch) {\n                const age = new Date().getFullYear() - parseInt(yearMatch[0]);\n                if (age > 100) facts.push(`🕰️ First published ${age} years ago — a true classic that has stood the test of time.`);\n                else if (age > 50) facts.push(`📅 Published over ${age} years ago and still widely read today.`);\n                else if (age <= 2) facts.push(`✨ A brand new release — one of the latest books to hit shelves.`);\n              }\n            }\n            if (data.subjects?.some(s => s.toLowerCase().includes('new york times'))) facts.push(`📰 A New York Times bestseller.`);\n            if (data.subjects?.some(s => s.toLowerCase().includes('pulitzer'))) facts.push(`🏅 Pulitzer Prize-related work.`);\n            if (data.authors?.length > 2) facts.push(`✍️ A collaborative work by ${data.authors.length} authors.`);\n            return facts.length > 0 ? (\n              <div className=\"mb-8\">\n                <h3 className=\"text-sm font-semibold text-white/60 mb-3 uppercase tracking-wider flex items-center gap-2\">\n                  <Lightbulb size={14} className=\"text-gold\" /> Fun Facts\n                </h3>\n                <div className=\"space-y-2\">\n                  {facts.slice(0, 4).map((fact, i) => (\n                    <div key={i} className=\"flex items-start gap-3 bg-white/[0.03] border border-white/[0.06] rounded-xl px-4 py-3\">\n                      <Sparkles size={14} className=\"text-accent mt-0.5 flex-shrink-0\" />\n                      <p className=\"text-sm text-white/60 leading-relaxed\">{fact}</p>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            ) : null;\n          })()}\n\n          <LibraryPanel\n            mediaId={{ openlibrary_key: data.key }}\n            addPayload={{\n              openlibrary_key: data.key,\n              media_type: 'book',\n              title: data.title,\n              poster_path: data.poster_path,\n              overview: data.description?.slice(0, 500) || '',\n              external_rating: data.rating,\n            }}\n          />\n        </div>\n      </div>\n    </div>\n  );\n}\n\n/* ─────────────────────────────────────────────────── */\n/*  Movie / TV Detail View                              */\n/* ─────────────────────────────────────────────────── */\nfunction Details() {\n  const { mediaType, id } = useParams();\n  const navigate = useNavigate();\n\n  // Book detail route\n  if (mediaType === 'book') {\n    return <BookDetails workKey={id} navigate={navigate} />;\n  }\n\n  return <MovieTVDetails mediaType={mediaType} id={id} navigate={navigate} />;\n}\n\nfunction MovieTVDetails({ mediaType, id, navigate }) {\n  const [data, setData] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [extRatings, setExtRatings] = useState(null);\n  const [ratingsLoaded, setRatingsLoaded] = useState(false);\n  const [malData, setMalData] = useState(null);\n  const toast = useToast();\n\n  useEffect(() => {\n    async function load() {\n      setLoading(true);\n      setExtRatings(null);\n      setRatingsLoaded(false);\n      setMalData(null);\n      const fetcher = mediaType === 'movie' ? getMovieDetails : getTVDetails;\n      const result = await fetcher(id);\n      setData(result);\n      setLoading(false);\n\n      const imdbId = result.external_ids?.imdb_id || result.imdb_id;\n      const resultTitle = result.name || result.title;\n      if (imdbId) {\n        getOMDbRatings(imdbId, resultTitle, mediaType)\n          .then(r => { setExtRatings(r); setRatingsLoaded(true); })\n          .catch(() => setRatingsLoaded(true));\n      } else {\n        setRatingsLoaded(true);\n      }\n\n      // Fetch MAL rating for anime\n      const anime = result.original_language === 'ja' &&\n        result.genres?.some(g => g.id === 16);\n      if (anime) {\n        getMALRating(resultTitle).then(r => setMalData(r));\n      }\n    }\n    load();\n  }, [mediaType, id]);\n\n  // Compute unified score (must be before early returns to keep hooks order stable)\n  const isAnime = data ? (data.original_language === 'ja' && data.genres?.some(g => g.id === 16)) : false;\n  const avgScore = computeUnifiedRating(extRatings, malData, isAnime);\n\n  // Persist Syllabus Score so it's available on MediaCards everywhere\n  useEffect(() => {\n    if (avgScore != null && data?.id) {\n      setSyllabusScore(mediaType, data.id, avgScore);\n    }\n  }, [avgScore, data?.id, mediaType]);\n\n  if (loading) return <div className=\"flex justify-center py-20\"><div className=\"w-8 h-8 border-2 border-dark-500 border-t-accent rounded-full animate-spin\" /></div>;\n  if (!data) return <div className=\"text-center py-20 text-white/40\"><h3 className=\"text-lg\">Not found</h3></div>;\n\n  const title = data.title || data.name;\n  const year = (data.release_date || data.first_air_date || '').slice(0, 4);\n  const genres = data.genres?.map(g => g.name).join(', ');\n  const recommendations = data.recommendations?.results?.slice(0, 10) || [];\n  const imdbId = extRatings?.imdb_id || data.external_ids?.imdb_id;\n\n  // Extract directors & writers from TMDB crew (with profile photos)\n  const crew = data.credits?.crew || [];\n  const directors = crew.filter(c => c.job === 'Director').slice(0, 3);\n  const writers = crew.filter(c => c.department === 'Writing').slice(0, 4);\n\n  // Find best trailer (prefer Official Trailer, then any Trailer, then Teaser)\n  const trailer = (() => {\n    const vids = (data.videos?.results || []).filter(v => v.site === 'YouTube');\n    return vids.find(v => v.type === 'Trailer' && v.name.toLowerCase().includes('official'))\n      || vids.find(v => v.type === 'Trailer')\n      || vids.find(v => v.type === 'Teaser')\n      || vids[0]\n      || null;\n  })();\n\n  // Streaming providers (AU first, fallback to US)\n  const wpData = data['watch/providers']?.results;\n  const providers = wpData?.AU || wpData?.US || null;\n  const streamingProviders = providers?.flatrate || [];\n  const rentProviders = providers?.rent || [];\n  const buyProviders = providers?.buy || [];\n\n  return (\n    <div>\n      {/* Backdrop */}\n      {data.backdrop_path && (\n        <div className=\"absolute top-0 left-0 w-full h-80 -z-10 overflow-hidden\">\n          <img src={`${TMDB_BACKDROP}${data.backdrop_path}`} alt=\"\" className=\"w-full h-full object-cover opacity-20\" />\n          <div className=\"absolute inset-0 bg-gradient-to-b from-transparent to-dark-900\" />\n        </div>\n      )}\n\n      <button onClick={() => navigate(-1)}\n        className=\"inline-flex items-center gap-2 text-white/50 hover:text-white mb-8 transition-colors\">\n        <ArrowLeft size={18} /> Back\n      </button>\n\n      <div className=\"flex flex-col md:flex-row gap-8\">\n        {/* Poster column — sticky on desktop */}\n        <div className=\"flex-shrink-0 md:sticky md:top-8 md:self-start w-48 sm:w-56 md:w-64 lg:w-72 xl:w-80\">\n          {data.poster_path ? (\n            <img src={`${TMDB_IMG}${data.poster_path}`} alt={title}\n              className=\"w-full rounded-2xl shadow-2xl shadow-black/50 aspect-[2/3] object-cover\" />\n          ) : (\n            <div className=\"w-full aspect-[2/3] rounded-2xl bg-dark-700 flex items-center justify-center text-white/30 text-sm\">\n              No Poster\n            </div>\n          )}\n\n          {/* ── Quick Facts card ── */}\n          <div className=\"mt-4 bg-white/[0.03] border border-white/[0.06] rounded-xl p-4 space-y-3\">\n            {data.tagline && (\n              <p className=\"text-xs italic text-white/40 leading-relaxed\">\"{data.tagline}\"</p>\n            )}\n\n            {/* Director(s) with profile photos */}\n            {directors.length > 0 && (\n              <div>\n                <p className=\"text-[10px] text-white/30 uppercase tracking-wider mb-2\">Director</p>\n                <div className=\"space-y-2\">\n                  {directors.map(d => (\n                    <a key={d.id} href={`https://www.google.com/search?q=${encodeURIComponent(d.name + ' filmmaker')}`}\n                      target=\"_blank\" rel=\"noopener noreferrer\" className=\"flex items-center gap-2.5 group/crew hover:bg-white/[0.04] rounded-lg p-1 -m-1 transition-colors\">\n                      {d.profile_path ? (\n                        <img src={`${TMDB_PROFILE}${d.profile_path}`} alt={d.name}\n                          className=\"w-8 h-8 rounded-full object-cover border border-white/[0.08] group-hover/crew:border-accent/40 transition-colors\" />\n                      ) : (\n                        <div className=\"w-8 h-8 rounded-full bg-dark-600 flex items-center justify-center text-white/20 text-xs font-bold border border-white/[0.08] group-hover/crew:border-accent/40 transition-colors\">\n                          {d.name?.charAt(0)}\n                        </div>\n                      )}\n                      <span className=\"text-xs text-white/70 group-hover/crew:text-accent transition-colors\">{d.name}</span>\n                    </a>\n                  ))}\n                </div>\n              </div>\n            )}\n\n            {/* Writer(s) with profile photos */}\n            {writers.length > 0 && (\n              <div>\n                <p className=\"text-[10px] text-white/30 uppercase tracking-wider mb-2\">Writer</p>\n                <div className=\"space-y-2\">\n                  {writers.map(w => (\n                    <a key={w.id + w.job} href={`https://www.google.com/search?q=${encodeURIComponent(w.name + ' writer')}`}\n                      target=\"_blank\" rel=\"noopener noreferrer\" className=\"flex items-center gap-2.5 group/crew hover:bg-white/[0.04] rounded-lg p-1 -m-1 transition-colors\">\n                      {w.profile_path ? (\n                        <img src={`${TMDB_PROFILE}${w.profile_path}`} alt={w.name}\n                          className=\"w-8 h-8 rounded-full object-cover border border-white/[0.08] group-hover/crew:border-accent/40 transition-colors\" />\n                      ) : (\n                        <div className=\"w-8 h-8 rounded-full bg-dark-600 flex items-center justify-center text-white/20 text-xs font-bold border border-white/[0.08] group-hover/crew:border-accent/40 transition-colors\">\n                          {w.name?.charAt(0)}\n                        </div>\n                      )}\n                      <div>\n                        <span className=\"text-xs text-white/70 group-hover/crew:text-accent transition-colors block\">{w.name}</span>\n                        <span className=\"text-[10px] text-white/25\">{w.job}</span>\n                      </div>\n                    </a>\n                  ))}\n                </div>\n              </div>\n            )}\n\n            {extRatings?.rated && (\n              <div className=\"flex items-start gap-2.5\">\n                <Film size={13} className=\"text-white/30 mt-0.5 flex-shrink-0\" />\n                <div>\n                  <p className=\"text-[10px] text-white/30 uppercase tracking-wider\">Rated</p>\n                  <p className=\"text-xs text-white/70\">{extRatings.rated}</p>\n                </div>\n              </div>\n            )}\n            {extRatings?.awards && (\n              <div className=\"flex items-start gap-2.5\">\n                <Award size={13} className=\"text-accent/60 mt-0.5 flex-shrink-0\" />\n                <div>\n                  <p className=\"text-[10px] text-white/30 uppercase tracking-wider\">Awards</p>\n                  <p className=\"text-xs text-white/70 leading-relaxed\">{extRatings.awards}</p>\n                </div>\n              </div>\n            )}\n            {(extRatings?.boxOffice || data.budget > 0 || data.revenue > 0) && (\n              <div className=\"flex items-start gap-2.5\">\n                <DollarSign size={13} className=\"text-green-400/60 mt-0.5 flex-shrink-0\" />\n                <div>\n                  <p className=\"text-[10px] text-white/30 uppercase tracking-wider\">Box Office</p>\n                  {data.budget > 0 && <p className=\"text-xs text-white/50\">Budget: ${(data.budget / 1e6).toFixed(0)}M</p>}\n                  {extRatings?.boxOffice && <p className=\"text-xs text-white/70\">Gross: {extRatings.boxOffice}</p>}\n                  {data.revenue > 0 && <p className=\"text-xs text-white/70\">Revenue: ${(data.revenue / 1e6).toFixed(0)}M</p>}\n                </div>\n              </div>\n            )}\n            {extRatings?.country && (\n              <div className=\"flex items-start gap-2.5\">\n                <Globe size={13} className=\"text-white/30 mt-0.5 flex-shrink-0\" />\n                <div>\n                  <p className=\"text-[10px] text-white/30 uppercase tracking-wider\">Country</p>\n                  <p className=\"text-xs text-white/70\">{extRatings.country}</p>\n                </div>\n              </div>\n            )}\n            {data.production_companies?.length > 0 && (\n              <div className=\"flex items-start gap-2.5\">\n                <Info size={13} className=\"text-white/30 mt-0.5 flex-shrink-0\" />\n                <div>\n                  <p className=\"text-[10px] text-white/30 uppercase tracking-wider\">Studio</p>\n                  <p className=\"text-xs text-white/70\">{data.production_companies.slice(0, 2).map(c => c.name).join(', ')}</p>\n                </div>\n              </div>\n            )}\n            {/* Shimmer while loading */}\n            {!ratingsLoaded && data.external_ids?.imdb_id && (\n              <div className=\"space-y-3 animate-pulse\">\n                {[1,2,3].map(i => (<div key={i} className=\"flex gap-2.5\"><div className=\"w-3 h-3 bg-dark-600 rounded\" /><div className=\"flex-1\"><div className=\"h-2 w-10 bg-dark-600 rounded mb-1\" /><div className=\"h-3 w-20 bg-dark-600 rounded\" /></div></div>))}\n              </div>\n            )}\n          </div>\n        </div>\n\n        {/* Info */}\n        <div className=\"flex-1 min-w-0\">\n          <h1 className=\"text-3xl md:text-4xl font-bold mb-3\">{title}</h1>\n\n          <p className=\"text-white/40 text-sm mb-4\">\n            {year} {genres && `· ${genres}`}\n            {data.runtime && ` · ${data.runtime} min`}\n            {data.number_of_seasons && ` · ${data.number_of_seasons} season${data.number_of_seasons > 1 ? 's' : ''}`}\n          </p>\n\n          {/* ── Ratings ── */}\n          <div className=\"flex flex-wrap items-stretch gap-3 mb-6\">\n            {/* Syllabus Score — unified or cached or TMDB fallback */}\n            {(() => {\n              const displayScore = avgScore || getSyllabusScore(mediaType, data.id) || (data.vote_average ? data.vote_average.toFixed(1) : null);\n              const scoreLabel = avgScore ? 'Syllabus Score' : getSyllabusScore(mediaType, data.id) ? 'Syllabus Score' : 'TMDB';\n              return displayScore ? (\n                <div className=\"bg-accent/10 border border-accent/20 rounded-xl px-4 py-3 text-center min-w-[90px] flex flex-col justify-center\">\n                  <div className=\"flex items-center justify-center gap-1.5 mb-1\">\n                    <Star size={16} className=\"text-gold fill-gold\" />\n                    <span className=\"text-xl font-black\">{displayScore}</span>\n                    <span className=\"text-white/30 text-xs\">/ 10</span>\n                  </div>\n                  <p className=\"text-[10px] text-white/40 uppercase tracking-wider\">{scoreLabel}</p>\n                </div>\n              ) : null;\n            })()}\n\n            {/* IMDb — links to IMDb page */}\n            {extRatings?.imdb && (\n              <a href={`https://www.imdb.com/title/${imdbId}/`} target=\"_blank\" rel=\"noopener noreferrer\"\n                className=\"bg-[#f5c518]/[0.08] border border-[#f5c518]/20 rounded-xl px-4 py-3 text-center min-w-[90px] hover:bg-[#f5c518]/[0.15] transition-colors cursor-pointer flex flex-col justify-center\">\n                <p className=\"text-xl font-black text-[#f5c518]\">{extRatings.imdb.score}</p>\n                <p className=\"text-[10px] text-white/30 mt-0.5 flex items-center justify-center gap-1\">IMDb <ExternalLink size={8} /></p>\n                {extRatings.imdb.votes && (\n                  <p className=\"text-[9px] text-white/20\">{extRatings.imdb.votes} votes</p>\n                )}\n              </a>\n            )}\n\n            {/* Rotten Tomatoes — links to RT search */}\n            {extRatings?.rt && (\n              <a href={`https://www.rottentomatoes.com/search?search=${encodeURIComponent(title)}`} target=\"_blank\" rel=\"noopener noreferrer\"\n                className=\"bg-white/[0.04] border border-white/[0.06] rounded-xl px-4 py-3 text-center min-w-[90px] hover:bg-white/[0.08] transition-colors cursor-pointer flex flex-col justify-center\">\n                <p className=\"text-xl font-black\">\n                  <span className={parseInt(extRatings.rt.score) >= 60 ? 'text-red-400' : 'text-green-400'}>\n                    🍅 {extRatings.rt.score}\n                  </span>\n                </p>\n                <p className=\"text-[10px] text-white/30 mt-0.5 flex items-center justify-center gap-1\">Rotten Tomatoes <ExternalLink size={8} /></p>\n              </a>\n            )}\n\n            {/* TMDB rating — always show when OMDb loaded but no IMDb/RT available */}\n            {ratingsLoaded && !extRatings?.imdb && data.vote_average > 0 && (\n              <a href={`https://www.themoviedb.org/${mediaType}/${data.id}`} target=\"_blank\" rel=\"noopener noreferrer\"\n                className=\"bg-[#01b4e4]/[0.08] border border-[#01b4e4]/20 rounded-xl px-4 py-3 text-center min-w-[90px] hover:bg-[#01b4e4]/[0.15] transition-colors cursor-pointer flex flex-col justify-center\">\n                <p className=\"text-xl font-black text-[#01b4e4]\">{data.vote_average.toFixed(1)}</p>\n                <p className=\"text-[10px] text-white/30 mt-0.5 flex items-center justify-center gap-1\">TMDB <ExternalLink size={8} /></p>\n                {data.vote_count && (\n                  <p className=\"text-[9px] text-white/20\">{data.vote_count.toLocaleString()} votes</p>\n                )}\n              </a>\n            )}\n\n            {/* MAL (anime only) */}\n            {isAnime && malData?.score && (\n              <a href={malData.url} target=\"_blank\" rel=\"noopener noreferrer\"\n                className=\"bg-[#2e51a2]/10 border border-[#2e51a2]/20 rounded-xl px-4 py-3 text-center min-w-[90px] hover:bg-[#2e51a2]/20 transition-colors flex flex-col justify-center\">\n                <p className=\"text-xl font-black text-[#2e51a2]\">{malData.score}</p>\n                <p className=\"text-[10px] text-white/30 mt-0.5 flex items-center justify-center gap-1\">MAL <ExternalLink size={8} /></p>\n                {malData.scored_by && (\n                  <p className=\"text-[9px] text-white/20\">{malData.scored_by.toLocaleString()} votes</p>\n                )}\n              </a>\n            )}\n\n            {/* Crunchyroll (anime only) */}\n            {isAnime && (\n              <a href={`https://www.crunchyroll.com/search?q=${encodeURIComponent(title)}`} target=\"_blank\" rel=\"noopener noreferrer\"\n                className=\"bg-[#f47521]/10 border border-[#f47521]/20 rounded-xl px-4 py-3 text-center min-w-[90px] hover:bg-[#f47521]/20 transition-colors flex flex-col justify-center\">\n                <p className=\"text-xl font-black text-[#f47521]\">CR</p>\n                <p className=\"text-[10px] text-white/30 mt-0.5 flex items-center justify-center gap-1\">Crunchyroll <ExternalLink size={8} /></p>\n              </a>\n            )}\n\n            {/* Loading shimmer — only while actually loading, not after failure */}\n            {!ratingsLoaded && data.external_ids?.imdb_id && (\n              <div className=\"bg-white/[0.02] border border-white/[0.04] rounded-xl px-4 py-3 text-center min-w-[90px] animate-pulse flex flex-col justify-center\">\n                <div className=\"h-5 w-12 bg-dark-600 rounded mx-auto mb-1\" />\n                <div className=\"h-2 w-8 bg-dark-600 rounded mx-auto\" />\n              </div>\n            )}\n          </div>\n\n          <p className=\"text-white/60 leading-relaxed mb-6 max-w-2xl\">{data.overview}</p>\n\n          {/* ── Trailer ── */}\n          {trailer && (\n            <div className=\"mb-8\">\n              <h3 className=\"text-sm font-semibold text-white/60 mb-3 uppercase tracking-wider flex items-center gap-2\">\n                <Play size={14} /> Trailer\n              </h3>\n              <div className=\"relative w-full max-w-2xl aspect-video rounded-xl overflow-hidden border border-white/[0.06] bg-dark-700\">\n                <iframe\n                  src={`https://www.youtube.com/embed/${trailer.key}?rel=0&modestbranding=1`}\n                  title={trailer.name}\n                  allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n                  allowFullScreen\n                  className=\"absolute inset-0 w-full h-full\"\n                />\n              </div>\n              <p className=\"text-[10px] text-white/20 mt-2\">{trailer.name}</p>\n            </div>\n          )}\n\n          {/* ── Cast ── */}\n          {data.credits?.cast?.length > 0 && (\n            <div className=\"mb-8\">\n              <h3 className=\"text-sm font-semibold text-white/60 mb-3 uppercase tracking-wider\">Cast</h3>\n              <div className=\"flex gap-3 overflow-x-auto pb-2 scrollbar-hide\">\n                {data.credits.cast.slice(0, 10).map(actor => (\n                  <a\n                    key={actor.id}\n                    href={`https://www.google.com/search?q=${encodeURIComponent(actor.name + ' actor')}`}\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    className=\"flex-shrink-0 w-[90px] group/actor text-center\"\n                  >\n                    {actor.profile_path ? (\n                      <img\n                        src={`${TMDB_PROFILE}${actor.profile_path}`}\n                        alt={actor.name}\n                        className=\"w-[90px] h-[90px] rounded-full object-cover border-2 border-white/[0.06] group-hover/actor:border-accent/40 transition-colors\"\n                      />\n                    ) : (\n                      <div className=\"w-[90px] h-[90px] rounded-full bg-dark-600 flex items-center justify-center text-white/20 text-lg font-bold border-2 border-white/[0.06] group-hover/actor:border-accent/40 transition-colors\">\n                        {actor.name?.charAt(0)}\n                      </div>\n                    )}\n                    <p className=\"text-xs font-medium mt-2 truncate group-hover/actor:text-accent transition-colors\">{actor.name}</p>\n                    <p className=\"text-[10px] text-white/30 truncate\">{actor.character}</p>\n                  </a>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {/* ── Where to Watch ── */}\n          {(streamingProviders.length > 0 || rentProviders.length > 0 || buyProviders.length > 0) && (\n            <div className=\"mb-8\">\n              <h3 className=\"text-sm font-semibold text-white/60 mb-3 uppercase tracking-wider\">Where to Watch</h3>\n              <div className=\"space-y-3\">\n                {streamingProviders.length > 0 && (\n                  <div>\n                    <p className=\"text-[10px] text-white/30 mb-1.5 uppercase\">Stream</p>\n                    <div className=\"flex flex-wrap gap-2\">\n                      {streamingProviders.map(p => (\n                        <a key={p.provider_id} href={getProviderUrl(p.provider_name, title, providers?.link)} target=\"_blank\" rel=\"noopener noreferrer\"\n                          className=\"flex items-center gap-2 bg-white/[0.04] border border-white/[0.06] rounded-lg px-3 py-2 hover:bg-white/[0.08] transition-colors\">\n                          {p.logo_path && <img src={`${TMDB_LOGO}${p.logo_path}`} alt=\"\" className=\"w-6 h-6 rounded object-cover\" />}\n                          <span className=\"text-xs font-medium\">{p.provider_name}</span>\n                          <ExternalLink size={9} className=\"text-white/20\" />\n                        </a>\n                      ))}\n                    </div>\n                  </div>\n                )}\n                {rentProviders.length > 0 && (\n                  <div>\n                    <p className=\"text-[10px] text-white/30 mb-1.5 uppercase\">Rent</p>\n                    <div className=\"flex flex-wrap gap-2\">\n                      {rentProviders.slice(0, 6).map(p => (\n                        <a key={p.provider_id} href={getProviderUrl(p.provider_name, title, providers?.link)} target=\"_blank\" rel=\"noopener noreferrer\"\n                          className=\"flex items-center gap-2 bg-white/[0.04] border border-white/[0.06] rounded-lg px-3 py-2 hover:bg-white/[0.08] transition-colors\">\n                          {p.logo_path && <img src={`${TMDB_LOGO}${p.logo_path}`} alt=\"\" className=\"w-5 h-5 rounded object-cover\" />}\n                          <span className=\"text-xs text-white/60\">{p.provider_name}</span>\n                        </a>\n                      ))}\n                    </div>\n                  </div>\n                )}\n                {buyProviders.length > 0 && (\n                  <div>\n                    <p className=\"text-[10px] text-white/30 mb-1.5 uppercase\">Buy</p>\n                    <div className=\"flex flex-wrap gap-2\">\n                      {buyProviders.slice(0, 6).map(p => (\n                        <a key={p.provider_id} href={getProviderUrl(p.provider_name, title, providers?.link)} target=\"_blank\" rel=\"noopener noreferrer\"\n                          className=\"flex items-center gap-2 bg-white/[0.04] border border-white/[0.06] rounded-lg px-3 py-2 hover:bg-white/[0.08] transition-colors\">\n                          {p.logo_path && <img src={`${TMDB_LOGO}${p.logo_path}`} alt=\"\" className=\"w-5 h-5 rounded object-cover\" />}\n                          <span className=\"text-xs text-white/60\">{p.provider_name}</span>\n                        </a>\n                      ))}\n                    </div>\n                  </div>\n                )}\n\n              </div>\n            </div>\n          )}\n\n          {/* ── Fun Facts ── */}\n          {(() => {\n            const facts = [];\n            const releaseYear = parseInt((data.release_date || data.first_air_date || '').slice(0, 4));\n            const age = releaseYear ? new Date().getFullYear() - releaseYear : 0;\n\n            // Budget & revenue facts\n            if (data.budget > 0 && data.revenue > 0) {\n              const ratio = (data.revenue / data.budget).toFixed(0);\n              if (data.revenue > data.budget * 10) facts.push(`💰 Made ${ratio}x its budget — earning $${(data.revenue / 1e6).toFixed(0)}M from a $${(data.budget / 1e6).toFixed(0)}M budget.`);\n              else if (data.revenue > data.budget * 3) facts.push(`📈 Earned $${(data.revenue / 1e6).toFixed(0)}M against a $${(data.budget / 1e6).toFixed(0)}M budget — a ${ratio}x return.`);\n              else if (data.revenue < data.budget) facts.push(`📉 Only earned $${(data.revenue / 1e6).toFixed(0)}M against a $${(data.budget / 1e6).toFixed(0)}M budget — a box office underperformer.`);\n            } else if (data.budget > 200e6) {\n              facts.push(`🎬 Had a massive $${(data.budget / 1e6).toFixed(0)}M production budget.`);\n            }\n\n            // Awards\n            if (extRatings?.awards) {\n              const oscars = extRatings.awards.match(/Won (\\d+) Oscar/);\n              const noms = extRatings.awards.match(/Nominated for (\\d+) Oscar/);\n              if (oscars) facts.push(`🏆 Won ${oscars[1]} Academy Award${parseInt(oscars[1]) > 1 ? 's' : ''}.`);\n              else if (noms) facts.push(`🎖️ Nominated for ${noms[1]} Academy Award${parseInt(noms[1]) > 1 ? 's' : ''}.`);\n              else if (extRatings.awards.includes('win')) facts.push(`🏅 ${extRatings.awards}`);\n            }\n\n            // Age & classic status\n            if (age > 50) facts.push(`🕰️ Released ${age} years ago and still beloved — a true classic.`);\n            else if (age > 25) facts.push(`📅 Over ${age} years old and still highly regarded.`);\n            else if (age <= 1 && releaseYear) facts.push(`✨ A brand new release from ${releaseYear}.`);\n\n            // Popularity & votes\n            if (data.vote_count > 20000) facts.push(`🌍 Rated by over ${Math.floor(data.vote_count / 1000)}k people on TMDB — one of the most-reviewed titles.`);\n            else if (data.vote_count > 5000) facts.push(`⭐ Rated by ${data.vote_count.toLocaleString()} users on TMDB.`);\n\n            // Runtime\n            if (data.runtime > 180) facts.push(`⏱️ At ${data.runtime} minutes, this is an epic-length film — bring snacks.`);\n            else if (data.runtime && data.runtime < 90) facts.push(`⚡ At just ${data.runtime} minutes, it's a quick but impactful watch.`);\n\n            // TV-specific\n            if (data.number_of_seasons > 10) facts.push(`📺 A long-running series spanning ${data.number_of_seasons} seasons and ${data.number_of_episodes || 'many'} episodes.`);\n            else if (data.number_of_seasons === 1 && data.status === 'Ended') facts.push(`🎯 A complete story told in just one season — ${data.number_of_episodes || 'a few'} episodes.`);\n            if (data.number_of_episodes > 500) facts.push(`📊 Over ${data.number_of_episodes} episodes have aired!`);\n\n            // Language / country\n            if (data.original_language && data.original_language !== 'en') {\n              const langNames = { ja: 'Japanese', ko: 'Korean', fr: 'French', es: 'Spanish', de: 'German', it: 'Italian', pt: 'Portuguese', zh: 'Chinese', hi: 'Hindi', ar: 'Arabic', ru: 'Russian', sv: 'Swedish', da: 'Danish', th: 'Thai', tl: 'Tagalog', pl: 'Polish', nl: 'Dutch', tr: 'Turkish' };\n              const lang = langNames[data.original_language] || data.original_language.toUpperCase();\n              facts.push(`🌐 Originally produced in ${lang}.`);\n            }\n\n            // Production companies\n            if (data.production_companies?.length > 3) facts.push(`🏢 A joint production between ${data.production_companies.length} studios.`);\n\n            return facts.length > 0 ? (\n              <div className=\"mb-8\">\n                <h3 className=\"text-sm font-semibold text-white/60 mb-3 uppercase tracking-wider flex items-center gap-2\">\n                  <Lightbulb size={14} className=\"text-gold\" /> Fun Facts\n                </h3>\n                <div className=\"space-y-2\">\n                  {facts.slice(0, 5).map((fact, i) => (\n                    <div key={i} className=\"flex items-start gap-3 bg-white/[0.03] border border-white/[0.06] rounded-xl px-4 py-3\">\n                      <Sparkles size={14} className=\"text-accent mt-0.5 flex-shrink-0\" />\n                      <p className=\"text-sm text-white/60 leading-relaxed\">{fact}</p>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            ) : null;\n          })()}\n\n          <LibraryPanel\n            mediaId={{ tmdb_id: data.id }}\n            addPayload={{\n              tmdb_id: data.id,\n              media_type: mediaType,\n              title: data.title || data.name,\n              poster_path: data.poster_path ? `${TMDB_IMG}${data.poster_path}` : null,\n              overview: data.overview,\n              external_rating: avgScore ? parseFloat(avgScore) : data.vote_average,\n              genres: data.genres?.map(g => g.name).join(', '),\n              release_date: data.release_date || data.first_air_date,\n            }}\n          />\n        </div>\n      </div>\n\n      {/* Recommendations */}\n      {recommendations.length > 0 && (\n        <div className=\"mt-16\">\n          <h2 className=\"text-xl font-bold mb-6\">You Might Also Like</h2>\n          <div className=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-5\">\n            {recommendations.map(r => (\n              <MediaCard key={r.id} item={r} mediaType={mediaType} />\n            ))}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default Details;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name ArrowLeft\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtMTIgMTktNy03IDctNyIgLz4KICA8cGF0aCBkPSJNMTkgMTJINSIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/arrow-left\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ArrowLeft = createLucideIcon('ArrowLeft', [\n  ['path', { d: 'm12 19-7-7 7-7', key: '1l729n' }],\n  ['path', { d: 'M19 12H5', key: 'x3x0zl' }],\n]);\n\nexport default ArrowLeft;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Award\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtMTUuNDc3IDEyLjg5IDEuNTE1IDguNTI2YS41LjUgMCAwIDEtLjgxLjQ3bC0zLjU4LTIuNjg3YTEgMSAwIDAgMC0xLjE5NyAwbC0zLjU4NiAyLjY4NmEuNS41IDAgMCAxLS44MS0uNDY5bDEuNTE0LTguNTI2IiAvPgogIDxjaXJjbGUgY3g9IjEyIiBjeT0iOCIgcj0iNiIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/award\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Award = createLucideIcon('Award', [\n  [\n    'path',\n    {\n      d: 'm15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526',\n      key: '1yiouv',\n    },\n  ],\n  ['circle', { cx: '12', cy: '8', r: '6', key: '1vp47v' }],\n]);\n\nexport default Award;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Check\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjAgNiA5IDE3bC01LTUiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/check\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Check = createLucideIcon('Check', [['path', { d: 'M20 6 9 17l-5-5', key: '1gmf2c' }]]);\n\nexport default Check;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Clock\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMCIgLz4KICA8cG9seWxpbmUgcG9pbnRzPSIxMiA2IDEyIDEyIDE2IDE0IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/clock\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Clock = createLucideIcon('Clock', [\n  ['circle', { cx: '12', cy: '12', r: '10', key: '1mglay' }],\n  ['polyline', { points: '12 6 12 12 16 14', key: '68esgv' }],\n]);\n\nexport default Clock;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Eye\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMiAxMnMzLTcgMTAtNyAxMCA3IDEwIDctMyA3LTEwIDctMTAtNy0xMC03WiIgLz4KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIzIiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/eye\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Eye = createLucideIcon('Eye', [\n  ['path', { d: 'M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z', key: 'rwhkz3' }],\n  ['circle', { cx: '12', cy: '12', r: '3', key: '1v7zrd' }],\n]);\n\nexport default Eye;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Play\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cG9seWdvbiBwb2ludHM9IjYgMyAyMCAxMiA2IDIxIDYgMyIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/play\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Play = createLucideIcon('Play', [\n  ['polygon', { points: '6 3 20 12 6 21 6 3', key: '1oa8hb' }],\n]);\n\nexport default Play;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Plus\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNNSAxMmgxNCIgLz4KICA8cGF0aCBkPSJNMTIgNXYxNCIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/plus\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Plus = createLucideIcon('Plus', [\n  ['path', { d: 'M5 12h14', key: '1ays0h' }],\n  ['path', { d: 'M12 5v14', key: 's699le' }],\n]);\n\nexport default Plus;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Sparkles\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNOS45MzcgMTUuNUEyIDIgMCAwIDAgOC41IDE0LjA2M2wtNi4xMzUtMS41ODJhLjUuNSAwIDAgMSAwLS45NjJMOC41IDkuOTM2QTIgMiAwIDAgMCA5LjkzNyA4LjVsMS41ODItNi4xMzVhLjUuNSAwIDAgMSAuOTYzIDBMMTQuMDYzIDguNUEyIDIgMCAwIDAgMTUuNSA5LjkzN2w2LjEzNSAxLjU4MWEuNS41IDAgMCAxIDAgLjk2NEwxNS41IDE0LjA2M2EyIDIgMCAwIDAtMS40MzcgMS40MzdsLTEuNTgyIDYuMTM1YS41LjUgMCAwIDEtLjk2MyAweiIgLz4KICA8cGF0aCBkPSJNMjAgM3Y0IiAvPgogIDxwYXRoIGQ9Ik0yMiA1aC00IiAvPgogIDxwYXRoIGQ9Ik00IDE3djIiIC8+CiAgPHBhdGggZD0iTTUgMThIMyIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/sparkles\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Sparkles = createLucideIcon('Sparkles', [\n  [\n    'path',\n    {\n      d: 'M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z',\n      key: '4pj2yx',\n    },\n  ],\n  ['path', { d: 'M20 3v4', key: '1olli1' }],\n  ['path', { d: 'M22 5h-4', key: '1gvqau' }],\n  ['path', { d: 'M4 17v2', key: 'vumght' }],\n  ['path', { d: 'M5 18H3', key: 'zchphs' }],\n]);\n\nexport default Sparkles;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Trash2\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMyA2aDE4IiAvPgogIDxwYXRoIGQ9Ik0xOSA2djE0YzAgMS0xIDItMiAySDdjLTEgMC0yLTEtMi0yVjYiIC8+CiAgPHBhdGggZD0iTTggNlY0YzAtMSAxLTIgMi0yaDRjMSAwIDIgMSAyIDJ2MiIgLz4KICA8bGluZSB4MT0iMTAiIHgyPSIxMCIgeTE9IjExIiB5Mj0iMTciIC8+CiAgPGxpbmUgeDE9IjE0IiB4Mj0iMTQiIHkxPSIxMSIgeTI9IjE3IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/trash-2\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Trash2 = createLucideIcon('Trash2', [\n  ['path', { d: 'M3 6h18', key: 'd0wm0j' }],\n  ['path', { d: 'M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6', key: '4alrt4' }],\n  ['path', { d: 'M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2', key: 'v07s0e' }],\n  ['line', { x1: '10', x2: '10', y1: '11', y2: '17', key: '1uufr5' }],\n  ['line', { x1: '14', x2: '14', y1: '11', y2: '17', key: 'xtxkd' }],\n]);\n\nexport default Trash2;\n"],"names":["MediaCard","_ref","_ref2","_ref3","_item$unified_rating","item","mediaType","navigate","useNavigate","user","useAuth","toast","useToast","title","name","poster","poster_path","startsWith","concat","year","release_date","first_air_date","first_publish_year","toString","slice","type","media_type","storedScore","getSyllabusScore","id","rating","unified_rating","vote_average","_jsxs","className","onClick","handleClick","_item$key","workKey","key","replace","tmdb_id","children","_jsx","src","alt","loading","Star","size","Number","toFixed","async","e","stopPropagation","addToLibrary","openlibrary_key","overview","external_rating","genres","genre_ids","join","err","message","Plus","author","React","ExternalLink","createLucideIcon","d","BookCopy","BookMarked","points","ShoppingCart","cx","cy","r","Lightbulb","DollarSign","x1","x2","y1","y2","Globe","TMDB_IMG","TMDB_LOGO","TMDB_PROFILE","PROVIDER_URLS","encodeURIComponent","getProviderUrl","providerName","fallbackLink","urlFn","Object","entries","toLowerCase","includes","LibraryPanel","mediaId","addPayload","libItem","setLibItem","useState","setLoading","saving","setSaving","status","setStatus","setRating","review","setReview","expanded","setExpanded","stableKey","useEffect","cancelled","getLibraryItemByMediaId","user_rating","console","error","lookup","Check","removeFromLibrary","_unused2","Trash2","icon","Clock","label","active","Eye","CheckCircle2","map","s","newStatus","updateLibraryItem","prev","_objectSpread","want","watching","finished","logActivity","action","media_id","poster_url","catch","_unused","handleStatusChange","min","max","step","value","onChange","parseFloat","target","val","getRatingLabel","n","placeholder","rows","updated","disabled","cls","newItem","chosenStatus","handleAdd","BookDetails","_data$authors","_data$description","data","setData","result","getBookDetails","load","totalReaders","want_to_read","currently_reading","already_read","searchQ","ArrowLeft","BookOpen","authors","length","i","_author$name","href","rel","photo","charAt","first_publish_date","edition_count","ratings_count","toLocaleString","Users","description","subjects","_data$subjects","_data$subjects2","_data$authors2","facts","push","Math","floor","yearMatch","match","age","Date","getFullYear","parseInt","some","fact","Sparkles","MovieTVDetails","_data$genres","_data$genres2","_data$recommendations","_data$recommendations2","_data$external_ids","_data$credits","_data$watchProviders","_data$production_comp","_data$external_ids2","_data$external_ids3","_data$credits2","_data$credits2$cast","_data$genres3","extRatings","setExtRatings","ratingsLoaded","setRatingsLoaded","malData","setMalData","_result$external_ids","_result$genres","fetcher","getMovieDetails","getTVDetails","imdbId","external_ids","imdb_id","resultTitle","getOMDbRatings","then","original_language","g","getMALRating","isAnime","avgScore","computeUnifiedRating","setSyllabusScore","recommendations","results","crew","credits","directors","filter","c","job","writers","department","trailer","_data$videos","vids","videos","v","site","find","wpData","providers","AU","US","streamingProviders","flatrate","rentProviders","rent","buyProviders","buy","backdrop_path","tagline","_d$name","profile_path","w","_w$name","rated","Film","awards","Award","boxOffice","budget","revenue","country","production_companies","Info","runtime","number_of_seasons","displayScore","scoreLabel","imdb","score","votes","rt","vote_count","url","scored_by","Play","allow","allowFullScreen","cast","actor","_actor$name","character","p","provider_name","link","logo_path","provider_id","_data$production_comp2","releaseYear","ratio","oscars","noms","number_of_episodes","lang","ja","ko","fr","es","de","it","pt","zh","hi","ar","ru","sv","da","th","tl","pl","nl","tr","toUpperCase","useParams"],"sourceRoot":""}