{"version":3,"file":"static/js/107.78bcebb3.chunk.js","mappings":"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","sources":["components/BookCover.jsx","components/MediaCard.jsx","../node_modules/lucide-react/src/icons/external-link.ts","../node_modules/lucide-react/src/icons/book-copy.ts","../node_modules/lucide-react/src/icons/book-marked.ts","../node_modules/lucide-react/src/icons/shopping-cart.ts","../node_modules/lucide-react/src/icons/lightbulb.ts","../node_modules/lucide-react/src/icons/dollar-sign.ts","../node_modules/lucide-react/src/icons/globe.ts","pages/Details.jsx","../node_modules/lucide-react/src/icons/award.ts","../node_modules/lucide-react/src/icons/book-open.ts","../node_modules/lucide-react/src/icons/check.ts","../node_modules/lucide-react/src/icons/chevron-left.ts","../node_modules/lucide-react/src/icons/clock.ts","../node_modules/lucide-react/src/icons/eye.ts","../node_modules/lucide-react/src/icons/film.ts","../node_modules/lucide-react/src/icons/play.ts","../node_modules/lucide-react/src/icons/plus.ts","../node_modules/lucide-react/src/icons/sparkles.ts","../node_modules/lucide-react/src/icons/trash-2.ts","../node_modules/lucide-react/src/icons/users.ts"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { BookOpen } from 'lucide-react';\n\n/**\n * BookCover — resilient cover image with automatic fallback chain.\n *\n * Open Library returns 1×1 transparent pixels for missing covers\n * instead of a proper 404. This component detects that and automatically\n * tries the next URL in the provided chain until one works.\n *\n * @param {string[]}  urls      — ordered cover URLs to try\n * @param {string}    alt       — image alt text\n * @param {string}    className — applied to both <img> and fallback\n * @param {ReactNode} children  — custom fallback (default: BookOpen icon)\n */\nfunction BookCover({ urls = [], alt = '', className = '', children }) {\n  const [index, setIndex] = useState(0);\n  const [broken, setBroken] = useState(false);\n\n  // Reset when the book changes\n  const urlKey = urls[0] || '';\n  useEffect(() => { setIndex(0); setBroken(false); }, [urlKey]);\n\n  const advance = () => {\n    setIndex(prev => {\n      const next = prev + 1;\n      if (next >= urls.length) { setBroken(true); return prev; }\n      return next;\n    });\n  };\n\n  if (broken || urls.length === 0) {\n    return children ?? (\n      <div className={`${className} bg-dark-600 flex flex-col items-center justify-center`}>\n        <BookOpen size={20} className=\"text-white/15\" />\n      </div>\n    );\n  }\n\n  return (\n    <img\n      key={urls[index]}\n      src={urls[index]}\n      alt={alt}\n      className={className}\n      loading=\"lazy\"\n      decoding=\"async\"\n      onError={advance}\n      onLoad={e => { if (e.target.naturalWidth <= 1) advance(); }}\n    />\n  );\n}\n\nexport default React.memo(BookCover);\n","import React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { Plus, Star } from 'lucide-react';\nimport BookCover from './BookCover';\nimport { addToLibrary, getSyllabusScore } from '../services/api';\nimport { useAuth } from '../context/AuthContext';\nimport { useToast } from '../context/ToastContext';\n\nconst TMDB_IMG = 'https://image.tmdb.org/t/p/w342';\n\nfunction MediaCard({ item, mediaType = 'movie' }) {\n  const navigate = useNavigate();\n  const { user } = useAuth();\n  const toast = useToast();\n\n  const title = item.title || item.name;\n  const poster = item.poster_path\n    ? (item.poster_path.startsWith('http') ? item.poster_path : `${TMDB_IMG}${item.poster_path}`)\n    : null;\n  const year = (item.release_date || item.first_air_date || item.first_publish_year || '').toString().slice(0, 4);\n  const type = item.media_type || mediaType;\n\n  // Prefer: unified_rating (from enrichment) → stored Syllabus Score → TMDB vote_average → book rating\n  const storedScore = type !== 'book' ? getSyllabusScore(type, item.id) : null;\n  const rating = item.unified_rating ?? storedScore ?? item.vote_average ?? item.rating;\n\n  const handleClick = () => {\n    if (type === 'book') {\n      // If Google Books, use the ID directly; if Open Library, strip /works/\n      let bookKey = item.key || '';\n      if (bookKey.startsWith('/works/')) bookKey = bookKey.replace('/works/', '');\n      if (bookKey) navigate(`/details/book/${bookKey}`);\n      return;\n    }\n    const id = item.id || item.tmdb_id;\n    navigate(`/details/${type}/${id}`);\n  };\n\n  const handleAdd = async (e) => {\n    e.stopPropagation();\n    if (!user) return toast('Please log in first', 'error');\n    try {\n      await addToLibrary({\n        tmdb_id: type !== 'book' ? item.id : null,\n        openlibrary_key: type === 'book' ? item.key : null,\n        media_type: type,\n        title,\n        poster_path: poster,\n        overview: item.overview || '',\n        external_rating: rating || null,\n        genres: item.genre_ids ? item.genre_ids.join(',') : '',\n        release_date: item.release_date || item.first_air_date || '',\n      });\n      toast(`Added \"${title}\" to your library!`, 'success');\n    } catch (err) {\n      toast(err?.message === 'Already in your library' ? `\"${title}\" is already in your library` : 'Could not add to library', 'error');\n    }\n  };\n\n  const [imgBroken, setImgBroken] = useState(false);\n  const isBook = type === 'book';\n\n  return (\n    <div\n      className=\"group relative rounded-2xl overflow-hidden bg-dark-700/50 border border-white/5 cursor-pointer transition-all duration-300 hover:-translate-y-1.5 hover:shadow-[0_8px_30px_rgba(233,69,96,0.12)] hover:border-white/10\"\n      onClick={handleClick}\n    >\n      {isBook ? (\n        <BookCover\n          urls={item.cover_urls || (poster ? [poster] : [])}\n          alt={title}\n          className=\"w-full aspect-[2/3] object-cover\"\n        >\n          <div className=\"w-full aspect-[2/3] bg-dark-600 flex items-center justify-center text-white/30 text-xs p-4 text-center\">\n            {title}\n          </div>\n        </BookCover>\n      ) : poster && !imgBroken ? (\n        <img src={poster} alt={title} loading=\"lazy\" className=\"w-full aspect-[2/3] object-cover\"\n          onError={() => setImgBroken(true)}\n          onLoad={e => { if (e.target.naturalWidth <= 1) setImgBroken(true); }}\n        />\n      ) : (\n        <div className=\"w-full aspect-[2/3] bg-dark-600 flex items-center justify-center text-white/30 text-xs p-4 text-center\">\n          {title}\n        </div>\n      )}\n\n      {rating > 0 && (\n        <div className=\"absolute top-3 right-3 bg-black/70 backdrop-blur-md rounded-lg px-2 py-1 flex items-center gap-1 text-xs font-semibold\">\n          <Star size={13} className=\"text-gold fill-gold\" />\n          {Number(rating).toFixed(1)}\n        </div>\n      )}\n\n      <button\n        onClick={handleAdd}\n        title=\"Add to library\"\n        className=\"absolute bottom-16 right-3 w-9 h-9 rounded-full bg-accent text-white flex items-center justify-center opacity-0 scale-75 group-hover:opacity-100 group-hover:scale-100 transition-all duration-200 hover:bg-accent-hover\"\n      >\n        <Plus size={18} />\n      </button>\n\n      <div className=\"p-3\">\n        <p className=\"text-sm font-semibold truncate\">{title}</p>\n        <p className=\"text-xs text-white/40 mt-1\">\n          {year}{type === 'book' && item.author ? ` · ${item.author}` : ''}\n        </p>\n      </div>\n    </div>\n  );\n}\n\nexport default React.memo(MediaCard);\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M15 3h6v6', key: '1q9fwt' }],\n  ['path', { d: 'M10 14 21 3', key: 'gplh6r' }],\n  ['path', { d: 'M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6', key: 'a6xqqp' }],\n];\n\n/**\n * @component @name ExternalLink\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTUgM2g2djYiIC8+CiAgPHBhdGggZD0iTTEwIDE0IDIxIDMiIC8+CiAgPHBhdGggZD0iTTE4IDEzdjZhMiAyIDAgMCAxLTIgMkg1YTIgMiAwIDAgMS0yLTJWOGEyIDIgMCAwIDEgMi0yaDYiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/external-link\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ExternalLink = createLucideIcon('external-link', __iconNode);\n\nexport default ExternalLink;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M5 7a2 2 0 0 0-2 2v11', key: '1yhqjt' }],\n  ['path', { d: 'M5.803 18H5a2 2 0 0 0 0 4h9.5a.5.5 0 0 0 .5-.5V21', key: 'edzzo5' }],\n  [\n    'path',\n    {\n      d: 'M9 15V4a2 2 0 0 1 2-2h9.5a.5.5 0 0 1 .5.5v14a.5.5 0 0 1-.5.5H11a2 2 0 0 1 0-4h10',\n      key: '1nwzrg',\n    },\n  ],\n];\n\n/**\n * @component @name BookCopy\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNNSA3YTIgMiAwIDAgMC0yIDJ2MTEiIC8+CiAgPHBhdGggZD0iTTUuODAzIDE4SDVhMiAyIDAgMCAwIDAgNGg5LjVhLjUuNSAwIDAgMCAuNS0uNVYyMSIgLz4KICA8cGF0aCBkPSJNOSAxNVY0YTIgMiAwIDAgMSAyLTJoOS41YS41LjUgMCAwIDEgLjUuNXYxNGEuNS41IDAgMCAxLS41LjVIMTFhMiAyIDAgMCAxIDAtNGgxMCIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/book-copy\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst BookCopy = createLucideIcon('book-copy', __iconNode);\n\nexport default BookCopy;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M10 2v8l3-3 3 3V2', key: 'sqw3rj' }],\n  [\n    'path',\n    {\n      d: 'M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20',\n      key: 'k3hazp',\n    },\n  ],\n];\n\n/**\n * @component @name BookMarked\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTAgMnY4bDMtMyAzIDNWMiIgLz4KICA8cGF0aCBkPSJNNCAxOS41di0xNUEyLjUgMi41IDAgMCAxIDYuNSAySDE5YTEgMSAwIDAgMSAxIDF2MThhMSAxIDAgMCAxLTEgMUg2LjVhMSAxIDAgMCAxIDAtNUgyMCIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/book-marked\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst BookMarked = createLucideIcon('book-marked', __iconNode);\n\nexport default BookMarked;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['circle', { cx: '8', cy: '21', r: '1', key: 'jimo8o' }],\n  ['circle', { cx: '19', cy: '21', r: '1', key: '13723u' }],\n  [\n    'path',\n    {\n      d: 'M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12',\n      key: '9zh506',\n    },\n  ],\n];\n\n/**\n * @component @name ShoppingCart\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8Y2lyY2xlIGN4PSI4IiBjeT0iMjEiIHI9IjEiIC8+CiAgPGNpcmNsZSBjeD0iMTkiIGN5PSIyMSIgcj0iMSIgLz4KICA8cGF0aCBkPSJNMi4wNSAyLjA1aDJsMi42NiAxMi40MmEyIDIgMCAwIDAgMiAxLjU4aDkuNzhhMiAyIDAgMCAwIDEuOTUtMS41N2wxLjY1LTcuNDNINS4xMiIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/shopping-cart\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ShoppingCart = createLucideIcon('shopping-cart', __iconNode);\n\nexport default ShoppingCart;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  [\n    'path',\n    {\n      d: 'M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5',\n      key: '1gvzjb',\n    },\n  ],\n  ['path', { d: 'M9 18h6', key: 'x1upvd' }],\n  ['path', { d: 'M10 22h4', key: 'ceow96' }],\n];\n\n/**\n * @component @name Lightbulb\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTUgMTRjLjItMSAuNy0xLjcgMS41LTIuNSAxLS45IDEuNS0yLjIgMS41LTMuNUE2IDYgMCAwIDAgNiA4YzAgMSAuMiAyLjIgMS41IDMuNS43LjcgMS4zIDEuNSAxLjUgMi41IiAvPgogIDxwYXRoIGQ9Ik05IDE4aDYiIC8+CiAgPHBhdGggZD0iTTEwIDIyaDQiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/lightbulb\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Lightbulb = createLucideIcon('lightbulb', __iconNode);\n\nexport default Lightbulb;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['line', { x1: '12', x2: '12', y1: '2', y2: '22', key: '7eqyqh' }],\n  ['path', { d: 'M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6', key: '1b0p4s' }],\n];\n\n/**\n * @component @name DollarSign\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8bGluZSB4MT0iMTIiIHgyPSIxMiIgeTE9IjIiIHkyPSIyMiIgLz4KICA8cGF0aCBkPSJNMTcgNUg5LjVhMy41IDMuNSAwIDAgMCAwIDdoNWEzLjUgMy41IDAgMCAxIDAgN0g2IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/dollar-sign\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst DollarSign = createLucideIcon('dollar-sign', __iconNode);\n\nexport default DollarSign;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['circle', { cx: '12', cy: '12', r: '10', key: '1mglay' }],\n  ['path', { d: 'M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20', key: '13o1zl' }],\n  ['path', { d: 'M2 12h20', key: '9i4pu4' }],\n];\n\n/**\n * @component @name Globe\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMCIgLz4KICA8cGF0aCBkPSJNMTIgMmExNC41IDE0LjUgMCAwIDAgMCAyMCAxNC41IDE0LjUgMCAwIDAgMC0yMCIgLz4KICA8cGF0aCBkPSJNMiAxMmgyMCIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/globe\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Globe = createLucideIcon('globe', __iconNode);\n\nexport default Globe;\n","import React, { useEffect, useState } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { Star, ChevronLeft, Plus, Check, ExternalLink, BookOpen, Users, BookCopy, ShoppingCart, BookMarked, Eye, CheckCircle2, Play, Award, Clapperboard, PenLine, DollarSign, Globe, Film, Info, Clock, Trash2, MessageSquare, X, Sparkles, Lightbulb } from 'lucide-react';\nimport MediaCard from '../components/MediaCard';\nimport BookCover from '../components/BookCover';\nimport { getMovieDetails, getTVDetails, getOMDbRatings, getMALRating, computeUnifiedRating, setSyllabusScore, getSyllabusScore, getBookDetails, getBookRecommendations, addToLibrary, getLibraryItemByMediaId, updateLibraryItem, removeFromLibrary, logActivity } from '../services/api';\nimport { useToast } from '../context/ToastContext';\nimport { useAuth } from '../context/AuthContext';\n\nconst TMDB_IMG = 'https://image.tmdb.org/t/p/w780';\nconst TMDB_BACKDROP = 'https://image.tmdb.org/t/p/w1280';\nconst TMDB_LOGO = 'https://image.tmdb.org/t/p/w92';\nconst TMDB_PROFILE = 'https://image.tmdb.org/t/p/w185';\n\n// Map provider names → their direct search/browse URLs\nconst PROVIDER_URLS = {\n  'Netflix': (title) => `https://www.netflix.com/search?q=${encodeURIComponent(title)}`,\n  'Amazon Prime Video': (title) => `https://www.amazon.com/s?i=instant-video&k=${encodeURIComponent(title)}`,\n  'Amazon Video': (title) => `https://www.amazon.com/s?i=instant-video&k=${encodeURIComponent(title)}`,\n  'Disney Plus': (title) => `https://www.disneyplus.com/search/${encodeURIComponent(title)}`,\n  'Apple TV': (title) => `https://tv.apple.com/search?term=${encodeURIComponent(title)}`,\n  'Apple TV Plus': (title) => `https://tv.apple.com/search?term=${encodeURIComponent(title)}`,\n  'Stan': (title) => `https://www.stan.com.au/search?q=${encodeURIComponent(title)}`,\n  'Binge': (title) => `https://binge.com.au/search?q=${encodeURIComponent(title)}`,\n  'Paramount Plus': (title) => `https://www.paramountplus.com/search/?q=${encodeURIComponent(title)}`,\n  'Paramount+ Amazon Channel': (title) => `https://www.amazon.com/s?i=instant-video&k=${encodeURIComponent(title)}`,\n  'Foxtel Now': (title) => `https://www.foxtel.com.au/now/search.html?q=${encodeURIComponent(title)}`,\n  'Hulu': (title) => `https://www.hulu.com/search?q=${encodeURIComponent(title)}`,\n  'HBO Max': (title) => `https://play.max.com/search?q=${encodeURIComponent(title)}`,\n  'Max': (title) => `https://play.max.com/search?q=${encodeURIComponent(title)}`,\n  'Peacock': (title) => `https://www.peacocktv.com/search?q=${encodeURIComponent(title)}`,\n  'Crunchyroll': (title) => `https://www.crunchyroll.com/search?q=${encodeURIComponent(title)}`,\n  'Google Play Movies': (title) => `https://play.google.com/store/search?q=${encodeURIComponent(title)}&c=movies`,\n  'YouTube': (title) => `https://www.youtube.com/results?search_query=${encodeURIComponent(title)}`,\n  'Microsoft Store': (title) => `https://www.microsoft.com/en-au/search/shop/movies-tv?q=${encodeURIComponent(title)}`,\n};\n\nfunction getProviderUrl(providerName, title, fallbackLink) {\n  for (const [key, urlFn] of Object.entries(PROVIDER_URLS)) {\n    if (providerName.toLowerCase().includes(key.toLowerCase()) || key.toLowerCase().includes(providerName.toLowerCase())) {\n      return urlFn(title);\n    }\n  }\n  return fallbackLink || '#';\n}\n\n/* ─────────────────────────────────────────────────── */\n/*  Library Panel — inline status / rate / review       */\n/* ─────────────────────────────────────────────────── */\nfunction LibraryPanel({ mediaId, addPayload }) {\n  const [libItem, setLibItem] = useState(null);          // null = not in lib, object = in lib\n  const [loading, setLoading] = useState(true);\n  const [saving, setSaving] = useState(false);\n  const [status, setStatus] = useState('watching');\n  const [rating, setRating] = useState(0);\n  const [review, setReview] = useState('');\n  const [expanded, setExpanded] = useState(false);\n  const toast = useToast();\n  const { user } = useAuth();\n\n  // Stable primitive key so the effect doesn't re-fire every render\n  const stableKey = mediaId.tmdb_id || mediaId.openlibrary_key;\n\n  useEffect(() => {\n    let cancelled = false;\n    async function lookup() {\n      if (!user) { setLoading(false); return; }\n      try {\n        const item = await getLibraryItemByMediaId(mediaId);\n        if (cancelled) return;\n        if (item) {\n          setLibItem(item);\n          setStatus(item.status || 'watching');\n          setRating(item.user_rating || 0);\n          setReview(item.review || '');\n          setExpanded(true);\n        }\n      } catch (err) {\n        console.error('Library lookup failed:', err);\n      }\n      if (!cancelled) setLoading(false);\n    }\n    lookup();\n    return () => { cancelled = true; };\n  }, [stableKey, user]);\n\n  const handleAdd = async (chosenStatus) => {\n    if (!user) return toast('Please log in first', 'error');\n    try {\n      const newItem = await addToLibrary({ ...addPayload, status: chosenStatus });\n      setLibItem(newItem);\n      setStatus(chosenStatus);\n      setExpanded(true);\n      toast(`Added to library!`, 'success');\n      logActivity({ action: 'added', title: addPayload.title, media_type: addPayload.media_type, media_id: addPayload.tmdb_id || addPayload.openlibrary_key, poster_url: addPayload.poster_url }).catch(() => {});\n    } catch (err) {\n      toast(err?.message === 'Already in your library' ? 'Already in your library' : 'Could not add', 'error');\n    }\n  };\n\n  const handleStatusChange = async (newStatus) => {\n    setStatus(newStatus);\n    if (libItem) {\n      try {\n        await updateLibraryItem(libItem.id, { status: newStatus });\n        setLibItem(prev => ({ ...prev, status: newStatus }));\n        const labels = { want: 'Wishlist', watching: 'In Progress', finished: 'Finished' };\n        toast(`Moved to ${labels[newStatus]}`, 'info');\n        if (newStatus === 'finished') {\n          logActivity({ action: 'finished', title: addPayload.title, media_type: addPayload.media_type, media_id: addPayload.tmdb_id || addPayload.openlibrary_key, poster_url: addPayload.poster_url }).catch(() => {});\n        }\n      } catch { toast('Failed to update status', 'error'); }\n    }\n  };\n\n  const handleSave = async () => {\n    if (!libItem) return;\n    setSaving(true);\n    try {\n      const updated = await updateLibraryItem(libItem.id, {\n        user_rating: rating || null,\n        review: review || null,\n        status,\n      });\n      setLibItem(updated);\n      toast('Saved!', 'success');\n      if (rating) {\n        logActivity({ action: 'rated', title: addPayload.title, media_type: addPayload.media_type, media_id: addPayload.tmdb_id || addPayload.openlibrary_key, poster_url: addPayload.poster_url, rating }).catch(() => {});\n      }\n      if (review) {\n        logActivity({ action: 'reviewed', title: addPayload.title, media_type: addPayload.media_type, media_id: addPayload.tmdb_id || addPayload.openlibrary_key, poster_url: addPayload.poster_url, review }).catch(() => {});\n      }\n    } catch (err) {\n      console.error('Save failed:', err);\n      toast(err?.message || 'Failed to save — try again', 'error');\n    }\n    setSaving(false);\n  };\n\n  const handleRemove = async () => {\n    if (!libItem) return;\n    try {\n      await removeFromLibrary(libItem.id);\n      setLibItem(null);\n      setStatus('watching');\n      setRating(0);\n      setReview('');\n      setExpanded(false);\n      toast('Removed from library', 'success');\n    } catch { toast('Failed to remove', 'error'); }\n  };\n\n  const getRatingColor = (val) => {\n    if (val <= 3) return 'from-red-500 to-red-600';\n    if (val <= 5) return 'from-orange-500 to-amber-500';\n    if (val <= 7) return 'from-yellow-500 to-lime-500';\n    if (val <= 9) return 'from-green-400 to-emerald-500';\n    return 'from-emerald-400 to-cyan-400';\n  };\n\n  const getRatingLabel = (val) => {\n    if (!val || val === 0) return '';\n    if (val <= 2) return 'Terrible';\n    if (val <= 4) return 'Not great';\n    if (val <= 5) return 'Okay';\n    if (val <= 6.5) return 'Decent';\n    if (val <= 7.5) return 'Good';\n    if (val <= 8.5) return 'Great';\n    if (val <= 9.5) return 'Amazing';\n    return 'Masterpiece';\n  };\n\n  if (loading) return <div className=\"h-12 w-48 bg-dark-700 rounded-xl animate-pulse mt-2\" />;\n  if (!user) return (\n    <p className=\"text-xs text-white/30 mt-4\">Log in to add to your library</p>\n  );\n\n  // ─── Not in library: show add buttons ───\n  if (!libItem) {\n    return (\n      <div className=\"mt-6\">\n        <p className=\"text-[10px] text-white/30 uppercase tracking-wider mb-2\">Add to Library</p>\n        <div className=\"flex flex-wrap gap-2\">\n          {[\n            { key: 'watching', icon: Eye, label: 'Watching', cls: 'bg-blue-500 hover:bg-blue-600' },\n            { key: 'want', icon: Clock, label: 'Wishlist', cls: 'bg-purple-500 hover:bg-purple-600' },\n            { key: 'finished', icon: CheckCircle2, label: 'Finished', cls: 'bg-green-500 hover:bg-green-600' },\n          ].map(s => (\n            <button key={s.key} onClick={() => handleAdd(s.key)}\n              className={`${s.cls} text-white px-4 py-2.5 rounded-xl text-sm font-medium flex items-center gap-2 transition-all duration-200 hover:scale-[1.02] active:scale-95`}>\n              <s.icon size={16} />\n              {s.label}\n            </button>\n          ))}\n        </div>\n      </div>\n    );\n  }\n\n  // ─── In library: full control panel ───\n  return (\n    <div className=\"mt-6 bg-white/[0.03] border border-white/[0.08] rounded-2xl overflow-hidden\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between px-4 py-3 border-b border-white/[0.06]\">\n        <div className=\"flex items-center gap-2\">\n          <Check size={16} className=\"text-green-400\" />\n          <span className=\"text-sm font-medium text-white/70\">In Your Library</span>\n        </div>\n        <div className=\"flex items-center gap-1.5\">\n          <button onClick={() => setExpanded(e => !e)}\n            className=\"text-xs text-white/30 hover:text-white/60 px-2 py-1 rounded-lg hover:bg-white/5 transition-all\">\n            {expanded ? 'Collapse' : 'Edit'}\n          </button>\n          <button onClick={handleRemove}\n            className=\"text-white/20 hover:text-red-400 p-1 rounded-lg hover:bg-white/5 transition-all\" title=\"Remove\">\n            <Trash2 size={14} />\n          </button>\n        </div>\n      </div>\n\n      {/* Status buttons (always visible) */}\n      <div className=\"px-4 py-3 flex gap-2\">\n        {[\n          { key: 'want', icon: Clock, label: 'Wishlist', active: 'bg-purple-500 text-white border-purple-400' },\n          { key: 'watching', icon: Eye, label: 'In Progress', active: 'bg-blue-500 text-white border-blue-400' },\n          { key: 'finished', icon: CheckCircle2, label: 'Finished', active: 'bg-green-500 text-white border-green-400' },\n        ].map(s => (\n          <button key={s.key} onClick={() => handleStatusChange(s.key)}\n            className={`flex-1 py-2 rounded-xl text-xs font-semibold border flex items-center justify-center gap-1.5 transition-all duration-200 ${\n              status === s.key ? s.active : 'border-white/10 text-white/40 hover:border-white/20 hover:text-white/70'\n            }`}>\n            <s.icon size={13} />\n            {s.label}\n          </button>\n        ))}\n      </div>\n\n      {/* Expanded: rating + review */}\n      {expanded && (\n        <div className=\"px-4 pb-4 space-y-4\">\n          {/* Rating */}\n          <div>\n            <label className=\"text-[10px] text-white/30 uppercase tracking-wider block mb-2\">Your Rating</label>\n            <div className=\"flex items-center gap-4\">\n              <div className=\"flex-1\">\n                <input type=\"range\" min=\"0\" max=\"10\" step=\"0.1\" value={rating}\n                  onChange={e => setRating(parseFloat(e.target.value))}\n                  className=\"w-full h-1.5 rounded-full appearance-none cursor-pointer bg-dark-600\n                    [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-4 [&::-webkit-slider-thumb]:h-4\n                    [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-accent [&::-webkit-slider-thumb]:shadow-lg\n                    [&::-webkit-slider-thumb]:shadow-accent/30 [&::-webkit-slider-thumb]:cursor-pointer\n                    [&::-webkit-slider-thumb]:border-2 [&::-webkit-slider-thumb]:border-white/20\" />\n                <div className=\"flex justify-between mt-1\">\n                  <span className=\"text-[9px] text-white/15\">0</span>\n                  <span className=\"text-[9px] text-white/15\">5</span>\n                  <span className=\"text-[9px] text-white/15\">10</span>\n                </div>\n              </div>\n              <div className=\"text-right min-w-[60px]\">\n                <span className={`text-2xl font-black bg-gradient-to-r ${rating > 0 ? getRatingColor(rating) : 'from-white/20 to-white/20'} bg-clip-text text-transparent`}>\n                  {rating > 0 ? Number(rating).toFixed(1) : '—'}\n                </span>\n                {rating > 0 && <p className=\"text-[9px] text-white/30\">{getRatingLabel(rating)}</p>}\n              </div>\n            </div>\n            {/* Quick picks */}\n            <div className=\"flex gap-1 mt-2\">\n              {[5, 6, 7, 7.5, 8, 8.5, 9, 9.5, 10].map(n => (\n                <button key={n} onClick={() => setRating(n)}\n                  className={`flex-1 py-1 rounded text-[9px] font-bold transition-all ${\n                    rating === n ? 'bg-accent text-white' : 'bg-dark-700 text-white/25 hover:bg-dark-600 hover:text-white/50'\n                  }`}>{n}</button>\n              ))}\n            </div>\n          </div>\n\n          {/* Review */}\n          <div>\n            <label className=\"text-[10px] text-white/30 uppercase tracking-wider block mb-2\">Your Thoughts</label>\n            <textarea value={review} onChange={e => setReview(e.target.value)}\n              placeholder=\"What did you think? (optional)\" rows={2}\n              className=\"w-full bg-dark-700/50 border border-white/[0.06] rounded-xl px-3 py-2.5 text-sm text-white/80 placeholder-white/20 focus:outline-none focus:border-accent/40 resize-none transition-colors\" />\n          </div>\n\n          {/* Save */}\n          <button onClick={handleSave} disabled={saving}\n            className=\"w-full btn-primary py-2.5 text-sm font-semibold disabled:opacity-50 transition-all\">\n            {saving ? 'Saving...' : 'Save'}\n          </button>\n        </div>\n      )}\n    </div>\n  );\n}\n\n/* ─────────────────────────────────────────────────── */\n/*  Book Detail View                                    */\n/* ─────────────────────────────────────────────────── */\nfunction BookDetails({ workKey, navigate }) {\n  const [data, setData] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [recommendations, setRecommendations] = useState([]);\n  const toast = useToast();\n\n  useEffect(() => {\n    let cancelled = false;\n    setLoading(true);\n    const key = workKey.startsWith('/works/') ? workKey : `/works/${workKey}`;\n    getBookDetails(key).then(result => {\n      if (!cancelled) { setData(result); setLoading(false); }\n    });\n    return () => { cancelled = true; };\n  }, [workKey]);\n\n  useEffect(() => {\n    if (!data) return;\n    getBookRecommendations(data).then(setRecommendations).catch(() => {});\n  }, [data?.key]);\n\n  if (loading) return <div className=\"flex justify-center py-20\"><div className=\"w-8 h-8 border-2 border-dark-500 border-t-accent rounded-full animate-spin\" /></div>;\n  if (!data) return <div className=\"text-center py-20 text-white/40\"><h3 className=\"text-lg\">Book not found</h3></div>;\n\n  const totalReaders = (data.want_to_read || 0) + (data.currently_reading || 0) + (data.already_read || 0);\n  const searchQ = encodeURIComponent(`${data.title} book`);\n  const isGoogleBook = !!data.google_id;\n\n  return (\n    <div>\n      {/* Gradient backdrop */}\n      <div className=\"absolute top-0 left-0 w-full h-80 -z-10 overflow-hidden\">\n        <div className=\"w-full h-full bg-gradient-to-br from-accent/15 via-dark-800 to-dark-900\" />\n        <div className=\"absolute inset-0 bg-gradient-to-b from-transparent to-dark-900\" />\n      </div>\n\n      <button onClick={() => navigate(-1)} className=\"inline-flex items-center gap-1 text-white/50 hover:text-white mb-8 transition-colors\">\n        <ChevronLeft size={22} strokeWidth={2.5} /> Back\n      </button>\n\n      <div className=\"flex flex-col md:flex-row gap-8\">\n        {/* Cover — prefer Google Books covers for speed */}\n        <BookCover\n          urls={data.cover_urls || (data.poster_path ? [data.poster_path] : [])}\n          alt={data.title}\n          className=\"w-48 sm:w-56 md:w-64 max-h-[400px] rounded-2xl shadow-2xl shadow-black/50 flex-shrink-0 bg-dark-700 object-contain\"\n        >\n          <div className=\"w-48 sm:w-56 md:w-64 aspect-[2/3] rounded-2xl bg-dark-700 flex items-center justify-center text-white/30 text-sm flex-shrink-0\">\n            <BookOpen size={48} className=\"text-white/10\" />\n          </div>\n        </BookCover>\n\n        {/* Info */}\n        <div className=\"flex-1 min-w-0\">\n          <h1 className=\"text-3xl md:text-4xl font-bold mb-2\">{data.title}</h1>\n\n          {/* Authors */}\n          {data.authors?.length > 0 && (\n            <div className=\"flex flex-wrap items-center gap-3 mb-3\">\n              {data.authors.map((author, i) => (\n                <a\n                  key={author.key || i}\n                  href={`https://www.google.com/search?q=${encodeURIComponent(author.name + ' author')}`}\n                  target=\"_blank\" rel=\"noopener noreferrer\"\n                  className=\"flex items-center gap-2 hover:text-accent transition-colors\"\n                >\n                  {author.photo ? (\n                    <img src={author.photo} alt={author.name} className=\"w-7 h-7 rounded-full object-cover border border-white/10\" />\n                  ) : (\n                    <div className=\"w-7 h-7 rounded-full bg-dark-600 flex items-center justify-center text-white/30 text-xs font-bold border border-white/10\">\n                      {author.name?.charAt(0)}\n                    </div>\n                  )}\n                  <span className=\"text-sm text-white/60\">{author.name}</span>\n                  <ExternalLink size={12} className=\"text-white/20\" />\n                </a>\n              ))}\n            </div>\n          )}\n\n          <p className=\"text-white/40 text-sm mb-5\">\n            {data.first_publish_date && `First published ${data.first_publish_date}`}\n            {data.edition_count > 0 && ` · ${data.edition_count} editions`}\n          </p>\n\n          {/* Rating + Stats */}\n          <div className=\"flex flex-wrap items-start gap-3 mb-6\">\n            {data.rating && (\n              <a href={isGoogleBook ? data.info_link : `https://openlibrary.org${data.key}`} target=\"_blank\" rel=\"noopener noreferrer\"\n                className=\"bg-accent/10 border border-accent/20 rounded-xl px-4 py-3 text-center min-w-[80px] hover:bg-accent/20 transition-colors\">\n                <div className=\"flex items-center justify-center gap-1.5 mb-1\">\n                  <Star size={16} className=\"text-gold fill-gold\" />\n                  <span className=\"text-xl font-black\">{data.rating}</span>\n                  <span className=\"text-white/30 text-xs\">/ 10</span>\n                </div>\n                <p className=\"text-[10px] text-white/40 uppercase tracking-wider\">{isGoogleBook ? 'Google Books' : 'Open Library'}</p>\n                {data.ratings_count > 0 && <p className=\"text-[9px] text-white/20\">{data.ratings_count.toLocaleString()} ratings</p>}\n              </a>\n            )}\n\n            {totalReaders > 0 && (\n              <div className=\"bg-white/[0.04] border border-white/[0.06] rounded-xl px-4 py-3 text-center min-w-[80px]\">\n                <div className=\"flex items-center justify-center gap-1.5 mb-1\">\n                  <Users size={14} className=\"text-accent\" />\n                  <span className=\"text-lg font-bold\">{totalReaders.toLocaleString()}</span>\n                </div>\n                <p className=\"text-[10px] text-white/30\">Readers</p>\n              </div>\n            )}\n\n            {data.edition_count > 0 && (\n              <div className=\"bg-white/[0.04] border border-white/[0.06] rounded-xl px-4 py-3 text-center min-w-[80px]\">\n                <div className=\"flex items-center justify-center gap-1.5 mb-1\">\n                  <BookCopy size={14} className=\"text-white/50\" />\n                  <span className=\"text-lg font-bold\">{data.edition_count}</span>\n                </div>\n                <p className=\"text-[10px] text-white/30\">Editions</p>\n              </div>\n            )}\n          </div>\n\n          {/* Reader breakdown (Open Library only) */}\n          {!isGoogleBook && totalReaders > 0 && (\n            <>\n              <div className=\"flex flex-wrap gap-4 text-xs text-white/40 mb-4\">\n                {data.want_to_read > 0 && <span className=\"flex items-center gap-1.5\"><BookMarked size={14} className=\"text-accent/70\" /> {data.want_to_read.toLocaleString()} want to read</span>}\n                {data.currently_reading > 0 && <span className=\"flex items-center gap-1.5\"><Eye size={14} className=\"text-blue-400/70\" /> {data.currently_reading.toLocaleString()} reading now</span>}\n                {data.already_read > 0 && <span className=\"flex items-center gap-1.5\"><CheckCircle2 size={14} className=\"text-green-400/70\" /> {data.already_read.toLocaleString()} have read</span>}\n              </div>\n              <p className=\"text-[10px] text-white/20 mb-6\">Reader data via Open Library</p>\n            </>\n          )}\n\n          {/* Description */}\n          {data.description && (\n            <p className=\"text-white/60 leading-relaxed mb-6 max-w-2xl whitespace-pre-line\">{data.description}</p>\n          )}\n\n          {/* Subjects */}\n          {data.subjects?.length > 0 && (\n            <div className=\"flex flex-wrap gap-2 mb-6\">\n              {data.subjects.map(s => (\n                <span key={s} className=\"text-xs bg-white/[0.04] border border-white/[0.06] rounded-full px-3 py-1 text-white/50\">{s}</span>\n              ))}\n            </div>\n          )}\n\n          {/* Books You Might Like */}\n          {recommendations.length > 0 && (\n            <div className=\"mt-6 mb-6\">\n              <h3 className=\"text-lg font-semibold mb-3\">Books You Might Like</h3>\n              <div className=\"flex gap-3 overflow-x-auto pb-2\">\n                {recommendations.map(book => (\n                  <div key={book.key} className=\"flex-shrink-0 w-[130px]\">\n                    <MediaCard item={book} />\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {/* Where to Get */}\n          <div className=\"mb-8\">\n            <h3 className=\"text-sm font-semibold text-white/60 mb-3 uppercase tracking-wider\">Where to Get</h3>\n            <div className=\"flex flex-wrap gap-2\">\n              <a href={`https://openlibrary.org${data.key}`} target=\"_blank\" rel=\"noopener noreferrer\"\n                className=\"flex items-center gap-2 bg-white/[0.04] border border-white/[0.06] rounded-lg px-4 py-2.5 hover:bg-white/[0.08] transition-colors\">\n                <BookOpen size={16} className=\"text-white/60\" />\n                <span className=\"text-xs font-medium\">Read Free</span>\n                <ExternalLink size={12} className=\"text-white/30\" />\n              </a>\n              <a href={`https://www.amazon.com/s?k=${searchQ}`} target=\"_blank\" rel=\"noopener noreferrer\"\n                className=\"flex items-center gap-2 bg-[#ff9900]/10 border border-[#ff9900]/20 rounded-lg px-4 py-2.5 hover:bg-[#ff9900]/20 transition-colors\">\n                <ShoppingCart size={16} className=\"text-[#ff9900]\" />\n                <span className=\"text-xs font-medium text-[#ff9900]\">Amazon</span>\n                <ExternalLink size={12} className=\"text-[#ff9900]/40\" />\n              </a>\n              <a href={`https://www.booktopia.com.au/search?keywords=${searchQ}`} target=\"_blank\" rel=\"noopener noreferrer\"\n                className=\"flex items-center gap-2 bg-white/[0.04] border border-white/[0.06] rounded-lg px-4 py-2.5 hover:bg-white/[0.08] transition-colors\">\n                <ShoppingCart size={16} className=\"text-white/60\" />\n                <span className=\"text-xs font-medium\">Booktopia</span>\n                <ExternalLink size={12} className=\"text-white/30\" />\n              </a>\n              <a href={`https://www.goodreads.com/search?q=${searchQ}`} target=\"_blank\" rel=\"noopener noreferrer\"\n                className=\"flex items-center gap-2 bg-white/[0.04] border border-white/[0.06] rounded-lg px-4 py-2.5 hover:bg-white/[0.08] transition-colors\">\n                <Star size={16} className=\"text-white/60\" />\n                <span className=\"text-xs font-medium\">Goodreads</span>\n                <ExternalLink size={12} className=\"text-white/30\" />\n              </a>\n            </div>\n          </div>\n\n          {/* Fun Facts (Open Library stats if available, else Google Books basic) */}\n          {(() => {\n            const facts = [];\n            if (!isGoogleBook) {\n              if (data.edition_count >= 50) facts.push(`📚 Published in ${data.edition_count} editions worldwide — a true global phenomenon.`);\n              else if (data.edition_count >= 10) facts.push(`📖 Available in ${data.edition_count} different editions.`);\n              if (data.already_read > 10000) facts.push(`🏆 Over ${Math.floor(data.already_read / 1000) * 1000} readers have finished this book on Open Library alone.`);\n              if (data.currently_reading > 1000) facts.push(`👀 ${data.currently_reading.toLocaleString()} people are reading this right now!`);\n              if (data.want_to_read > 50000) facts.push(`🔥 More than ${Math.floor(data.want_to_read / 1000)}k people have this on their reading list.`);\n              if (data.ratings_count > 1000) facts.push(`⭐ Rated by ${data.ratings_count.toLocaleString()} readers with an average of ${data.rating}/10.`);\n              if (data.first_publish_date) {\n                const yearMatch = data.first_publish_date.match(/\\d{4}/);\n                if (yearMatch) {\n                  const age = new Date().getFullYear() - parseInt(yearMatch[0]);\n                  if (age > 100) facts.push(`🕰️ First published ${age} years ago — a true classic that has stood the test of time.`);\n                  else if (age > 50) facts.push(`📅 Published over ${age} years ago and still widely read today.`);\n                  else if (age <= 2) facts.push(`✨ A brand new release — one of the latest books to hit shelves.`);\n                }\n              }\n              if (data.subjects?.some(s => s.toLowerCase().includes('new york times'))) facts.push(`📰 A New York Times bestseller.`);\n              if (data.subjects?.some(s => s.toLowerCase().includes('pulitzer'))) facts.push(`🏅 Pulitzer Prize-related work.`);\n              if (data.authors?.length > 2) facts.push(`✍️ A collaborative work by ${data.authors.length} authors.`);\n            } else {\n              if (data.rating) facts.push(`⭐ Rated ${data.rating}/10 by ${data.ratings_count} Google Books users.`);\n              if (data.first_publish_date) {\n                const yearMatch = data.first_publish_date.match(/\\d{4}/);\n                if (yearMatch) {\n                  const age = new Date().getFullYear() - parseInt(yearMatch[0]);\n                  if (age > 100) facts.push(`🕰️ First published ${age} years ago — a true classic.`);\n                  else if (age > 50) facts.push(`📅 Published over ${age} years ago.`);\n                  else if (age <= 2) facts.push(`✨ A brand new release.`);\n                }\n              }\n              if (data.subjects?.length > 0) facts.push(`🏷️ Genres: ${data.subjects.join(', ')}`);\n              if (data.authors?.length > 2) facts.push(`✍️ A collaborative work by ${data.authors.length} authors.`);\n            }\n            return facts.length > 0 ? (\n              <div className=\"mb-8\">\n                <h3 className=\"text-sm font-semibold text-white/60 mb-3 uppercase tracking-wider flex items-center gap-2\">\n                  <Lightbulb size={14} className=\"text-gold\" /> Fun Facts\n                </h3>\n                <div className=\"space-y-2\">\n                  {facts.slice(0, 4).map((fact, i) => (\n                    <div key={i} className=\"flex items-start gap-3 bg-white/[0.03] border border-white/[0.06] rounded-xl px-4 py-3\">\n                      <Sparkles size={14} className=\"text-accent mt-0.5 flex-shrink-0\" />\n                      <p className=\"text-sm text-white/60 leading-relaxed\">{fact}</p>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            ) : null;\n          })()}\n\n          <LibraryPanel\n            mediaId={{ openlibrary_key: data.key }}\n            addPayload={{\n              openlibrary_key: data.key,\n              media_type: 'book',\n              title: data.title,\n              poster_path: data.poster_path,\n              overview: data.description?.slice(0, 500) || '',\n              external_rating: data.rating,\n            }}\n          />\n        </div>\n      </div>\n    </div>\n  );\n}\n\n/* ─────────────────────────────────────────────────── */\n/*  Movie / TV Detail View                              */\n/* ─────────────────────────────────────────────────── */\nfunction Details() {\n  const { mediaType, id } = useParams();\n  const navigate = useNavigate();\n\n  // Book detail route\n  if (mediaType === 'book') {\n    return <BookDetails workKey={id} navigate={navigate} />;\n  }\n\n  return <MovieTVDetails mediaType={mediaType} id={id} navigate={navigate} />;\n}\n\nfunction MovieTVDetails({ mediaType, id, navigate }) {\n  const [data, setData] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [extRatings, setExtRatings] = useState(null);\n  const [ratingsLoaded, setRatingsLoaded] = useState(false);\n  const [malData, setMalData] = useState(null);\n  const toast = useToast();\n\n  useEffect(() => {\n    async function load() {\n      setLoading(true);\n      setExtRatings(null);\n      setRatingsLoaded(false);\n      setMalData(null);\n      const fetcher = mediaType === 'movie' ? getMovieDetails : getTVDetails;\n      const result = await fetcher(id);\n      setData(result);\n      setLoading(false);\n\n      const imdbId = result.external_ids?.imdb_id || result.imdb_id;\n      const resultTitle = result.name || result.title;\n      if (imdbId) {\n        // Try to get OMDb ratings, retry once after 2s if rate-limited\n        const fetchRatings = async () => {\n          let r = await getOMDbRatings(imdbId, resultTitle, mediaType).catch(() => null);\n          if (!r) {\n            await new Promise(resolve => setTimeout(resolve, 2000));\n            r = await getOMDbRatings(imdbId, resultTitle, mediaType).catch(() => null);\n          }\n          return r;\n        };\n        fetchRatings().then(r => { setExtRatings(r); setRatingsLoaded(true); });\n      } else {\n        setRatingsLoaded(true);\n      }\n\n      // Fetch MAL rating for anime\n      const anime = result.original_language === 'ja' &&\n        result.genres?.some(g => g.id === 16);\n      if (anime) {\n        getMALRating(resultTitle).then(r => setMalData(r));\n      }\n    }\n    load();\n  }, [mediaType, id]);\n\n  // Compute unified score (must be before early returns to keep hooks order stable)\n  const isAnime = data ? (data.original_language === 'ja' && data.genres?.some(g => g.id === 16)) : false;\n  const avgScore = computeUnifiedRating(extRatings, malData, isAnime);\n\n  // Persist Syllabus Score so it's available on MediaCards everywhere\n  useEffect(() => {\n    if (avgScore != null && data?.id) {\n      setSyllabusScore(mediaType, data.id, avgScore);\n    }\n  }, [avgScore, data?.id, mediaType]);\n\n  if (loading) return <div className=\"flex justify-center py-20\"><div className=\"w-8 h-8 border-2 border-dark-500 border-t-accent rounded-full animate-spin\" /></div>;\n  if (!data) return <div className=\"text-center py-20 text-white/40\"><h3 className=\"text-lg\">Not found</h3></div>;\n\n  const title = data.title || data.name;\n  const year = (data.release_date || data.first_air_date || '').slice(0, 4);\n  const genres = data.genres?.map(g => g.name).join(', ');\n  const recommendations = data.recommendations?.results?.slice(0, 10) || [];\n  const imdbId = extRatings?.imdb_id || data.external_ids?.imdb_id;\n\n  // Extract directors & writers from TMDB crew (with profile photos)\n  const crew = data.credits?.crew || [];\n  const directors = crew.filter(c => c.job === 'Director').slice(0, 3);\n  const writers = crew.filter(c => c.department === 'Writing').slice(0, 4);\n\n  // Find best trailer (prefer Official Trailer, then any Trailer, then Teaser)\n  const trailer = (() => {\n    const vids = (data.videos?.results || []).filter(v => v.site === 'YouTube');\n    return vids.find(v => v.type === 'Trailer' && v.name.toLowerCase().includes('official'))\n      || vids.find(v => v.type === 'Trailer')\n      || vids.find(v => v.type === 'Teaser')\n      || vids[0]\n      || null;\n  })();\n\n  // Streaming providers (AU first, fallback to US)\n  const wpData = data['watch/providers']?.results;\n  const providers = wpData?.AU || wpData?.US || null;\n  const streamingProviders = providers?.flatrate || [];\n  const rentProviders = providers?.rent || [];\n  const buyProviders = providers?.buy || [];\n\n  // Quick Facts card — rendered in poster column (desktop) and info column (mobile)\n  const quickFactsCard = (\n    <div className=\"bg-white/[0.03] border border-white/[0.06] rounded-xl p-4 space-y-3\">\n      {data.tagline && (\n        <p className=\"text-xs italic text-white/40 leading-relaxed\">\"{data.tagline}\"</p>\n      )}\n      {directors.length > 0 && (\n        <div>\n          <p className=\"text-[10px] text-white/30 uppercase tracking-wider mb-2\">Director</p>\n          <div className=\"space-y-2\">\n            {directors.map(d => (\n              <a key={d.id} href={`https://www.google.com/search?q=${encodeURIComponent(d.name + ' filmmaker')}`}\n                target=\"_blank\" rel=\"noopener noreferrer\" className=\"flex items-center gap-2.5 group/crew hover:bg-white/[0.04] rounded-lg p-1 -m-1 transition-colors\">\n                {d.profile_path ? (\n                  <img src={`${TMDB_PROFILE}${d.profile_path}`} alt={d.name}\n                    className=\"w-8 h-8 rounded-full object-cover border border-white/[0.08] group-hover/crew:border-accent/40 transition-colors\" />\n                ) : (\n                  <div className=\"w-8 h-8 rounded-full bg-dark-600 flex items-center justify-center text-white/20 text-xs font-bold border border-white/[0.08] group-hover/crew:border-accent/40 transition-colors\">\n                    {d.name?.charAt(0)}\n                  </div>\n                )}\n                <span className=\"text-xs text-white/70 group-hover/crew:text-accent transition-colors\">{d.name}</span>\n              </a>\n            ))}\n          </div>\n        </div>\n      )}\n      {writers.length > 0 && (\n        <div>\n          <p className=\"text-[10px] text-white/30 uppercase tracking-wider mb-2\">Writer</p>\n          <div className=\"space-y-2\">\n            {writers.map(w => (\n              <a key={w.id + w.job} href={`https://www.google.com/search?q=${encodeURIComponent(w.name + ' writer')}`}\n                target=\"_blank\" rel=\"noopener noreferrer\" className=\"flex items-center gap-2.5 group/crew hover:bg-white/[0.04] rounded-lg p-1 -m-1 transition-colors\">\n                {w.profile_path ? (\n                  <img src={`${TMDB_PROFILE}${w.profile_path}`} alt={w.name}\n                    className=\"w-8 h-8 rounded-full object-cover border border-white/[0.08] group-hover/crew:border-accent/40 transition-colors\" />\n                ) : (\n                  <div className=\"w-8 h-8 rounded-full bg-dark-600 flex items-center justify-center text-white/20 text-xs font-bold border border-white/[0.08] group-hover/crew:border-accent/40 transition-colors\">\n                    {w.name?.charAt(0)}\n                  </div>\n                )}\n                <div>\n                  <span className=\"text-xs text-white/70 group-hover/crew:text-accent transition-colors block\">{w.name}</span>\n                  <span className=\"text-[10px] text-white/25\">{w.job}</span>\n                </div>\n              </a>\n            ))}\n          </div>\n        </div>\n      )}\n      {extRatings?.rated && (\n        <div className=\"flex items-start gap-2.5\">\n          <Film size={14} className=\"text-white/30 mt-0.5 flex-shrink-0\" />\n          <div>\n            <p className=\"text-[10px] text-white/30 uppercase tracking-wider\">Rated</p>\n            <p className=\"text-xs text-white/70\">{extRatings.rated}</p>\n          </div>\n        </div>\n      )}\n      {extRatings?.awards && (\n        <div className=\"flex items-start gap-2.5\">\n          <Award size={14} className=\"text-accent/60 mt-0.5 flex-shrink-0\" />\n          <div>\n            <p className=\"text-[10px] text-white/30 uppercase tracking-wider\">Awards</p>\n            <p className=\"text-xs text-white/70 leading-relaxed\">{extRatings.awards}</p>\n          </div>\n        </div>\n      )}\n      {(extRatings?.boxOffice || data.budget > 0 || data.revenue > 0) && (\n        <div className=\"flex items-start gap-2.5\">\n          <DollarSign size={14} className=\"text-green-400/60 mt-0.5 flex-shrink-0\" />\n          <div>\n            <p className=\"text-[10px] text-white/30 uppercase tracking-wider\">Box Office</p>\n            {data.budget > 0 && <p className=\"text-xs text-white/50\">Budget: ${(data.budget / 1e6).toFixed(0)}M</p>}\n            {extRatings?.boxOffice && <p className=\"text-xs text-white/70\">Gross: {extRatings.boxOffice}</p>}\n            {data.revenue > 0 && <p className=\"text-xs text-white/70\">Revenue: ${(data.revenue / 1e6).toFixed(0)}M</p>}\n          </div>\n        </div>\n      )}\n      {extRatings?.country && (\n        <div className=\"flex items-start gap-2.5\">\n          <Globe size={14} className=\"text-white/30 mt-0.5 flex-shrink-0\" />\n          <div>\n            <p className=\"text-[10px] text-white/30 uppercase tracking-wider\">Country</p>\n            <p className=\"text-xs text-white/70\">{extRatings.country}</p>\n          </div>\n        </div>\n      )}\n      {data.production_companies?.length > 0 && (\n        <div className=\"flex items-start gap-2.5\">\n          <Info size={14} className=\"text-white/30 mt-0.5 flex-shrink-0\" />\n          <div>\n            <p className=\"text-[10px] text-white/30 uppercase tracking-wider\">Studio</p>\n            <p className=\"text-xs text-white/70\">{data.production_companies.slice(0, 2).map(c => c.name).join(', ')}</p>\n          </div>\n        </div>\n      )}\n      {!ratingsLoaded && data.external_ids?.imdb_id && (\n        <div className=\"space-y-3 animate-pulse\">\n          {[1,2,3].map(i => (<div key={i} className=\"flex gap-2.5\"><div className=\"w-3 h-3 bg-dark-600 rounded\" /><div className=\"flex-1\"><div className=\"h-2 w-10 bg-dark-600 rounded mb-1\" /><div className=\"h-3 w-20 bg-dark-600 rounded\" /></div></div>))}\n        </div>\n      )}\n    </div>\n  );\n\n  return (\n    <div>\n      {/* Backdrop */}\n      {data.backdrop_path && (\n        <div className=\"absolute top-0 left-0 w-full h-80 -z-10 overflow-hidden\">\n          <img src={`${TMDB_BACKDROP}${data.backdrop_path}`} alt=\"\" className=\"w-full h-full object-cover opacity-20\" />\n          <div className=\"absolute inset-0 bg-gradient-to-b from-transparent to-dark-900\" />\n        </div>\n      )}\n\n      <button onClick={() => navigate(-1)}\n        className=\"inline-flex items-center gap-1 text-white/50 hover:text-white mb-8 transition-colors\">\n        <ChevronLeft size={22} strokeWidth={2.5} /> Back\n      </button>\n\n      <div className=\"flex flex-col md:flex-row gap-8\">\n        {/* Poster column — sticky on desktop */}\n        <div className=\"flex-shrink-0 md:sticky md:top-8 md:self-start w-48 sm:w-56 md:w-64 lg:w-72 xl:w-80\">\n          {data.poster_path ? (\n            <img src={`${TMDB_IMG}${data.poster_path}`} alt={title}\n              className=\"w-full rounded-2xl shadow-2xl shadow-black/50 aspect-[2/3] object-cover\" />\n          ) : (\n            <div className=\"w-full aspect-[2/3] rounded-2xl bg-dark-700 flex items-center justify-center text-white/30 text-sm\">\n              No Poster\n            </div>\n          )}\n\n          {/* ── Quick Facts card (desktop only) ── */}\n          <div className=\"hidden md:block mt-4\">\n            {quickFactsCard}\n          </div>\n        </div>\n\n        {/* Info */}\n        <div className=\"flex-1 min-w-0\">\n          <h1 className=\"text-3xl md:text-4xl font-bold mb-3\">{title}</h1>\n\n          <p className=\"text-white/40 text-sm mb-4\">\n            {year} {genres && `· ${genres}`}\n            {data.runtime && ` · ${data.runtime} min`}\n            {data.number_of_seasons && ` · ${data.number_of_seasons} season${data.number_of_seasons > 1 ? 's' : ''}`}\n          </p>\n\n          {/* ── Ratings ── */}\n          <div className=\"flex flex-wrap items-stretch gap-3 mb-6\">\n            {/* Syllabus Score — unified, cached, or TMDB fallback */}\n            {(() => {\n              const syllabusScore = avgScore || getSyllabusScore(mediaType, data.id);\n              const displayScore = syllabusScore || (data.vote_average ? data.vote_average.toFixed(1) : null);\n              const label = syllabusScore ? 'Syllabus Score' : 'TMDB';\n              return displayScore ? (\n                <div className=\"bg-accent/10 border border-accent/20 rounded-xl px-4 py-3 text-center min-w-[90px] flex flex-col justify-center\">\n                  <div className=\"flex items-center justify-center gap-1.5 mb-1\">\n                    <Star size={16} className=\"text-gold fill-gold\" />\n                    <span className=\"text-xl font-black\">{displayScore}</span>\n                    <span className=\"text-white/30 text-xs\">/ 10</span>\n                  </div>\n                  <p className=\"text-[10px] text-white/40 uppercase tracking-wider\">{label}</p>\n                </div>\n              ) : null;\n            })()}\n\n            {/* IMDb — links to IMDb page */}\n            {extRatings?.imdb && (\n              <a href={`https://www.imdb.com/title/${imdbId}/`} target=\"_blank\" rel=\"noopener noreferrer\"\n                className=\"bg-[#f5c518]/[0.08] border border-[#f5c518]/20 rounded-xl px-4 py-3 text-center min-w-[90px] hover:bg-[#f5c518]/[0.15] transition-colors cursor-pointer flex flex-col justify-center\">\n                <p className=\"text-xl font-black text-[#f5c518]\">{extRatings.imdb.score}</p>\n                <p className=\"text-[10px] text-white/30 mt-0.5 flex items-center justify-center gap-1\">IMDb <ExternalLink size={10} /></p>\n                {extRatings.imdb.votes && (\n                  <p className=\"text-[9px] text-white/20\">{extRatings.imdb.votes} votes</p>\n                )}\n              </a>\n            )}\n\n            {/* Rotten Tomatoes — links to RT search */}\n            {extRatings?.rt && (\n              <a href={`https://www.rottentomatoes.com/search?search=${encodeURIComponent(title)}`} target=\"_blank\" rel=\"noopener noreferrer\"\n                className=\"bg-white/[0.04] border border-white/[0.06] rounded-xl px-4 py-3 text-center min-w-[90px] hover:bg-white/[0.08] transition-colors cursor-pointer flex flex-col justify-center\">\n                <p className=\"text-xl font-black\">\n                  <span className={parseInt(extRatings.rt.score) >= 60 ? 'text-red-400' : 'text-green-400'}>\n                    🍅 {extRatings.rt.score}\n                  </span>\n                </p>\n                <p className=\"text-[10px] text-white/30 mt-0.5 flex items-center justify-center gap-1\">Rotten Tomatoes <ExternalLink size={10} /></p>\n              </a>\n            )}\n\n            {/* MAL (anime only) */}\n            {isAnime && malData?.score && (\n              <a href={malData.url} target=\"_blank\" rel=\"noopener noreferrer\"\n                className=\"bg-[#2e51a2]/10 border border-[#2e51a2]/20 rounded-xl px-4 py-3 text-center min-w-[90px] hover:bg-[#2e51a2]/20 transition-colors flex flex-col justify-center\">\n                <p className=\"text-xl font-black text-[#2e51a2]\">{malData.score}</p>\n                <p className=\"text-[10px] text-white/30 mt-0.5 flex items-center justify-center gap-1\">MAL <ExternalLink size={10} /></p>\n                {malData.scored_by && (\n                  <p className=\"text-[9px] text-white/20\">{malData.scored_by.toLocaleString()} votes</p>\n                )}\n              </a>\n            )}\n\n            {/* Crunchyroll (anime only) */}\n            {isAnime && (\n              <a href={`https://www.crunchyroll.com/search?q=${encodeURIComponent(title)}`} target=\"_blank\" rel=\"noopener noreferrer\"\n                className=\"bg-[#f47521]/10 border border-[#f47521]/20 rounded-xl px-4 py-3 text-center min-w-[90px] hover:bg-[#f47521]/20 transition-colors flex flex-col justify-center\">\n                <p className=\"text-xl font-black text-[#f47521]\">CR</p>\n                <p className=\"text-[10px] text-white/30 mt-0.5 flex items-center justify-center gap-1\">Crunchyroll <ExternalLink size={10} /></p>\n              </a>\n            )}\n\n            {/* Loading shimmer — only while actually loading, not after failure */}\n            {!ratingsLoaded && data.external_ids?.imdb_id && (\n              <div className=\"bg-white/[0.02] border border-white/[0.04] rounded-xl px-4 py-3 text-center min-w-[90px] animate-pulse flex flex-col justify-center\">\n                <div className=\"h-5 w-12 bg-dark-600 rounded mx-auto mb-1\" />\n                <div className=\"h-2 w-8 bg-dark-600 rounded mx-auto\" />\n              </div>\n            )}\n          </div>\n\n          <p className=\"text-white/60 leading-relaxed mb-6 max-w-2xl\">{data.overview}</p>\n\n          {/* ── Quick Facts card (mobile only) ── */}\n          <div className=\"md:hidden mb-6\">\n            {quickFactsCard}\n          </div>\n\n          {/* ── Trailer ── */}\n          {trailer && (\n            <div className=\"mb-8\">\n              <h3 className=\"text-sm font-semibold text-white/60 mb-3 uppercase tracking-wider flex items-center gap-2\">\n                <Play size={14} /> Trailer\n              </h3>\n              <div className=\"relative w-full max-w-2xl aspect-video rounded-xl overflow-hidden border border-white/[0.06] bg-dark-700\">\n                <iframe\n                  src={`https://www.youtube.com/embed/${trailer.key}?rel=0&modestbranding=1`}\n                  title={trailer.name}\n                  allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n                  allowFullScreen\n                  className=\"absolute inset-0 w-full h-full\"\n                />\n              </div>\n              <p className=\"text-[10px] text-white/20 mt-2\">{trailer.name}</p>\n            </div>\n          )}\n\n          {/* ── Cast ── */}\n          {data.credits?.cast?.length > 0 && (\n            <div className=\"mb-8\">\n              <h3 className=\"text-sm font-semibold text-white/60 mb-3 uppercase tracking-wider\">Cast</h3>\n              <div className=\"flex gap-3 overflow-x-auto pb-2 scrollbar-hide\">\n                {data.credits.cast.slice(0, 10).map(actor => (\n                  <a\n                    key={actor.id}\n                    href={`https://www.google.com/search?q=${encodeURIComponent(actor.name + ' actor')}`}\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    className=\"flex-shrink-0 w-[90px] group/actor text-center\"\n                  >\n                    {actor.profile_path ? (\n                      <img\n                        src={`${TMDB_PROFILE}${actor.profile_path}`}\n                        alt={actor.name}\n                        className=\"w-[90px] h-[90px] rounded-full object-cover border-2 border-white/[0.06] group-hover/actor:border-accent/40 transition-colors\"\n                      />\n                    ) : (\n                      <div className=\"w-[90px] h-[90px] rounded-full bg-dark-600 flex items-center justify-center text-white/20 text-lg font-bold border-2 border-white/[0.06] group-hover/actor:border-accent/40 transition-colors\">\n                        {actor.name?.charAt(0)}\n                      </div>\n                    )}\n                    <p className=\"text-xs font-medium mt-2 truncate group-hover/actor:text-accent transition-colors\">{actor.name}</p>\n                    <p className=\"text-[10px] text-white/30 truncate\">{actor.character}</p>\n                  </a>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {/* ── Where to Watch ── */}\n          {(streamingProviders.length > 0 || rentProviders.length > 0 || buyProviders.length > 0) && (\n            <div className=\"mb-8\">\n              <h3 className=\"text-sm font-semibold text-white/60 mb-3 uppercase tracking-wider\">Where to Watch</h3>\n              <div className=\"space-y-3\">\n                {streamingProviders.length > 0 && (\n                  <div>\n                    <p className=\"text-[10px] text-white/30 mb-1.5 uppercase\">Stream</p>\n                    <div className=\"flex flex-wrap gap-2\">\n                      {streamingProviders.map(p => (\n                        <a key={p.provider_id} href={getProviderUrl(p.provider_name, title, providers?.link)} target=\"_blank\" rel=\"noopener noreferrer\"\n                          className=\"flex items-center gap-2 bg-white/[0.04] border border-white/[0.06] rounded-lg px-3 py-2 hover:bg-white/[0.08] transition-colors\">\n                          {p.logo_path && <img src={`${TMDB_LOGO}${p.logo_path}`} alt=\"\" className=\"w-6 h-6 rounded object-cover\" />}\n                          <span className=\"text-xs font-medium\">{p.provider_name}</span>\n                          <ExternalLink size={11} className=\"text-white/20\" />\n                        </a>\n                      ))}\n                    </div>\n                  </div>\n                )}\n                {rentProviders.length > 0 && (\n                  <div>\n                    <p className=\"text-[10px] text-white/30 mb-1.5 uppercase\">Rent</p>\n                    <div className=\"flex flex-wrap gap-2\">\n                      {rentProviders.slice(0, 6).map(p => (\n                        <a key={p.provider_id} href={getProviderUrl(p.provider_name, title, providers?.link)} target=\"_blank\" rel=\"noopener noreferrer\"\n                          className=\"flex items-center gap-2 bg-white/[0.04] border border-white/[0.06] rounded-lg px-3 py-2 hover:bg-white/[0.08] transition-colors\">\n                          {p.logo_path && <img src={`${TMDB_LOGO}${p.logo_path}`} alt=\"\" className=\"w-5 h-5 rounded object-cover\" />}\n                          <span className=\"text-xs text-white/60\">{p.provider_name}</span>\n                        </a>\n                      ))}\n                    </div>\n                  </div>\n                )}\n                {buyProviders.length > 0 && (\n                  <div>\n                    <p className=\"text-[10px] text-white/30 mb-1.5 uppercase\">Buy</p>\n                    <div className=\"flex flex-wrap gap-2\">\n                      {buyProviders.slice(0, 6).map(p => (\n                        <a key={p.provider_id} href={getProviderUrl(p.provider_name, title, providers?.link)} target=\"_blank\" rel=\"noopener noreferrer\"\n                          className=\"flex items-center gap-2 bg-white/[0.04] border border-white/[0.06] rounded-lg px-3 py-2 hover:bg-white/[0.08] transition-colors\">\n                          {p.logo_path && <img src={`${TMDB_LOGO}${p.logo_path}`} alt=\"\" className=\"w-5 h-5 rounded object-cover\" />}\n                          <span className=\"text-xs text-white/60\">{p.provider_name}</span>\n                        </a>\n                      ))}\n                    </div>\n                  </div>\n                )}\n\n              </div>\n            </div>\n          )}\n\n          {/* ── Fun Facts ── */}\n          {(() => {\n            const facts = [];\n            const releaseYear = parseInt((data.release_date || data.first_air_date || '').slice(0, 4));\n            const age = releaseYear ? new Date().getFullYear() - releaseYear : 0;\n\n            // Budget & revenue facts\n            if (data.budget > 0 && data.revenue > 0) {\n              const ratio = (data.revenue / data.budget).toFixed(0);\n              if (data.revenue > data.budget * 10) facts.push(`💰 Made ${ratio}x its budget — earning $${(data.revenue / 1e6).toFixed(0)}M from a $${(data.budget / 1e6).toFixed(0)}M budget.`);\n              else if (data.revenue > data.budget * 3) facts.push(`📈 Earned $${(data.revenue / 1e6).toFixed(0)}M against a $${(data.budget / 1e6).toFixed(0)}M budget — a ${ratio}x return.`);\n              else if (data.revenue < data.budget) facts.push(`📉 Only earned $${(data.revenue / 1e6).toFixed(0)}M against a $${(data.budget / 1e6).toFixed(0)}M budget — a box office underperformer.`);\n            } else if (data.budget > 200e6) {\n              facts.push(`🎬 Had a massive $${(data.budget / 1e6).toFixed(0)}M production budget.`);\n            }\n\n            // Awards\n            if (extRatings?.awards) {\n              const oscars = extRatings.awards.match(/Won (\\d+) Oscar/);\n              const noms = extRatings.awards.match(/Nominated for (\\d+) Oscar/);\n              if (oscars) facts.push(`🏆 Won ${oscars[1]} Academy Award${parseInt(oscars[1]) > 1 ? 's' : ''}.`);\n              else if (noms) facts.push(`🎖️ Nominated for ${noms[1]} Academy Award${parseInt(noms[1]) > 1 ? 's' : ''}.`);\n              else if (extRatings.awards.includes('win')) facts.push(`🏅 ${extRatings.awards}`);\n            }\n\n            // Age & classic status\n            if (age > 50) facts.push(`🕰️ Released ${age} years ago and still beloved — a true classic.`);\n            else if (age > 25) facts.push(`📅 Over ${age} years old and still highly regarded.`);\n            else if (age <= 1 && releaseYear) facts.push(`✨ A brand new release from ${releaseYear}.`);\n\n            // Popularity & votes\n            if (data.vote_count > 20000) facts.push(`🌍 Rated by over ${Math.floor(data.vote_count / 1000)}k people on TMDB — one of the most-reviewed titles.`);\n            else if (data.vote_count > 5000) facts.push(`⭐ Rated by ${data.vote_count.toLocaleString()} users on TMDB.`);\n\n            // Runtime\n            if (data.runtime > 180) facts.push(`⏱️ At ${data.runtime} minutes, this is an epic-length film — bring snacks.`);\n            else if (data.runtime && data.runtime < 90) facts.push(`⚡ At just ${data.runtime} minutes, it's a quick but impactful watch.`);\n\n            // TV-specific\n            if (data.number_of_seasons > 10) facts.push(`📺 A long-running series spanning ${data.number_of_seasons} seasons and ${data.number_of_episodes || 'many'} episodes.`);\n            else if (data.number_of_seasons === 1 && data.status === 'Ended') facts.push(`🎯 A complete story told in just one season — ${data.number_of_episodes || 'a few'} episodes.`);\n            if (data.number_of_episodes > 500) facts.push(`📊 Over ${data.number_of_episodes} episodes have aired!`);\n\n            // Language / country\n            if (data.original_language && data.original_language !== 'en') {\n              const langNames = { ja: 'Japanese', ko: 'Korean', fr: 'French', es: 'Spanish', de: 'German', it: 'Italian', pt: 'Portuguese', zh: 'Chinese', hi: 'Hindi', ar: 'Arabic', ru: 'Russian', sv: 'Swedish', da: 'Danish', th: 'Thai', tl: 'Tagalog', pl: 'Polish', nl: 'Dutch', tr: 'Turkish' };\n              const lang = langNames[data.original_language] || data.original_language.toUpperCase();\n              facts.push(`🌐 Originally produced in ${lang}.`);\n            }\n\n            // Production companies\n            if (data.production_companies?.length > 3) facts.push(`🏢 A joint production between ${data.production_companies.length} studios.`);\n\n            return facts.length > 0 ? (\n              <div className=\"mb-8\">\n                <h3 className=\"text-sm font-semibold text-white/60 mb-3 uppercase tracking-wider flex items-center gap-2\">\n                  <Lightbulb size={14} className=\"text-gold\" /> Fun Facts\n                </h3>\n                <div className=\"space-y-2\">\n                  {facts.slice(0, 5).map((fact, i) => (\n                    <div key={i} className=\"flex items-start gap-3 bg-white/[0.03] border border-white/[0.06] rounded-xl px-4 py-3\">\n                      <Sparkles size={14} className=\"text-accent mt-0.5 flex-shrink-0\" />\n                      <p className=\"text-sm text-white/60 leading-relaxed\">{fact}</p>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            ) : null;\n          })()}\n\n          <LibraryPanel\n            mediaId={{ tmdb_id: data.id }}\n            addPayload={{\n              tmdb_id: data.id,\n              media_type: mediaType,\n              title: data.title || data.name,\n              poster_path: data.poster_path ? `${TMDB_IMG}${data.poster_path}` : null,\n              overview: data.overview,\n              external_rating: avgScore ? parseFloat(avgScore) : data.vote_average,\n              genres: data.genres?.map(g => g.name).join(', '),\n              release_date: data.release_date || data.first_air_date,\n            }}\n          />\n        </div>\n      </div>\n\n      {/* Recommendations */}\n      {recommendations.length > 0 && (\n        <div className=\"mt-16\">\n          <h2 className=\"text-xl font-bold mb-6\">You Might Also Like</h2>\n          <div className=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-5\">\n            {recommendations.map(r => (\n              <MediaCard key={r.id} item={r} mediaType={mediaType} />\n            ))}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default Details;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  [\n    'path',\n    {\n      d: 'm15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526',\n      key: '1yiouv',\n    },\n  ],\n  ['circle', { cx: '12', cy: '8', r: '6', key: '1vp47v' }],\n];\n\n/**\n * @component @name Award\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtMTUuNDc3IDEyLjg5IDEuNTE1IDguNTI2YS41LjUgMCAwIDEtLjgxLjQ3bC0zLjU4LTIuNjg3YTEgMSAwIDAgMC0xLjE5NyAwbC0zLjU4NiAyLjY4NmEuNS41IDAgMCAxLS44MS0uNDY5bDEuNTE0LTguNTI2IiAvPgogIDxjaXJjbGUgY3g9IjEyIiBjeT0iOCIgcj0iNiIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/award\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Award = createLucideIcon('award', __iconNode);\n\nexport default Award;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M12 7v14', key: '1akyts' }],\n  [\n    'path',\n    {\n      d: 'M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z',\n      key: 'ruj8y',\n    },\n  ],\n];\n\n/**\n * @component @name BookOpen\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTIgN3YxNCIgLz4KICA8cGF0aCBkPSJNMyAxOGExIDEgMCAwIDEtMS0xVjRhMSAxIDAgMCAxIDEtMWg1YTQgNCAwIDAgMSA0IDQgNCA0IDAgMCAxIDQtNGg1YTEgMSAwIDAgMSAxIDF2MTNhMSAxIDAgMCAxLTEgMWgtNmEzIDMgMCAwIDAtMyAzIDMgMyAwIDAgMC0zLTN6IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/book-open\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst BookOpen = createLucideIcon('book-open', __iconNode);\n\nexport default BookOpen;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [['path', { d: 'M20 6 9 17l-5-5', key: '1gmf2c' }]];\n\n/**\n * @component @name Check\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjAgNiA5IDE3bC01LTUiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/check\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Check = createLucideIcon('check', __iconNode);\n\nexport default Check;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [['path', { d: 'm15 18-6-6 6-6', key: '1wnfg3' }]];\n\n/**\n * @component @name ChevronLeft\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtMTUgMTgtNi02IDYtNiIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/chevron-left\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ChevronLeft = createLucideIcon('chevron-left', __iconNode);\n\nexport default ChevronLeft;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M12 6v6l4 2', key: 'mmk7yg' }],\n  ['circle', { cx: '12', cy: '12', r: '10', key: '1mglay' }],\n];\n\n/**\n * @component @name Clock\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTIgNnY2bDQgMiIgLz4KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMCIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/clock\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Clock = createLucideIcon('clock', __iconNode);\n\nexport default Clock;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  [\n    'path',\n    {\n      d: 'M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0',\n      key: '1nclc0',\n    },\n  ],\n  ['circle', { cx: '12', cy: '12', r: '3', key: '1v7zrd' }],\n];\n\n/**\n * @component @name Eye\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMi4wNjIgMTIuMzQ4YTEgMSAwIDAgMSAwLS42OTYgMTAuNzUgMTAuNzUgMCAwIDEgMTkuODc2IDAgMSAxIDAgMCAxIDAgLjY5NiAxMC43NSAxMC43NSAwIDAgMS0xOS44NzYgMCIgLz4KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIzIiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/eye\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Eye = createLucideIcon('eye', __iconNode);\n\nexport default Eye;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['rect', { width: '18', height: '18', x: '3', y: '3', rx: '2', key: 'afitv7' }],\n  ['path', { d: 'M7 3v18', key: 'bbkbws' }],\n  ['path', { d: 'M3 7.5h4', key: 'zfgn84' }],\n  ['path', { d: 'M3 12h18', key: '1i2n21' }],\n  ['path', { d: 'M3 16.5h4', key: '1230mu' }],\n  ['path', { d: 'M17 3v18', key: 'in4fa5' }],\n  ['path', { d: 'M17 7.5h4', key: 'myr1c1' }],\n  ['path', { d: 'M17 16.5h4', key: 'go4c1d' }],\n];\n\n/**\n * @component @name Film\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cmVjdCB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHg9IjMiIHk9IjMiIHJ4PSIyIiAvPgogIDxwYXRoIGQ9Ik03IDN2MTgiIC8+CiAgPHBhdGggZD0iTTMgNy41aDQiIC8+CiAgPHBhdGggZD0iTTMgMTJoMTgiIC8+CiAgPHBhdGggZD0iTTMgMTYuNWg0IiAvPgogIDxwYXRoIGQ9Ik0xNyAzdjE4IiAvPgogIDxwYXRoIGQ9Ik0xNyA3LjVoNCIgLz4KICA8cGF0aCBkPSJNMTcgMTYuNWg0IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/film\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Film = createLucideIcon('film', __iconNode);\n\nexport default Film;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  [\n    'path',\n    {\n      d: 'M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z',\n      key: '10ikf1',\n    },\n  ],\n];\n\n/**\n * @component @name Play\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNNSA1YTIgMiAwIDAgMSAzLjAwOC0xLjcyOGwxMS45OTcgNi45OThhMiAyIDAgMCAxIC4wMDMgMy40NThsLTEyIDdBMiAyIDAgMCAxIDUgMTl6IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/play\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Play = createLucideIcon('play', __iconNode);\n\nexport default Play;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M5 12h14', key: '1ays0h' }],\n  ['path', { d: 'M12 5v14', key: 's699le' }],\n];\n\n/**\n * @component @name Plus\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNNSAxMmgxNCIgLz4KICA8cGF0aCBkPSJNMTIgNXYxNCIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/plus\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Plus = createLucideIcon('plus', __iconNode);\n\nexport default Plus;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  [\n    'path',\n    {\n      d: 'M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z',\n      key: '1s2grr',\n    },\n  ],\n  ['path', { d: 'M20 2v4', key: '1rf3ol' }],\n  ['path', { d: 'M22 4h-4', key: 'gwowj6' }],\n  ['circle', { cx: '4', cy: '20', r: '2', key: '6kqj1y' }],\n];\n\n/**\n * @component @name Sparkles\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTEuMDE3IDIuODE0YTEgMSAwIDAgMSAxLjk2NiAwbDEuMDUxIDUuNTU4YTIgMiAwIDAgMCAxLjU5NCAxLjU5NGw1LjU1OCAxLjA1MWExIDEgMCAwIDEgMCAxLjk2NmwtNS41NTggMS4wNTFhMiAyIDAgMCAwLTEuNTk0IDEuNTk0bC0xLjA1MSA1LjU1OGExIDEgMCAwIDEtMS45NjYgMGwtMS4wNTEtNS41NThhMiAyIDAgMCAwLTEuNTk0LTEuNTk0bC01LjU1OC0xLjA1MWExIDEgMCAwIDEgMC0xLjk2Nmw1LjU1OC0xLjA1MWEyIDIgMCAwIDAgMS41OTQtMS41OTR6IiAvPgogIDxwYXRoIGQ9Ik0yMCAydjQiIC8+CiAgPHBhdGggZD0iTTIyIDRoLTQiIC8+CiAgPGNpcmNsZSBjeD0iNCIgY3k9IjIwIiByPSIyIiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/sparkles\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Sparkles = createLucideIcon('sparkles', __iconNode);\n\nexport default Sparkles;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M10 11v6', key: 'nco0om' }],\n  ['path', { d: 'M14 11v6', key: 'outv1u' }],\n  ['path', { d: 'M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6', key: 'miytrc' }],\n  ['path', { d: 'M3 6h18', key: 'd0wm0j' }],\n  ['path', { d: 'M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2', key: 'e791ji' }],\n];\n\n/**\n * @component @name Trash2\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTAgMTF2NiIgLz4KICA8cGF0aCBkPSJNMTQgMTF2NiIgLz4KICA8cGF0aCBkPSJNMTkgNnYxNGEyIDIgMCAwIDEtMiAySDdhMiAyIDAgMCAxLTItMlY2IiAvPgogIDxwYXRoIGQ9Ik0zIDZoMTgiIC8+CiAgPHBhdGggZD0iTTggNlY0YTIgMiAwIDAgMSAyLTJoNGEyIDIgMCAwIDEgMiAydjIiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/trash-2\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Trash2 = createLucideIcon('trash-2', __iconNode);\n\nexport default Trash2;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2', key: '1yyitq' }],\n  ['path', { d: 'M16 3.128a4 4 0 0 1 0 7.744', key: '16gr8j' }],\n  ['path', { d: 'M22 21v-2a4 4 0 0 0-3-3.87', key: 'kshegd' }],\n  ['circle', { cx: '9', cy: '7', r: '4', key: 'nufk8' }],\n];\n\n/**\n * @component @name Users\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTYgMjF2LTJhNCA0IDAgMCAwLTQtNEg2YTQgNCAwIDAgMC00IDR2MiIgLz4KICA8cGF0aCBkPSJNMTYgMy4xMjhhNCA0IDAgMCAxIDAgNy43NDQiIC8+CiAgPHBhdGggZD0iTTIyIDIxdi0yYTQgNCAwIDAgMC0zLTMuODciIC8+CiAgPGNpcmNsZSBjeD0iOSIgY3k9IjciIHI9IjQiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/users\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Users = createLucideIcon('users', __iconNode);\n\nexport default Users;\n"],"names":["BookCover","_ref","urls","alt","className","children","index","setIndex","useState","broken","setBroken","urlKey","useEffect","advance","prev","next","length","_jsx","concat","BookOpen","size","src","loading","decoding","onError","onLoad","e","target","naturalWidth","React","MediaCard","_ref2","_ref3","_item$unified_rating","item","mediaType","navigate","useNavigate","user","useAuth","toast","useToast","title","name","poster","poster_path","startsWith","year","release_date","first_air_date","first_publish_year","toString","slice","type","media_type","storedScore","getSyllabusScore","id","rating","unified_rating","vote_average","imgBroken","setImgBroken","isBook","_jsxs","onClick","handleClick","bookKey","key","replace","tmdb_id","cover_urls","Star","Number","toFixed","async","stopPropagation","addToLibrary","openlibrary_key","overview","external_rating","genres","genre_ids","join","err","message","Plus","author","ExternalLink","createLucideIcon","d","BookCopy","BookMarked","ShoppingCart","cx","cy","r","Lightbulb","DollarSign","x1","x2","y1","y2","Globe","TMDB_IMG","TMDB_LOGO","TMDB_PROFILE","PROVIDER_URLS","encodeURIComponent","getProviderUrl","providerName","fallbackLink","urlFn","Object","entries","toLowerCase","includes","LibraryPanel","mediaId","addPayload","libItem","setLibItem","setLoading","saving","setSaving","status","setStatus","setRating","review","setReview","expanded","setExpanded","stableKey","cancelled","getLibraryItemByMediaId","user_rating","console","error","lookup","Check","removeFromLibrary","_unused2","Trash2","icon","Clock","label","active","Eye","CheckCircle2","map","s","newStatus","updateLibraryItem","_objectSpread","want","watching","finished","logActivity","action","media_id","poster_url","catch","_unused","handleStatusChange","min","max","step","value","onChange","parseFloat","val","getRatingLabel","n","placeholder","rows","updated","disabled","cls","newItem","chosenStatus","handleAdd","BookDetails","_data$authors","_data$subjects","_data$description","workKey","data","setData","recommendations","setRecommendations","getBookDetails","then","result","getBookRecommendations","totalReaders","want_to_read","currently_reading","already_read","searchQ","isGoogleBook","google_id","ChevronLeft","strokeWidth","authors","i","_author$name","href","rel","photo","charAt","first_publish_date","edition_count","info_link","ratings_count","toLocaleString","Users","_Fragment","description","subjects","book","facts","_data$subjects4","_data$authors3","push","yearMatch","match","age","Date","getFullYear","parseInt","_data$subjects2","_data$subjects3","_data$authors2","Math","floor","some","fact","Sparkles","MovieTVDetails","_data$genres","_data$genres2","_data$recommendations","_data$recommendations2","_data$external_ids","_data$credits","_data$watchProviders","_data$production_comp","_data$external_ids2","_data$external_ids3","_data$credits2","_data$credits2$cast","_data$genres3","extRatings","setExtRatings","ratingsLoaded","setRatingsLoaded","malData","setMalData","_result$external_ids","_result$genres","fetcher","getMovieDetails","getTVDetails","imdbId","external_ids","imdb_id","resultTitle","getOMDbRatings","Promise","resolve","setTimeout","fetchRatings","original_language","g","getMALRating","load","isAnime","avgScore","computeUnifiedRating","setSyllabusScore","results","crew","credits","directors","filter","c","job","writers","department","trailer","_data$videos","vids","videos","v","site","find","wpData","providers","AU","US","streamingProviders","flatrate","rentProviders","rent","buyProviders","buy","quickFactsCard","tagline","_d$name","profile_path","w","_w$name","rated","Film","awards","Award","boxOffice","budget","revenue","country","production_companies","Info","backdrop_path","runtime","number_of_seasons","syllabusScore","displayScore","imdb","score","votes","rt","url","scored_by","Play","allow","allowFullScreen","cast","actor","_actor$name","character","p","provider_name","link","logo_path","provider_id","_data$production_comp2","releaseYear","ratio","oscars","noms","vote_count","number_of_episodes","lang","ja","ko","fr","es","de","it","pt","zh","hi","ar","ru","sv","da","th","tl","pl","nl","tr","toUpperCase","useParams","width","height","x","y","rx"],"sourceRoot":""}