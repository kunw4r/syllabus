/*! For license information please see 988.9c8164b2.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunksyllabus_client=self.webpackChunksyllabus_client||[]).push([[988],{5988(e,t,s){s.r(t),s.d(t,{default:()=>g});var a=s(2555),l=s(5043),i=s(3216),n=s(1207),o=s(4537),c=s(4918),r=s(9292),d=s(2119),x=s(3944),h=s(3786),m=s(1884),u=s(4459),f=s(7118),p=s(7694),w=s(8729),y=s(579);function g(){const{user:e}=(0,w.A)(),t=(0,p.d)(),s=(0,i.Zp)(),[d,x]=(0,l.useState)("feed"),[h,m]=(0,l.useState)(""),[u,g]=(0,l.useState)([]),[b,N]=(0,l.useState)(!1),[A,S]=(0,l.useState)([]),[_,C]=(0,l.useState)([]),[F,M]=(0,l.useState)([]),[z,H]=(0,l.useState)(!0),[U,B]=(0,l.useState)(new Set),D=(0,l.useCallback)(async()=>{if(e){H(!0);try{const[t,s,a]=await Promise.all([(0,n.mH)(e.id),(0,n.SR)(e.id),(0,n.ks)(50)]);S(t),C(s),M(a),B(new Set(t.map(e=>e.id)))}catch(t){console.error("Social load error:",t)}H(!1)}},[e]);(0,l.useEffect)(()=>{D()},[D]);const q=async(e,s)=>{try{await(0,n.pV)(e),B(t=>new Set([...t,e])),g(t=>t.map(t=>t.id===e?(0,a.A)((0,a.A)({},t),{},{isFollowed:!0}):t)),t("Following ".concat(s,"!"),"success"),D()}catch(l){t("Could not follow","error")}},E=async(e,s)=>{try{await(0,n.Qt)(e),B(t=>{const s=new Set(t);return s.delete(e),s}),g(t=>t.map(t=>t.id===e?(0,a.A)((0,a.A)({},t),{},{isFollowed:!1}):t)),t("Unfollowed ".concat(s),"info"),D()}catch(l){t("Could not unfollow","error")}};return e?z?(0,y.jsx)("div",{className:"flex items-center justify-center min-h-[60vh]",children:(0,y.jsx)("div",{className:"w-8 h-8 border-2 border-dark-500 border-t-accent rounded-full animate-spin"})}):(0,y.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[(0,y.jsxs)("div",{children:[(0,y.jsxs)("h1",{className:"text-2xl sm:text-3xl font-black text-white flex items-center gap-3",children:[(0,y.jsx)(f.A,{size:28,className:"text-accent"})," Social"]}),(0,y.jsx)("p",{className:"text-sm text-white/40 mt-1",children:"Find friends, see what they're watching"})]}),(0,y.jsxs)("form",{onSubmit:async e=>{if(null===e||void 0===e||e.preventDefault(),h.trim()){N(!0);try{const e=await(0,n.x5)(h.trim()),t=await Promise.all(e.map(async e=>(0,a.A)((0,a.A)({},e),{},{isFollowed:U.has(e.id)})));g(t)}catch(s){t("Search failed","error")}N(!1)}},className:"flex gap-2",children:[(0,y.jsxs)("div",{className:"relative flex-1",children:[(0,y.jsx)(r.A,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-white/30"}),(0,y.jsx)("input",{type:"text",value:h,onChange:e=>m(e.target.value),placeholder:"Search users by username...",className:"w-full bg-white/5 border border-white/10 rounded-xl pl-10 pr-4 py-2.5 text-white text-sm placeholder:text-white/20 focus:outline-none focus:border-accent transition-colors"})]}),(0,y.jsx)("button",{type:"submit",disabled:b,className:"bg-accent hover:bg-accent/80 text-white px-5 py-2.5 rounded-xl text-sm font-medium transition-colors disabled:opacity-50",children:b?"...":"Search"})]}),u.length>0&&(0,y.jsxs)("div",{className:"glass rounded-2xl p-4 space-y-2",children:[(0,y.jsx)("h3",{className:"text-sm font-semibold text-white/40 mb-2",children:"Search Results"}),u.map(e=>(0,y.jsx)(j,{user:e,isFollowed:e.isFollowed,onFollow:()=>q(e.id,e.username),onUnfollow:()=>E(e.id,e.username),onClick:()=>s("/profile/".concat(e.id))},e.id))]}),(0,y.jsx)("div",{className:"flex gap-1",children:[{key:"feed",label:"Activity Feed",icon:o.A},{key:"following",label:"Following (".concat(A.length,")"),icon:f.A},{key:"followers",label:"Followers (".concat(_.length,")"),icon:c.A}].map(e=>(0,y.jsxs)("button",{onClick:()=>x(e.key),className:"flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-medium whitespace-nowrap transition-all ".concat(d===e.key?"bg-accent text-white":"bg-white/5 text-white/40 hover:bg-white/10 hover:text-white"),children:[(0,y.jsx)(e.icon,{size:16})," ",e.label]},e.key))}),"feed"===d&&(0,y.jsx)(v,{activity:F,navigate:s}),"following"===d&&(0,y.jsx)("div",{className:"space-y-2",children:0===A.length?(0,y.jsx)(k,{icon:f.A,text:"You're not following anyone yet. Search for friends above!"}):A.map(e=>(0,y.jsx)(j,{user:e,isFollowed:!0,onUnfollow:()=>E(e.id,e.username),onClick:()=>s("/profile/".concat(e.id)),showBlend:!0,onBlend:()=>s("/profile?blend=".concat(e.id))},e.id))}),"followers"===d&&(0,y.jsx)("div",{className:"space-y-2",children:0===_.length?(0,y.jsx)(k,{icon:c.A,text:"No followers yet. Share your profile!"}):_.map(e=>(0,y.jsx)(j,{user:e,isFollowed:U.has(e.id),onFollow:()=>q(e.id,e.username),onUnfollow:()=>E(e.id,e.username),onClick:()=>s("/profile/".concat(e.id))},e.id))})]}):(0,y.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[60vh] gap-4",children:[(0,y.jsx)(f.A,{size:48,className:"text-white/20"}),(0,y.jsx)("p",{className:"text-white/40",children:"Sign in to connect with friends"}),(0,y.jsx)("button",{onClick:()=>s("/login"),className:"bg-accent hover:bg-accent/80 text-white px-6 py-2 rounded-xl text-sm font-medium transition-colors",children:"Sign In"})]})}function j(e){let{user:t,isFollowed:s,onFollow:a,onUnfollow:l,onClick:i,showBlend:n,onBlend:o}=e;return(0,y.jsxs)("div",{className:"glass rounded-2xl p-4 flex items-center gap-4 hover:bg-white/5 transition-colors",children:[(0,y.jsxs)("button",{onClick:i,className:"flex items-center gap-3 flex-1 min-w-0",children:[(0,y.jsx)("div",{className:"w-10 h-10 rounded-full overflow-hidden bg-dark-700 ring-2 ring-white/10 shrink-0 flex items-center justify-center",children:t.avatar_url?(0,y.jsx)("img",{src:t.avatar_url,alt:"",className:"w-full h-full object-cover",onError:e=>{e.target.onerror=null,e.target.style.display="none"}}):(0,y.jsx)(u.A,{size:18,className:"text-white/20"})}),(0,y.jsxs)("div",{className:"min-w-0",children:[(0,y.jsx)("p",{className:"text-sm font-semibold text-white truncate",children:t.display_name||t.username}),t.display_name&&(0,y.jsxs)("p",{className:"text-xs text-white/30 truncate",children:["@",t.username]})]})]}),(0,y.jsxs)("div",{className:"flex gap-2 shrink-0",children:[n&&(0,y.jsxs)("button",{onClick:o,className:"bg-gradient-to-r from-purple-500/20 to-accent/20 hover:from-purple-500/30 hover:to-accent/30 text-white px-3 py-1.5 rounded-lg text-xs font-medium flex items-center gap-1 transition-all",children:[(0,y.jsx)(d.A,{size:14})," Blend"]}),s?(0,y.jsxs)("button",{onClick:l,className:"bg-white/10 hover:bg-red-500/20 hover:text-red-400 text-white/50 px-3 py-1.5 rounded-lg text-xs font-medium flex items-center gap-1 transition-colors",children:[(0,y.jsx)(h.A,{size:14})," Unfollow"]}):a?(0,y.jsxs)("button",{onClick:a,className:"bg-accent hover:bg-accent/80 text-white px-3 py-1.5 rounded-lg text-xs font-medium flex items-center gap-1 transition-colors",children:[(0,y.jsx)(m.A,{size:14})," Follow"]}):null]})]})}function v(e){let{activity:t,navigate:s}=e;return 0===t.length?(0,y.jsx)(k,{icon:o.A,text:"No activity yet. Follow some friends to see their updates!"}):(0,y.jsx)("div",{className:"space-y-3",children:t.map(e=>{const t=e.profiles;return(0,y.jsx)("div",{className:"glass rounded-2xl p-4 hover:bg-white/5 transition-colors",children:(0,y.jsxs)("div",{className:"flex items-start gap-3",children:[(0,y.jsx)("button",{onClick:()=>s("/profile/".concat(e.user_id)),className:"shrink-0",children:(0,y.jsx)("div",{className:"w-10 h-10 rounded-full overflow-hidden bg-dark-700 ring-2 ring-white/10 flex items-center justify-center",children:null!==t&&void 0!==t&&t.avatar_url?(0,y.jsx)("img",{src:t.avatar_url,alt:"",className:"w-full h-full object-cover",onError:e=>{e.target.onerror=null,e.target.style.display="none"}}):(0,y.jsx)(u.A,{size:16,className:"text-white/20"})})}),(0,y.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,y.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,y.jsx)("button",{onClick:()=>s("/profile/".concat(e.user_id)),className:"text-sm font-semibold text-white hover:text-accent transition-colors",children:(null===t||void 0===t?void 0:t.username)||"Someone"}),(0,y.jsxs)("span",{className:"text-sm text-white/40",children:["added"===e.action&&"added","rated"===e.action&&"rated","reviewed"===e.action&&"reviewed","finished"===e.action&&"finished","followed"===e.action&&"followed","watching"===e.action&&"is watching",!["added","rated","reviewed","finished","followed","watching"].includes(e.action)&&e.action]}),e.title&&"followed"!==e.action&&(0,y.jsxs)("button",{onClick:()=>{e.media_type&&e.media_id&&s("/details/".concat(e.media_type,"/").concat(e.media_id))},className:"text-sm font-medium text-accent hover:text-accent/80 transition-colors truncate",children:['"',e.title,'"']}),"followed"===e.action&&e.title&&(0,y.jsx)("span",{className:"text-sm text-accent",children:e.title})]}),e.rating&&(0,y.jsxs)("div",{className:"flex items-center gap-1 mt-1",children:[(0,y.jsx)(x.A,{size:14,className:"text-gold fill-gold"}),(0,y.jsxs)("span",{className:"text-xs font-bold text-gold",children:[e.rating,"/10"]})]}),e.review&&(0,y.jsxs)("p",{className:"text-xs text-white/40 mt-1 line-clamp-2",children:['"',e.review,'"']}),(0,y.jsx)("span",{className:"text-[10px] text-white/20 mt-1 block",children:b(e.created_at)})]}),e.poster_url&&(0,y.jsx)("button",{onClick:()=>{e.media_type&&e.media_id&&s("/details/".concat(e.media_type,"/").concat(e.media_id))},className:"shrink-0",children:(0,y.jsx)("img",{src:e.poster_url,alt:"",className:"w-10 h-14 rounded-lg object-cover ring-1 ring-white/10"})})]})},e.id)})})}function k(e){let{icon:t,text:s}=e;return(0,y.jsxs)("div",{className:"glass rounded-2xl p-8 text-center",children:[(0,y.jsx)(t,{size:32,className:"mx-auto mb-2 text-white/10"}),(0,y.jsx)("p",{className:"text-white/30 text-sm",children:s})]})}function b(e){const t=new Date(e),s=(new Date-t)/1e3;return s<60?"just now":s<3600?"".concat(Math.floor(s/60),"m ago"):s<86400?"".concat(Math.floor(s/3600),"h ago"):s<604800?"".concat(Math.floor(s/86400),"d ago"):t.toLocaleDateString("en-US",{month:"short",day:"numeric"})}},4537(e,t,s){s.d(t,{A:()=>a});const a=(0,s(1212).A)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]])},4918(e,t,s){s.d(t,{A:()=>a});const a=(0,s(1212).A)("heart",[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]])},9292(e,t,s){s.d(t,{A:()=>a});const a=(0,s(1212).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},2119(e,t,s){s.d(t,{A:()=>a});const a=(0,s(1212).A)("shuffle",[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]])},3786(e,t,s){s.d(t,{A:()=>a});const a=(0,s(1212).A)("user-minus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]])},1884(e,t,s){s.d(t,{A:()=>a});const a=(0,s(1212).A)("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]])},4459(e,t,s){s.d(t,{A:()=>a});const a=(0,s(1212).A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},7118(e,t,s){s.d(t,{A:()=>a});const a=(0,s(1212).A)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])}}]);
//# sourceMappingURL=988.9c8164b2.chunk.js.map